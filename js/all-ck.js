function jsLeafRefresh(){$("#bottom").height()>3&&$("#leaf_left_col li[class=current]").click()}function modalWin(){width=480;height=640;adress="diary.php#29.09.2012";alert(1);if(!window.showModalDialog)window.showModalDialog(adress,"4tree-diary","dialogWidth:"+width+"px;dialogHeight:"+height+"px");else{diarywindow=window.open(adress,"4tree-diary","height="+height+",width="+width+",toolbar=no,directories=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes ,modal=no");console.info(diarywindow)}}function jsDoFirstDiary(){myr=$("#redactor_content").redactor({imageUpload:"./redactor/demo/scripts/image_upload.php",lang:"ru",focus:!1,fileUpload:"./redactor/demo/scripts/file_upload.php",autoresize:!0});jsLoadNoteDiary("node_665")}function jsLoadNoteDiary(e){savetext(1);var t="";$.ajaxSetup({async:!1});var n=0;$("#bubu").load("do.php?notes="+e,function(){t+=jsShowText(e,$("#bubu").html(),n)});$("#redactor_content").attr("notes",e);$("#redactor_content").setCode(t)}function jsLeafCount(){clearTimeout(leaf_count);leaf_count=setTimeout(function(){$.getJSON("do.php?leaf_count=888",function(e){var t=1;$.each(e,function(e,t){amount=t.amount[0];$("#r"+e).html(amount);e+=1})})},5e3)}function PrintIt(e){var t=navigator.userAgent,n=/MSIE/.test(t);wnd=window.open("","tinyWindow","statusbar=no,toolbar=no,scrollbars=yes,resizable=yes,width=630,height=900");wnd.document.write('<html><title>4tree — мои дела</title><head><link href="css/print.css"rel="stylesheet"type="text/css" media="all"/><link rel="stylesheet" href="css/styles.css" type="text/css"></style><link rel="stylesheet" href="./redactor/redactor/redactor.css" /><link rel=\'stylesheet\' type=\'text/css\' href=\'./fullcalendar-1.5.3/fullcalendar/fullcalendar.css\' /></head><body onclick="window.close()"><div id="watermark-top"></div>');wnd.document.write(e);if(!n){wnd.document.write('<div id="watermark-bottom">4tree.ru</div><body></html>');wnd.print()}else{wnd.document.write("<script>window.onload=self.print();</script></body></html>");wnd.location.reload()}}function jscookie(e,t,n){if(!t)return mycookie[e];if(save_cookie){mycookie[e]=t;clearTimeout(savecookies);savecookies=setTimeout(function(){console.info("Сохранил кукис");var e=$.ajax({type:"POST",url:"do.php",data:mycookie,success:function(e){}})},5e3)}}function jsFocus(e){$("#demo").jstree("deselect_all");save_cookie=!1;parent=$(".second_ul").children("li").attr("id");$("#"+parent).swapWith("#li_temp");if(e!=1){$(".main_ul").hide();$(".second_ul").show();$.ajaxSetup({async:!1});if(!$("#demo li[id=node_"+e+"]").length){path=$("#tabs li a[myid="+e+"]").attr("path");path=path.split(",");for(i=0;i<path.length;i+=1){toopen=path[i];vv=$("#node_"+toopen);vv.hasClass("jstree-closed")&&vv.children("ul").length==0&&$("#demo").jstree("open_node",$("#node_"+toopen),!1)}}setTimeout(function(){$(".second_ul ul").height("auto")},300);$("#node_"+e).swapWith("#li_temp");$("#demo").jstree("show_cookie");to_open=mycookie[new_cookie_name+"save_opened"];$(".second_ul li[class*='jstree-open']").each(function(){the_id=$(this).attr("id");to_open.indexOf(the_id)==-1&&$("#demo").jstree("close_node",$("#"+the_id),!1)})}else{$(".main_ul").show();$(".second_ul").hide();setTimeout(function(){console.info(new_cookie_name);$("#demo").jstree("show_cookie");to_open=mycookie[new_cookie_name+"save_opened"];$(".main_ul li[class*='jstree-open']").each(function(){the_id=$(this).attr("id");to_open.indexOf(the_id)==-1&&$("#demo").jstree("close_node",$("#"+the_id),!1)})},200)}$.ajaxSetup({async:!1});myscroll=jscookie(e+"_scroll");setTimeout(function(){$("#demo").stop().scrollTop(myscroll);myscroll=-1},155);setTimeout(function(){save_cookie=!0},100)}function jsPathOfNode(e){var t="";nodes=$("#demo").jstree("get_path",$("#"+e),!0);for(i=0;i<nodes.length;i+=1){t+=$("#demo").jstree("get_text",$("#"+nodes[i]));i<nodes.length-1&&(t+=" → ");i==nodes.length-2&&(t+="<br><h2>")}return t}function jsShowText(e,t,n){n==1?mytext='<div class="divider" contenteditable="false" id="'+e+'">'+jsPathOfNode(e)+'</h2></div><div class="edit_text"><p>':mytext="";if(t==""){$("#bubu").html("&nbsp;");t="&nbsp;"}notetext=mytext+t+"</p></div>";return notetext}function jsLoadNote(e){savetext(1);var t="";$.ajaxSetup({async:!1});var n=0;$(".jstree-clicked").length>1&&(n=1);$(".jstree-clicked").each(function(){e=$(this).parent("li").attr("id");lsn=localStorage.getItem("note_"+e);console.info(lsn);lsn?t+=jsShowText(e,lsn,n):$("#bubu").load("do.php?notes="+e,function(){localStorage.setItem("note_"+e,$("#bubu").html());t+=jsShowText(e,$("#bubu").html(),n)})});$("#redactor_content").attr("notes",e);$("#redactor_content").setCode(t)}function jsMakeTabWidth(){w=parseInt($("#cont").width());count=parseInt($("#cont2 a").length);w2=parseInt($("#cont2 li").width());w_tab=parseInt(w/count-38);if(w_tab<30){if(w_tab<20){w_tab=parseInt(w/count-12);var e=parseInt(w_tab/4);$("#tabs a .ff").each(function(){$(this).html($(this).parents("a").attr("title").substr(0,e))});$("#tabs").css("font-size","7px");$("#tabs a").css("padding","4px 4px")}else{var e=parseInt(w_tab/3);$("#tabs a .ff").each(function(){$(this).html($(this).parents("a").attr("title").substr(0,e))});$("#tabs a").css("padding","4px 15px");$("#tabs").css("font-size","8px")}$("#cont2 img").hide()}else{w_tab=parseInt(w/count-47);var e=parseInt(w_tab/7);$("#tabs a .ff").each(function(){$(this).html($(this).parents("a").attr("title").substr(0,e))});$("#cont2 img").show();$("#tabs").css("font-size","10px");$("#tabs a").css("padding","4px 15px")}w_tab>90&&(w_tab=90);$("#cont2 a").css("width",w_tab);$("#cont2").show();return!0;var t}function jsRefreshTabs(){jsLeafRefresh();current_tab=$("#cont2 li[id=current] a").attr("myid");current_tab||(current_tab=jscookie("current_tab"));font=$("#tabs").css("font-size");width=$("#cont2 a").css("width");padding=$("#cont2 a").css("padding");console.info(font,width,padding);$("#cont2").load("do.php?mytabs="+current_tab,function(){$("#tabs").css("font-size",font);$("#cont2 a").css("width",width);$("#cont2 a").css("padding",padding);onResize();$("* #tabs").sortable({axis:"x"});$(".side_panel").sortable({axis:"y"});$("#side_folder .ff").draggable()})}function onResize(){clearTimeout(mt2);mt2=setTimeout(function(){jsMakeTabWidth();$("#top").css("bottom",$("#bottom").height());if($.cookie("swap_calendar")!=1)var e=$("#left_bottom2").height()-$(".redactor_toolbar").height()-32,t=$("#left_bottom2").height();else var e=$("#top").height()-$(".redactor_toolbar").height()-32,t=$("#top").height();if(!$(".redactor_box").hasClass("redactor_box_fullscreen")){$(".redactor_editor").height(e);$(".redactor_box").height(t)}tree_height=parseFloat($("#left_top").height());toolbar_height=parseFloat($(".tree_toolbar").height());$("#demo").height(tree_height-toolbar_height);$.cookie("swap_calendar")!=1?calheight=parseFloat($("#top").height()):calheight=parseFloat($("#left_bottom2").height());newheight=calheight-35;$("#calendar").fullCalendar("option","contentHeight",newheight);$("#calendar").fullCalendar("rerenderEvents");jsSetTimeNow()},50)}function jsRefreshDate(e){jsLeafCount();e?e="[id=node_"+e+"]":e="";$("#demo li"+e).each(function(){$(this).children(".r").remove();$(this).children(".bell,.bell-no").remove();id=$(this).attr("id");date_tmp=$(this).attr("date1");if(date_tmp){date1=jsMakeDate(date_tmp,$(this).attr("remind"));$(date1).prependTo($(this))}})}function jsSetTimeNow(){cur_view=calend.fullCalendar("getView").name;(cur_view=="agendaWeek"||cur_view=="agendaDay")&&$("* #time_now_to").each(function(){$(this).children(".fc-mynow").html()==null&&$('<div class="fc-mynow"></div>').prependTo(this);if(cur_view=="agendaWeek"){if($(".fc-today").height())myl=$(".fc-today").offset().left;else{myl=0;$(".fc-mynow").remove()}$.cookie("swap_calendar")==1?swap=1:swap=$("#left_top").width()+1;myleft=myl-$(".fc-agenda-axis").width()-3-swap-23+7;$("#top").hasClass("fullscreen")&&(myleft=myl-2);$("#left_bottom2").hasClass("fullscreen")&&(myleft=myl-swap-3);mywidth=$(".fc-today").width()}if(cur_view=="agendaDay"){myleft=$(".fc-agenda-axis").width()+7;mywidth="100%"}$(this).children(".fc-mynow").css("top",0).css("width",mywidth).css("left",myleft);currentTime=new Date;tim=currentTime.getHours()+currentTime.getMinutes()/60;timenow=$(this).height()/24*tim;$(this).children(".fc-mynow").css({top:timenow})})}function showLeaf(e){$("#leaf_div #leaf_output").load("do.php?leaf="+e,function(){$(".do_line").draggable({zIndex:999,revert:!1,helper:"clone",revertDuration:500});$("#leaf_output .rrr").each(function(){$(this).html(jsMakeDate2($(this).html(),"0000-00-00 00:00:00"))})})}function showSettings(e){$("#settings_div #leaf_output").load("do.php?settings="+e,function(){})}function jsDoFirst(){function e(){if(!$("#top").hasClass("fullscreen")&&!$("#left").hasClass("fullscreen")&&!$("#left_bottom2").hasClass("fullscreen")){$("#left_panel").stop().animate({left:"0"},500);$("#right_panel").stop().animate({right:"0"},500)}}function t(){if($("#side_folder").css("display")=="none"){$("#left_panel").stop().animate({left:"-74"},700);$("#right_panel").stop().animate({right:"-74"},700)}}function n(){}function r(e){return 0<=e&&e<10?"0"+e.toString():-10<e&&e<0?"-0"+(-1*e).toString():e.toString()}function s(e){return{minDatetime:e.id=="do_date2"?$("#date1").datetimeEntry("getDatetime"):null,maxDatetime:e.id=="do_date1"?$("#do_date2").datetimeEntry("getDatetime"):null}}setTimeout(function(){onResize();console.info("REFRESH")},5e3);$("*").delegate("*[hint]","mouseover",function(){hint=$(this).attr("hint");hint&&jsTitle(hint,6e4);return!1});$("*").delegate("*[hint]","mouseout",function(){jsTitle("",0);return!1});jsTitle("Добро пожаловать");$("#main_icons i[toshow='cont']").css("opacity","1");$("*").delegate(".do_line","click",function(e){var t=$(this).attr("event");path=$(this).attr("path");i_am_scroll=0;my_id=$("* #tabs li[id=current] a").attr("myid");my_id!=1?ul=".second_ul":ul=".main_ul";if(!$(ul+" #node_"+t).length){my_id!=1&&$("#tabs a[myid=1]").click();path=path.split(",");$.ajaxSetup({async:!1});for(i=0;i<path.length;i+=1){toopen=path[i];$("#demo").jstree("open_node",$("#node_"+toopen),!1)}$.ajaxSetup({async:!0})}setTimeout(function(){$("#demo").jstree("deselect_all");$("#demo").jstree("select_node",$("#"+t))},1e3);return!1});$("*").delegate("#leaf_left_col li","click",function(e){leaf_id=$(this).attr("leaf");panel=$(this).parent("div").parent("div").attr("id");console.info(leaf_id,panel);panel=="leaf_div"&&showLeaf(leaf_id);panel=="settings_div"&&showSettings(leaf_id);$("#"+panel+" #leaf_left_col li").removeClass("current");$(this).addClass("current");return!1});$("*").delegate("#leaf_close","click",function(e){$("#top").css({bottom:"0"});$("#bottom").css({height:"0"});onResize();return!1});$("*").delegate("#main_icons i, .leaves_count i","click",function(e){$("#main_icons i").css("opacity","0.4");$(this).css("opacity","1");toshow=$(this).attr("toshow");console.info(toshow);if(toshow=="leaf_div"){if($(this).attr("leaf").length){leaf=$(this).attr("leaf");$("#leaf_div #leaf_left_col li").removeClass("current");$("#leaf_div #leaf_left_col li[leaf="+leaf+"]").addClass("current");newh=$.cookie("rightheight");if(newh!=""){newh=parseFloat(newh);newh<3&&(newh=300)}$("#top").show().css({bottom:newh,"border-bottom":"1px solid lightgray"});$("#bottom").show().css({height:newh})}else leaf=$("#leaf_div #leaf_left_col li[class=current]").attr("leaf");showLeaf(leaf)}toshow=="settings_div"&&showSettings($("#settings_div #leaf_left_col li[class=current]").attr("leaf"));toshow!="leaf_div"&&$(".main_div").fadeOut(400);$("#"+toshow).fadeIn(400);return!1});$("*").delegate("#to_home","click",function(e){document.location="./4tree.php";return!1});$("*").delegate("#print_tree","click",function(e){PrintIt($("#demo").html());return!1});$("*").delegate("#print_redactor","click",function(e){PrintIt(myr.getCode());return!1});$("*").delegate("#print_calendar","click",function(e){$("#slot_scroll").height(1200);$("#fc-view").height(1200);PrintIt(calend.parent("div").html());return!1});$("*").delegate("#full_screen_right","click",function(e){if(!$("#top").hasClass("fullscreen")){$(".icon-resize-full-1").attr("class","icon-resize-small");$("#top").addClass("fullscreen");onResize()}else{$(".icon-resize-small").attr("class","icon-resize-full-1");$("#top").removeClass("fullscreen");onResize()}return!1});$("*").delegate("#full_screen_left","click",function(e){if(!$("#left").hasClass("fullscreen")){$(".icon-resize-full-1").attr("class","icon-resize-small");$("#left").addClass("fullscreen");onResize()}else{$(".icon-resize-small").attr("class","icon-resize-full-1");$("#left").removeClass("fullscreen");onResize()}return!1});$("*").delegate("#full_screen_left2","click",function(e){if(!$("#left_bottom2").hasClass("fullscreen")){$(".icon-resize-full-1").attr("class","icon-resize-small");$("#left_bottom2").addClass("fullscreen");onResize()}else{$(".icon-resize-small").attr("class","icon-resize-full-1");$("#left_bottom2").removeClass("fullscreen");onResize()}return!1});$(".side_panel_hover").hoverIntent(e,n);$("*").delegate(".side_panel","click",function(e){if($("#side_folder").css("display")=="none"){$("#side_arrow").hide();$("#side_folder").fadeIn(300)}else{$("#side_arrow").hide();$("#side_folder").fadeOut(500)}return!1});$("*").delegate(".side_panel img","click",function(e){mytop=$(this).offset().top-11;oldmytop=$("#side_arrow").css("top");$("#side_arrow").css("top",mytop);if($("#side_folder").css("display")=="none"||mytop!=oldmytop){$("#side_arrow").show();$("#side_folder").fadeIn(300)}else{$("#side_arrow").hide();$("#side_folder").fadeOut(500)}return!1});$(".side_panel img").hoverIntent(function(){$("#side_folder").css("display")=="none"&&$(this).next(".name").fadeIn(100)},function(){$(this).next(".name").fadeOut(500)},1);$("*").delegate(".side_panel","mouseleave",function(e){t();return!1});$("*").delegate(".jstree-icon,label","hover",function(e){if($("#left_bottom").height()!=1){tip=$(this).parent("a").find(".tip:last");tip.length||(tip=$(this).find(".tip:last"));console.info(tip);tip.show()}return!1});$("*").delegate(".jstree-icon,label","mouseout",function(e){tip=$("* .tip");tip.hide();return!1});$("*").delegate(".jstree-icon,label","mousemove",function(e){if($("#left_bottom").height()!=1){tip=$(this).parent("a").find(".tip:last");tip.length||(tip=$(this).find(".tip:last"));var t=e.pageX+20,n=e.pageY+20,r=tip.width(),i=tip.height(),s=$(window).width()-(t+r),o=$(window).height()-(n+i);s<20&&(t=e.pageX-r-20);o<20&&(n=e.pageY-i-20);tip.css({top:n,left:t})}});if($.cookie("swap_calendar")==1){my_calendar=$("#calendar");my_redactor=$("#redactor_content");my_redactor.appendTo("#top");my_calendar.appendTo("#left_bottom2");$("#left_bottom_label").html("календарь")}$("*").undelegate("#demo","click").delegate("#demo","click",function(e){$("#demo").focus();return!1});$("*").undelegate("#swap_calendar","click").delegate("#swap_calendar","click",function(e){$.cookie("swap_calendar")==1?$.cookie("swap_calendar",0):$.cookie("swap_calendar",1);document.location.href="";return!1});$("*").undelegate(".bell-no","click").delegate(".bell-no","click",function(e){id=$(this).parent("li").attr("id").replace("node_","");var t=$(this);$("#bubu").load("do.php?set_reminder="+id,function(){t.removeClass("bell-no").addClass("bell")});return!1});$("*").undelegate(".bell","click").delegate(".bell","click",function(e){id=$(this).parent("li").attr("id").replace("node_","");var t=$(this);$("#bubu").load("do.php?delete_reminder="+id,function(){t.removeClass("bell").addClass("bell-no")});return!1});setInterval(function(){jsRefreshDate()},3e5);$("#search").hide();if($.cookie("hide_do")==1){$(".hide_checked").hide();show_checked="false"}else{$(".show_checked").hide();show_checked="true"}$(".search-ico").click(function(){$("#search").slideToggle("fast");$(".search-ico").toggleClass("active");$(".search-ico").hasClass("active")?$("#textfilter").focus():$("* #demo li a").removeClass("jstree-search")});$("*").undelegate(".hide_checked","click").delegate(".hide_checked","click",function(e){$.cookie("hide_do",1);$(".hide_checked").hide();$(".show_checked").show();show_checked="false";$("#demo .jstree-checked").fadeOut(300).remove();return!1});$("*").undelegate(".show_checked","click").delegate(".show_checked","click",function(e){$.cookie("hide_do",0);$(".show_checked").hide();$(".hide_checked").show();show_checked="true";$("#tabs a[myid=1]").click();setTimeout(function(){$("#demo").jstree("refresh",-1)},700);return!1});$("*").undelegate("#textfilter","keyup").delegate("#textfilter","keyup",function(e){clearTimeout(tttt);$("* #demo li a").removeClass("jstree-search");tttt=setTimeout(function(){$("#demo").jstree("search",$("#textfilter").val())},500);if(e.keyCode=="13"){clearTimeout(tttt);$("* #demo li a").removeClass("jstree-search");tttt=setTimeout(function(){$("#demo").jstree("search",$("#textfilter").val())},10)}if(e.keyCode=="27"){$("#textfilter").val("");$("#search").slideUp("fast");$(".search-ico").removeClass("active");clearTimeout(tttt)}return!1});$("*").delegate("#cont2 a","mouseout",function(e){$("* #cont2 a").css("color","");clearTimeout(hover_tm);return!1});$("*").delegate("#cont2 a","mouseover",function(e){var t=$(this).attr("myid");old_id=$("* #cont2 li[id=current] a").attr("myid");$("* #cont2 a").css("color","");clearTimeout(hover_tm);$(this).css("color","red");return!1});$("*").undelegate("#cont2 a","click").delegate("#cont2 a","click",function(e){e.preventDefault();old_name=$("#cont2 li[id=current] a").attr("title");old_cookie_name=$("#cont2 li[id=current] a").attr("myid");n_id=$(this).attr("myid");var t=$(this).attr("title");if(n_id!=old_cookie_name||!0){jscookie(old_cookie_name+"_scroll",$("#demo").scrollTop());new_cookie_name=n_id;jscookie("current_tab",n_id);$("#tabs li").attr("id","");$(this).parent().attr("id","current");jsFocus(n_id)}return!1});lnk="do.php?getcookie";$.getJSON(lnk,function(e){e&&(mycookie=e);jsRefreshTabs();showTree(1,"tab1")});$(".tree_toolbar a").click(function(e){e.preventDefault();switch($(this).attr("class")){case"collapse":$("#demo").jstree("close_all");old_name=$("#cont2 li[id=current] a").attr("title");$.cookie(old_name+"select","");$.cookie(old_name+"tab1open","");$.cookie(old_name+"tab1scroll","");break;case"expand":$("#demo").jstree("open_all");break;case"add_default":$("#demo").jstree("create");break;case"remove":confirm("Вы действительно хотите удалить дело?")&&$("#demo").jstree("remove");break;case"rename":$("#demo").jstree("rename");break;case"refresh":jsRefreshTabs();localStorage.clear();$("#calendar").fullCalendar("refetchEvents");$("#tabs a[myid=1]").click();setTimeout(function(){$("#demo").jstree("refresh",-1)},700)}});$(function(){$("#mmenu input").click(function(){switch(this.id){case"add_default":case"add_folder":$("#demo").jstree("create",null,"last",{attr:{rel:this.id.toString().replace("add_","")}});break;case"search":$("#demo").jstree("search",document.getElementById("text").value);break;case"text":break;case"Expand":$("#demo").jstree("open_all");break;case"Collapse":$("#demo").jstree("close_all");break;default:$("#demo").jstree(this.id)}})});$.datetimeEntry.setDefaults({spinnerImage:"./img/spinnerDefault.png"});Date.prototype.toMysqlFormat=function(){return this.getFullYear()+"-"+r(1+this.getMonth())+"-"+r(this.getDate())+" "+r(this.getHours())+":"+r(this.getMinutes())+":"+r(this.getSeconds())};$(".datetime").each(function(){x="#"+$(this).attr("id");$(x).datetimeEntry({beforeShow:s,datetimeFormat:"W N Y / H:M",altField:"#alt"+$(this).attr("id"),altFormat:"Y-O-D H:M:S"})});setInterval(function(){$("#left_bottom").height()!=1&&jsSetTimeNow()},3e4);currentTime=new Date;firstHour=currentTime.getHours()-2;calend=$("#calendar").fullCalendar({editable:"true",firstHour:firstHour,timeFormat:"H:mm",axisFormat:"H:mm",contentHeight:361,weekends:!0,defaultView:"agendaWeek",droppable:!0,drop:function(e,t,n,r){$.ajaxSetup({async:!1});console.info(n,r,"drop!!!");if(n.target.id){mynode=n.target.id;mydate=encodeURIComponent(e.toMysqlFormat());lnk="do.php?date_to_do="+$(this).attr("id")+"&date1="+mydate+"&allday="+t;$("#bubu").load(lnk,function(){new_date=$("#bubu").html();$("#"+mynode).attr("date1",new_date);jsRefreshDate(mynode.replace("node_",""));$("#calendar").fullCalendar("refetchEvents");jsLeafRefresh()})}else r.data.obj.each(function(){mynode=this.id;mydate=encodeURIComponent(e.toMysqlFormat());lnk="do.php?date_to_do="+$(this).attr("id")+"&date1="+mydate+"&allday="+t;$("#bubu").load(lnk,function(){new_date=$("#bubu").html();$("#"+mynode).attr("date1",new_date);jsRefreshDate(mynode.replace("node_",""));$("#calendar").fullCalendar("refetchEvents")})});$.ajaxSetup({async:!0})},header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay,basicWeek,basicDay"},firstDay:1,eventSources:[{editable:"true"},{url:"do.php?calendar",className:"my_event"}],eventMouseover:function(e){},eventMouseout:function(e){clearTimeout(hover_tm);$(".search-ico").hasClass("active")||$("* #demo li a").removeClass("jstree-search")},eventClick:function(e){i_am_scroll=0;my_id=$("#tabs li[id=current] a").attr("myid");my_id!=1?ul=".second_ul":ul=".main_ul";if(!$(ul+" #node_"+e.id).length){my_id!=1&&$("#tabs a[myid=1]").click();path=e.path;path=path.split(",");$.ajaxSetup({async:!1});for(i=0;i<path.length;i+=1){toopen=path[i];$("#demo").jstree("open_node",$("#node_"+toopen),!1)}$.ajaxSetup({async:!0})}$("#demo").jstree("deselect_all");$("#demo").jstree("select_node",$("#node_"+e.id))},eventDrop:function(e,t,n,r){r?lnk="do.php?movedo="+e.id+"&days="+t+"&minutes="+n+"&allday=1":lnk="do.php?movedo="+e.id+"&days="+t+"&minutes="+n+"&allday=0";$("#bubu").load(lnk,function(){var t=e.id;new_date=$("#bubu").html();$("#node_"+t).attr("date1",new_date);jsRefreshDate(t);$("* #demo").jstree("deselect_all");$("* #demo").jstree("select_node",$("#node_"+t))})},loading:function(e){if(e)$("#loading").show();else{$("#loading").hide();jsSetTimeNow();$("#time_now_to").scrollTop(400)}},selectable:!0,selectHelper:!0,select:function(e,t,n){if(t-e==9e5){calend.fullCalendar("unselect");return!0}var r=prompt("Название события:");if(r){manager=encodeURIComponent($("#selectmanager").html());if(n==0){st=e.toString();en=t.toString()}else{st=e.toDateString();en=t.toDateString()}lnk="do.php?createdo="+encodeURIComponent(r)+"&start="+encodeURIComponent(st)+"&end="+encodeURIComponent(en)+"&allday="+n+"&manager="+manager;console.log(lnk);$("#bubu").load(lnk,function(){$("#calendar").fullCalendar("refetchEvents");$("#tabs a[myid=1]").click();setTimeout(function(){$("#demo").jstree("refresh",-1)},700);jsRefreshTabs()})}calend.fullCalendar("unselect")}});myr=$("#redactor_content").redactor({imageUpload:"./redactor/demo/scripts/image_upload.php",lang:"ru",focus:!1,fileUpload:"./redactor/demo/scripts/file_upload.php",autoresize:!1});$("#tabsminitop").click(function(){if($("#tabsminibottom").css("display")=="none"){$("#tabsminibottom").show();onResize()}else{$("#tabsminibottom").hide();onResize()}});if($("#left_bottom").height()==1){newh=$.cookie("height");newh!=""&&(note_height=parseFloat(newh));if(note_height<3||!note_height)note_height=300;$("#left_top").animate({bottom:note_height},300);$("#left_bottom").animate({height:note_height},300);onResize()}else{$("#left_top").animate({bottom:"1"},100);$("#left_bottom").animate({height:"1"},100);onResize()}$("#left_bottom_label").click(function(){if($("#left_bottom").height()==1){newh=$.cookie("height");newh!=""&&(note_height=parseFloat(newh));if(note_height<3||!note_height)note_height=300;$("#left_top").animate({bottom:note_height},300);$("#left_bottom").animate({height:note_height},300,function(){onResize()})}else{$("#left_top").animate({bottom:"1"},100);$("#left_bottom").animate({height:"1"},100,function(){onResize()})}});$("#right_leaf_label").click(function(){if($("#bottom").height()==0){newh=$.cookie("rightheight");newh!=""&&(note_height=parseFloat(newh));if(note_height<3||!note_height)note_height=300;$("#top").css({bottom:note_height});$("#bottom").css({height:note_height})}else{$("#top").css({bottom:"0"});$("#bottom").css({height:"0"})}onResize()});neww=$.cookie("width");if(neww!=""){neww=parseFloat(neww);$("#right").css("width",neww);$("#page").css("width",neww);$("#left").css("margin-right",neww)}$("#resize").mousedown(function(e){e.preventDefault();$("#left").addClass("noselectable");$("#resize").width("100%");$("#resize").css("z-index",1e4);$("#resize").css("opacity","0.1");$(window).mousemove(function(e){w=$(document).width();neww=w-e.pageX-50;$("#right").css("width",neww);$("#page").css("width",neww);$("#left").css("margin-right",neww);onResize();$(window).resize()})});$(window).mouseup(function(){$(window).unbind("mousemove");$("#resize").width("1px").css("z-index",5).css("opacity","1");$.cookie("width",$("#right").width(),{expires:300});$("#left").removeClass("noselectable")});var o=$.cookie("height");if(o!=""){o=parseFloat(o);o<3&&(o=300);setTimeout(function(){$("#left_bottom").css("height",o);$("#left_top").css("bottom",o)},500)}$("#right_leaf_label").mousedown(function(e){e.preventDefault();$(window).mousemove(function(e){h=$(document).height();newh=h-e.pageY-40;$("#bottom").css("height",newh);$("#top").css("bottom",newh);onResize();$(window).resize()})});$(window).mouseup(function(){$(window).unbind("mousemove");$("#bottom").height()>2&&$.cookie("rightheight",$("#bottom").height(),{expires:300})});$("#left_bottom_label").mousedown(function(e){e.preventDefault();$(window).mousemove(function(e){h=$(document).height();newh=h-e.pageY-50;$("#left_bottom").css("height",newh);$("#left_top").css("bottom",newh);onResize();$(window).resize()})});$(window).mouseup(function(){$(window).unbind("mousemove");$("#left_bottom").height()>1&&$.cookie("height",$("#left_bottom").height(),{expires:300})})}function jsMakeDate(e,t){var n="",r="shortdate",n="",i;today=new Date;dd=Math.round((Date.createFromMysql(e).getTime()-today.getTime())/60/60/1e3*10)/10;if(e=="0000-00-00 00:00:00")return"";dd>0?r="shortdate":r="shortdatepast";i=dd;if(dd>24||dd<-24||e.search("00:00:00")!=-1){dd=Math.round(dd/24);n="long";dd>=0?mydays="+ "+dd+" дн":mydays=dd+" дн"}else dd>=0?mydays="+ "+dd+" ч":mydays=dd+" ч";if(e.search("00:00:00")!=-1&&e.search(today.yyyymmdd())!=-1){mydays="сегодня";r="shortdatepast";n=""}if(t=="0000-00-00 00:00:00"||!t){bell_class="bell-no";title="Нажмите, чтобы включить SMS уведомление за 3 минуты"}else{bell_class="bell";title="Вы получите SMS уведомление за 3 минуты"}return"<i class='icon-bell-1 "+bell_class+"'></i><span class='r "+r+n+"' title='"+e+"'>"+mydays+"</span>"}function jsMakeDate2(e,t){var n="",r="shortdate",n="",i;today=new Date;dd=Math.round((Date.createFromMysql(e).getTime()-today.getTime())/60/60/1e3*10)/10;if(e=="0000-00-00 00:00:00")return"";dd>0?r="shortdate":r="shortdatepast";i=dd;if(dd>24||dd<-24||e.search("00:00:00")!=-1){dd=Math.round(dd/24);n="long";dd>=0?mydays="+ "+dd+" дн":mydays=dd+" дн"}else dd>=0?mydays="+ "+dd+" ч":mydays=dd+" ч";if(e.search("00:00:00")!=-1&&e.search(today.yyyymmdd())!=-1){mydays="сегодня";r="shortdatepast";n=""}if(t=="0000-00-00 00:00:00"||!t){bell_class="bell-no";title="Нажмите, чтобы включить SMS уведомление за 3 минуты"}else{bell_class="bell";title="Вы получите SMS уведомление за 3 минуты"}return"<span class='rrr "+r+n+"' title='"+e+"'>"+mydays+"</span>"}function jsSetCheckBox(){i_am_busy=!0;$('#demo li[did!="0000-00-00 00:00:00"]').each(function(){$(this).attr("did")!=undefined&&$("#demo").jstree("check_node",$(this))});i_am_busy=!1}function showTree(e,t){$("#demo").jstree("destroy");setTimeout(function(){t.replace("tab","node_")!="node_1"&&$("#demo").children("ul").children("li[id!="+t.replace("tab","node_")+"]").remove()},1e3);mytree=$("#demo").bind("before.jstree",function(e,t){$("#alog").append(t.func+"<br />")}).jstree({plugins:["themes","json_data","ui","crrm","cookies","dnd","search","types","hotkeys","checkbox","contextmenu"],themes:{theme:"classic"},cookies:{save_opened:t+"open",save_selected:t+"select",auto_save:!0},json_data:{ajax:{url:"./server.php",data:function(t){return{operation:"get_children",show_checked:show_checked,id:t.attr?t.attr("id").replace("node_",""):e}}}},search:{ajax:{url:"./server.php",data:function(e){return{operation:"search",search_str:e}}}},types:{max_depth:-2,max_children:-2,valid_children:["drive"],types:{"default":{valid_children:["default","folder"],icon:{image:"jstree/_demo/file.png"}},folder:{valid_children:["default","folder"],icon:{image:"./jstree/_demo/folder.png"}},drive:{valid_children:["default","folder"],icon:{image:"./jstree/_demo/root.png"},start_drag:!1,move_node:!1,delete_node:!1,remove:!1}}},core:{initially_open:!1,animation:150,load_open:!0,open_parents:!1},checkbox:{two_state:!0}}).bind("create.jstree",function(e,t){$.post("./server.php",{operation:"create_node",id:t.rslt.parent.attr("id").replace("node_",""),position:t.rslt.position,title:t.rslt.name,type:t.rslt.obj.attr("rel")},function(e){jsRefreshTabs();e.status?$(t.rslt.obj).attr("id","node_"+e.id):$.jstree.rollback(t.rlbk)})}).bind("remove.jstree",function(e,t){t.rslt.obj.each(function(){$.ajax({async:!1,type:"POST",url:"./server.php",data:{operation:"remove_node",id:this.id.replace("node_","")},success:function(e){jsRefreshTabs();$("* #calendar").fullCalendar("refetchEvents");e.status||t.inst.refresh()}})})}).bind("rename.jstree",function(e,t){$.post("./server.php",{operation:"rename_node",id:t.rslt.obj.attr("id").replace("node_",""),title:t.rslt.new_name},function(e){jsRefreshTabs();$("* #calendar").fullCalendar("refetchEvents");e.status||$.jstree.rollback(t.rlbk)})}).bind("check_node.jstree",function(e,t){if(i_am_busy)return;id=t.rslt.obj.attr("id");lnk="do.php?check_it="+id;$.getJSON(lnk,function(e){jsTitle("Дело выполнено");$("* #calendar").fullCalendar("refetchEvents");jsRefreshTabs()})}).bind("uncheck_node.jstree",function(e,t){id=t.rslt.obj.attr("id");lnk="do.php?uncheck_it="+id;$.getJSON(lnk,function(e){jsTitle("Выполнение снято");$("* #calendar").fullCalendar("refetchEvents");jsRefreshTabs()})}).bind("select_node.jstree",function(e,t){$("#demo").focus();clearTimeout(sel_tm);sel_tm=setTimeout(function(){id=t.rslt.obj.attr("id");current_tab=$("#cont2 li[id=current] a").attr("myid");jscookie(current_tab+"_scroll",$("#demo").scrollTop());gotodate=t.rslt.obj.attr("date1");$.ajaxSetup({async:!1});var e=0;if(gotodate!="0000-00-00 00:00:00"&&gotodate){gotodate=sqlDate(gotodate);d=gotodate.getDate();m=gotodate.getMonth();y=gotodate.getFullYear();h=gotodate.getHours();e=parseInt(95/24*h)-6;$("#calendar").fullCalendar("gotoDate",y,m,d)}$("* .fc-event-vert,.fc-event-hori").removeClass("event-selected");$(".fc-event-title[event="+id+"]").parents(".fc-event-vert,.fc-event-hori").addClass("event-selected");jsLoadNote(id);e!=0&&i_am_scroll==1?$("* #slot_scroll").each(function(){e=$(this).find(".fc-slot"+e);if(e.offset()){sc2=e.offset().top;sc3=$(this).offset().top;sc4=$(this).scrollTop();var t=sc4-(sc3-sc2);$(this).stop().animate({scrollTop:t},800)}}):i_am_scroll=1;$.ajaxSetup({async:!0})},300)}).bind("after_open.jstree",function(e,n){clearTimeout(timeout);timeout=setTimeout(function(){$("#demo .r,.gray").remove();jsRefreshDate();jsSetCheckBox();$.cookie("hide_do")==1&&$("#demo .jstree-checked").remove();t.replace("tab","node_")!="node_1"&&$("#demo").children("ul").children("li[id!="+t.replace("tab","node_")+"]").remove()},50)}).bind("loaded.jstree",function(e,t){setTimeout(function(){$("#tabs a[myid="+jscookie("current_tab")+"]").click()},500)}).bind("move_node.jstree",function(e,t){t.rslt.o.each(function(e){$.ajax({async:!1,type:"POST",url:"./server.php",data:{operation:"move_node",id:$(this).attr("id").replace("node_",""),ref:t.rslt.cr===-1?1:t.rslt.np.attr("id").replace("node_",""),position:t.rslt.cp+e,title:t.rslt.name,copy:t.rslt.cy?1:0},success:function(e){if(!e.status)$.jstree.rollback(t.rlbk);else{$(t.rslt.oc).attr("id","node_"+e.id);t.rslt.cy&&$(t.rslt.oc).children("UL").length&&t.inst.refresh(t.inst._get_parent(t.rslt.oc))}$("#analyze").click()}})})})}function sqlDate(e){if(!e)return null;var t=e.split(/[- :]/),n=new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5]);e=="0000-00-00 00:00:00"&&(n=null);return n}function savetext(e){if(note_saved==1)return!1;clearTimeout(my_autosave);if($(".divider").attr("id")){$(".divider").each(function(){t=$(this).next(".edit_text").html();text=t;var n=$(this).attr("id");jsSendText(n,text,e)});return!1}var t=myr.getCode();text=t;var n=$("#redactor_content").attr("notes");jsSendText(n,text,e)}function jsSendText(e,t,n){$("#"+e).find(".tip").attr("class")?$("#"+e).find(".tip").html(t.substr(0,1e3)):$('<div class="tip">'+t.substr(0,1e3)+"</div>").appendTo($("#"+e).children("a"));note_saved==0&&localStorage.setItem("note_"+e,t);t=encodeURIComponent
(t);dataString="savenote="+e+"&text="+t+"&date1="+$("#altdo_date1").val()+"&date2="+$("#altdo_date2").val();var r=$.ajax({type:"POST",url:"do.php",data:dataString,success:function(t){note_saved=!0;if(t=="del"){mynode=$("* #demo li[id="+$("#redactor_content").attr("notes")+"] > a");mynode.parent("li").hasClass("jstree-leaf")&&mynode.children(".jstree-icon").css("background","")}else if(t!=""){mynode=$("* #demo li[id="+$("#redactor_content").attr("notes")+"] > a");mynode.parent("li").hasClass("jstree-leaf")&&mynode.children(".jstree-icon").css("background","url("+t+") 50% 50% no-repeat")}if(n!=1){$("#tabs a[myid=1]").click();setTimeout(function(){$("#demo").jstree("refresh",-1)},700);$("#calendar").fullCalendar("refetchEvents")}onResize();e&&jsTitle("текст заметки №"+e.replace("node_","")+" сохранён")}})}function jsTitle(e,t){var n=t;t==undefined&&(n=2e3);setTimeout(function(){$(".title").html()!="<b>"+e+"</b>"&&$(".title").css("opacity","0").html("<b>"+e+"</b>").animate({opacity:"0.7"},1e3,function(){n<3e4&&setTimeout(function(){$(".title").animate({opacity:"0"},300,function(){$(".title").html("")})},n)})},200)}var tip,hoverout,trtr,myr=null,mynode,hover_tm,i_am_scroll=1,timeout,mt,mt2,timenow=0,mytree,tttt,sel_tm,leaf_count,calend,bg,i_am_busy=!0,note_saved=!0,show_checked=!1,savecookies,myscroll=-1,mycookie=new Number,save_cookie=!0;mycookie.current_tab=1;var diarywindow;jQuery.fn.swapWith=function(e){return this.each(function(){var t=$(e).clone(!0),n=$(this).clone(!0);$(e).replaceWith(n);$(this).replaceWith(t)})};Date.createFromMysql=function(e){if(typeof e=="string"){var t=e.split(/[- :]/);return new Date(t[0],t[1]-1,t[2],t[3]||0,t[4]||0,t[5]||0)}return null};Date.prototype.yyyymmdd=function(){var e=this.getFullYear().toString(),t=(this.getMonth()+1).toString(),n=this.getDate().toString();return e+"-"+(t[1]?t:"0"+t[0])+"-"+(n[1]?n:"0"+n[0])};(function(e){e.fn.hoverIntent=function(t,n){var r={sensitivity:7,interval:1300,timeout:0};r=e.extend(r,n?{over:t,out:n}:t);var i,s,o,u,a=function(e){i=e.pageX;s=e.pageY},f=function(t,n){n.hoverIntent_t=clearTimeout(n.hoverIntent_t);if(Math.abs(o-i)+Math.abs(u-s)<r.sensitivity){e(n).unbind("mousemove",a);n.hoverIntent_s=1;return r.over.apply(n,[t])}o=i;u=s;n.hoverIntent_t=setTimeout(function(){f(t,n)},r.interval)},l=function(e,t){t.hoverIntent_t=clearTimeout(t.hoverIntent_t);t.hoverIntent_s=0;return r.out.apply(t,[e])},c=function(t){var n=jQuery.extend({},t),i=this;i.hoverIntent_t&&(i.hoverIntent_t=clearTimeout(i.hoverIntent_t));if(t.type=="mouseenter"){o=n.pageX;u=n.pageY;e(i).bind("mousemove",a);i.hoverIntent_s!=1&&(i.hoverIntent_t=setTimeout(function(){f(n,i)},r.interval))}else{e(i).unbind("mousemove",a);i.hoverIntent_s==1&&(i.hoverIntent_t=setTimeout(function(){l(n,i)},r.timeout))}};return this.bind("mouseenter",c).bind("mouseleave",c)}})(jQuery);(function(e){function t(){this._disabledInputs=[];this.regional=[];this.regional[""]={datetimeFormat:"O/D/Y H:Ma",datetimeSeparators:".",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ampmNames:["AM","PM"],spinnerTexts:["Today","Previous field","Next field","Increment","Decrement"],isRTL:!1};this._defaults={appendText:"",initialField:0,useMouseWheel:!0,shortYearCutoff:"+10",defaultDatetime:null,minDatetime:null,maxDatetime:null,minTime:null,maxTime:null,timeSteps:[1,1,1],spinnerImage:"spinnerDefault.png",spinnerSize:[20,20,8],spinnerBigImage:"",spinnerBigSize:[40,40,16],spinnerIncDecOnly:!1,spinnerRepeat:[500,250],beforeShow:null,altField:null,altFormat:null};e.extend(this._defaults,this.regional[""])}function r(t,n){e.extend(t,n);for(var r in n)n[r]==null&&(t[r]=null);return t}var n="datetimeEntry";e.extend(t.prototype,{markerClassName:"hasDatetimeEntry",setDefaults:function(e){r(this._defaults,e||{});return this},_connectDatetimeEntry:function(t,r){var i=e(t);if(i.hasClass(this.markerClassName))return;var s={};s.options=e.extend({},r);s._selectedYear=0;s._selectedMonth=0;s._selectedDay=0;s._selectedHour=0;s._selectedMinute=0;s._selectedSecond=0;s._field=0;this._decodeDatetimeFormat(s);s.input=e(t);e.data(t,n,s);var o=this._get(s,"spinnerImage"),u=this._get(s,"spinnerText"),a=this._get(s,"spinnerSize"),f=this._get(s,"appendText"),l=o?e('<span class="datetimeEntry_control" style="display: inline-block; background: url(\''+o+"') 0 0 no-repeat; width: "+a[0]+"px; height: "+a[1]+"px;"+(e.browser.mozilla&&e.browser.version<"1.9"?" padding-left: "+a[0]+"px; padding-bottom: "+(a[1]-18)+"px;":"")+'"></span>'):null;i.wrap('<span class="datetimeEntry_wrap"></span>').after(f?'<span class="datetimeEntry_append">'+f+"</span>":"").after(l||"");i.addClass(this.markerClassName).bind("focus.datetimeEntry",this._doFocus).bind("blur.datetimeEntry",this._doBlur).bind("click.datetimeEntry",this._doClick).bind("keydown.datetimeEntry",this._doKeyDown).bind("keypress.datetimeEntry",this._doKeyPress);e.browser.mozilla&&i.bind("input.datetimeEntry",function(t){e.datetimeEntry._extractDatetime(s)});e.browser.msie&&i.bind("paste.datetimeEntry",function(t){setTimeout(function(){e.datetimeEntry._extractDatetime(s)},1)});this._get(s,"useMouseWheel")&&e.fn.mousewheel&&i.mousewheel(this._doMouseWheel);l&&l.mousedown(this._handleSpinner).mouseup(this._endSpinner).mouseover(this._expandSpinner).mouseout(this._endSpinner).mousemove(this._describeSpinner)},_enableDatetimeEntry:function(e){this._enableDisable(e,!1)},_disableDatetimeEntry:function(e){this._enableDisable(e,!0)},_enableDisable:function(t,r){var i=e.data(t,n);if(!i)return;t.disabled=r;t.nextSibling&&t.nextSibling.nodeName.toLowerCase()=="span"&&e.datetimeEntry._changeSpinner(i,t.nextSibling,r?5:-1);e.datetimeEntry._disabledInputs=e.map(e.datetimeEntry._disabledInputs,function(e){return e==t?null:e});r&&e.datetimeEntry._disabledInputs.push(t)},_isDisabledDatetimeEntry:function(t){return e.inArray(t,this._disabledInputs)>-1},_changeDatetimeEntry:function(t,i,s){var o=e.data(t,n);if(o){if(typeof i=="string"){var u=i;i={};i[u]=s}var f=this._parseDatetime(o,e(t).val());r(o.options,i||{});this._decodeDatetimeFormat(o);f&&this._setDatetime(o,f)}e.data(t,n,o)},_decodeDatetimeFormat:function(e){var t=this._get(e,"datetimeFormat");e._fields=[];e._ampmField=-1;for(var n=0;n<t.length;n++){t.charAt(n).match(/[yYoOnNdDwWhHmMsSa]/)&&e._fields.push(n);t.charAt(n)=="a"&&(e._ampmField=e._fields.length-1)}},_destroyDatetimeEntry:function(t){$input=e(t);if(!$input.hasClass(this.markerClassName))return;$input.removeClass(this.markerClassName).unbind(".datetimeEntry");e.fn.mousewheel&&$input.unmousewheel();this._disabledInputs=e.map(this._disabledInputs,function(e){return e==t?null:e});$input.parent().replaceWith($input);e.removeData(t,n)},_setDatetimeDatetimeEntry:function(t,r){var i=e.data(t,n);i&&(r===null||r===""?i.input.val(""):this._setDatetime(i,r?typeof r=="object"?new Date(r.getTime()):r:null))},_getDatetimeDatetimeEntry:function(t){var r=e.data(t,n);return r?this._parseDatetime(r,e(t).val()):null},_getOffsetDatetimeEntry:function(t){var r=e.data(t,n),i=r?e.datetimeEntry._parseDatetime(r,r.input.val()):null;return i?(i.getHours()*3600+i.getMinutes()*60+i.getSeconds())*1e3:0},_doFocus:function(t){var i=t.nodeName&&t.nodeName.toLowerCase()=="input"?t:this;if(e.datetimeEntry._lastInput==i||e.datetimeEntry._isDisabledDatetimeEntry(i)){e.datetimeEntry._focussed=!1;return}var s=e.data(i,n);e.datetimeEntry._focussed=!0;e.datetimeEntry._lastInput=i;e.datetimeEntry._blurredInput=null;var o=e.datetimeEntry._get(s,"beforeShow");r(s.options,o?o.apply(i,[i]):{});e.data(i,n,s);e.datetimeEntry._extractDatetime(s);setTimeout(function(){e.datetimeEntry._showField(s)},10)},_doBlur:function(t){e.datetimeEntry._blurredInput=e.datetimeEntry._lastInput;e.datetimeEntry._lastInput=null},_doClick:function(t){var r=t.target,i=e.data(r,n);if(!e.datetimeEntry._focussed){var s=e.datetimeEntry._get(i,"datetimeFormat");i._field=0;if(r.selectionStart!=null){var o=0;for(var u=0;u<s.length;u++){o+=e.datetimeEntry._fieldLength(i,s.charAt(u));if(r.selectionStart<o)break;i._field+=s.charAt(u).match(/[yondwhmsa]/i)?1:0}}else if(r.createTextRange){var a=e(t.srcElement),f=r.createTextRange(),l=function(e){return{thin:2,medium:4,thick:6}[e]||e},h=t.clientX+document.documentElement.scrollLeft-(a.offset().left+parseInt(l(a.css("border-left-width")),10))-f.offsetLeft,o=0;for(var u=0;u<s.length;u++){o+=e.datetimeEntry._fieldLength(i,s.charAt(u));f.collapse();f.moveEnd("character",o);if(h<f.boundingWidth)break;i._field+=s.charAt(u).match(/[yondwhmsa]/i)?1:0}}}e.data(r,n,i);e.datetimeEntry._showField(i);e.datetimeEntry._focussed=!1},_doKeyDown:function(t){if(t.keyCode>=48)return!0;var r=e.data(t.target,n);switch(t.keyCode){case 9:return t.shiftKey?e.datetimeEntry._changeField(r,-1,!0):e.datetimeEntry._changeField(r,1,!0);case 35:if(t.ctrlKey)e.datetimeEntry._setValue(r,"");else{r._field=r._fields.length-1;e.datetimeEntry._adjustField(r,0)}break;case 36:if(t.ctrlKey)e.datetimeEntry._setDatetime(r);else{r._field=0;e.datetimeEntry._adjustField(r,0)}break;case 37:e.datetimeEntry._changeField(r,-1,!1);break;case 38:e.datetimeEntry._adjustField(r,1);break;case 39:e.datetimeEntry._changeField(r,1,!1);break;case 40:e.datetimeEntry._adjustField(r,-1);break;case 46:e.datetimeEntry._setValue(r,"")}return!1},_doKeyPress:function(t){var r=String.fromCharCode(t.charCode==undefined?t.keyCode:t.charCode);if(r<" ")return!0;var i=e.data(t.target,n);e.datetimeEntry._handleKeyPress(i,r);return!1},_doMouseWheel:function(t,r){if(e.datetimeEntry._isDisabledDatetimeEntry(t.target))return;r=e.browser.opera?-r/Math.abs(r):e.browser.safari?r/Math.abs(r):r;var i=e.data(t.target,n);i.input.focus();i.input.val()||e.datetimeEntry._extractDatetime(i);e.datetimeEntry._adjustField(i,r);t.preventDefault()},_expandSpinner:function(t){var r=e.datetimeEntry._getSpinnerTarget(t),i=e.data(e.datetimeEntry._getInput(r),n);if(e.datetimeEntry._isDisabledDatetimeEntry(i.input[0]))return;var s=e.datetimeEntry._get(i,"spinnerBigImage");if(s){i._expanded=!0;var o=e(r).offset(),u=null;e(r).parents().each(function(){var t=e(this);if(t.css("position")=="relative"||t.css("position")=="absolute")u=t.offset();return!u});var a=e.datetimeEntry._get(i,"spinnerSize"),f=e.datetimeEntry._get(i,"spinnerBigSize");e('<div class="datetimeEntry_expand" style="position: absolute; left: '+(o.left-(f[0]-a[0])/2-(u?u.left:0))+"px; top: "+(o.top-(f[1]-a[1])/2-(u?u.top:0))+"px; width: "+f[0]+"px; height: "+f[1]+"px; background: #fff url("+s+') no-repeat 0px 0px; z-index: 10;"></div>').mousedown(e.datetimeEntry._handleSpinner).mouseup(e.datetimeEntry._endSpinner).mouseout(e.datetimeEntry._endExpand).mousemove(e.datetimeEntry._describeSpinner).insertAfter(r)}},_getInput:function(t){return e(t).siblings("."+e.datetimeEntry.markerClassName)[0]},_describeSpinner:function(t){var r=e.datetimeEntry._getSpinnerTarget(t),i=e.data(e.datetimeEntry._getInput(r),n);r.title=e.datetimeEntry._get(i,"spinnerTexts")[e.datetimeEntry._getSpinnerRegion(i,t)]},_handleSpinner:function(t){var r=e.datetimeEntry._getSpinnerTarget(t),i=e.datetimeEntry._getInput(r);if(e.datetimeEntry._isDisabledDatetimeEntry(i))return;if(i==e.datetimeEntry._blurredInput){e.datetimeEntry._lastInput=i;e.datetimeEntry._blurredInput=null}var s=e.data(i,n);e.datetimeEntry._doFocus(i);var o=e.datetimeEntry._getSpinnerRegion(s,t);e.datetimeEntry._changeSpinner(s,r,o);e.datetimeEntry._actionSpinner(s,o);e.datetimeEntry._timer=null;e.datetimeEntry._handlingSpinner=!0;var u=e.datetimeEntry._get(s,"spinnerRepeat");if(o>=3&&u[0]){e.datetimeEntry._timer=setTimeout(function(){e.datetimeEntry._repeatSpinner(s,o)},u[0]);e(r).one("mouseout",e.datetimeEntry._releaseSpinner).one("mouseup",e.datetimeEntry._releaseSpinner)}},_actionSpinner:function(t,n){t.input.val()||e.datetimeEntry._extractDatetime(t);switch(n){case 0:this._setDatetime(t);break;case 1:this._changeField(t,-1,!1);break;case 2:this._changeField(t,1,!1);break;case 3:this._adjustField(t,1);break;case 4:this._adjustField(t,-1)}},_repeatSpinner:function(t,n){if(!e.datetimeEntry._timer)return;e.datetimeEntry._lastInput=e.datetimeEntry._blurredInput;this._actionSpinner(t,n);this._timer=setTimeout(function(){e.datetimeEntry._repeatSpinner(t,n)},this._get(t,"spinnerRepeat")[1])},_releaseSpinner:function(t){clearTimeout(e.datetimeEntry._timer);e.datetimeEntry._timer=null},_endExpand:function(t){e.datetimeEntry._timer=null;var r=e.datetimeEntry._getSpinnerTarget(t),i=e.datetimeEntry._getInput(r),s=e.data(i,n);e(r).remove();s._expanded=!1},_endSpinner:function(t){e.datetimeEntry._timer=null;var r=e.datetimeEntry._getSpinnerTarget(t),i=e.datetimeEntry._getInput(r),s=e.data(i,n);e.datetimeEntry._isDisabledDatetimeEntry(i)||e.datetimeEntry._changeSpinner(s,r,-1);e.datetimeEntry._handlingSpinner&&(e.datetimeEntry._lastInput=e.datetimeEntry._blurredInput);e.datetimeEntry._lastInput&&e.datetimeEntry._handlingSpinner&&e.datetimeEntry._showField(s);e.datetimeEntry._handlingSpinner=!1},_getSpinnerTarget:function(e){return e.target||e.srcElement},_getSpinnerRegion:function(t,n){var r=this._getSpinnerTarget(n),i=e.browser.opera||e.browser.safari?e.datetimeEntry._findPos(r):e(r).offset(),s=e.browser.safari?e.datetimeEntry._findScroll(r):[document.documentElement.scrollLeft||document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop],o=this._get(t,"spinnerIncDecOnly"),u=o?99:n.clientX+s[0]-i.left-(e.browser.msie?2:0),a=n.clientY+s[1]-i.top-(e.browser.msie?2:0),f=this._get(t,t._expanded?"spinnerBigSize":"spinnerSize"),l=o?99:f[0]-1-u,h=f[1]-1-a;if(f[2]>0&&Math.abs(u-l)<=f[2]&&Math.abs(a-h)<=f[2])return 0;var p=Math.min(u,a,l,h);return p==u?1:p==l?2:p==a?3:4},_changeSpinner:function(t,n,r){e(n).css("background-position","-"+(r+1)*this._get(t,t._expanded?"spinnerBigSize":"spinnerSize")[0]+"px 0px")},_findPos:function(e){var t=curTop=0;if(e.offsetParent){t=e.offsetLeft;curTop=e.offsetTop;while(e=e.offsetParent){var n=t;t+=e.offsetLeft;t<0&&(t=n);curTop+=e.offsetTop}}return{left:t,top:curTop}},_findScroll:function(t){var n=!1;e(t).parents().each(function(){n|=e(this).css("position")=="fixed"});if(n)return[0,0];var r=t.scrollLeft,i=t.scrollTop;while(t=t.parentNode){r+=t.scrollLeft||0;i+=t.scrollTop||0}return[r,i]},_get:function(t,n){return t.options[n]!=null?t.options[n]:e.datetimeEntry._defaults[n]},_extractDatetime:function(t){var n=this._parseDatetime(t,e(t.input).val())||this._normaliseDatetime(this._determineDatetime(t,this._get(t,"defaultDatetime"))||new Date),r=this._constrainTime(t,[n.getHours(),n.getMinutes(),n.getSeconds()]);t._selectedYear=n.getFullYear();t._selectedMonth=n.getMonth();t._selectedDay=n.getDate();t._selectedHour=r[0];t._selectedMinute=r[1];t._selectedSecond=r[2];t._lastChr="";t._field=Math.max(0,this._get(t,"initialField"));t.input.val()!=""&&this._showDatetime(t)},_parseDatetime:function(e,t){if(!t)return null;var n=0,r=0,i=0,s=0,o=0,u=0,a=0,f=this._get(e,"datetimeFormat"),l=function(){while(a<t.length&&t.charAt(a).match(/^[0-9]/))a++},c;for(c=0;c<f.length&&a<t.length;c++){var h=f.charAt(c),p=parseInt(t.substring(a),10);if(h.match(/y|o|d|h|m|s/i)&&isNaN(p))throw"Invalid date";p=isNaN(p)?0:p;switch(h){case"y":case"Y":n=p;l();break;case"o":case"O":r=p;l();break;case"n":case"N":var d=this._get(e,h=="N"?"monthNames":"monthNamesShort");for(var v=0;v<d.length;v++)if(t.substring(a).substr(0,d[v].length).toLowerCase()==d[v].toLowerCase()){r=v+1;a+=d[v].length;break}break;case"w":case"W":var m=this._get(e,h=="W"?"dayNames":"dayNamesShort");for(var v=0;v<m.length;v++)if(t.substring(a).substr(0,m[v].length).toLowerCase()==m[v].toLowerCase()){a+=m[v].length+1;break}p=parseInt(t.substring(a),10);p=isNaN(p)?0:p;case"d":case"D":i=p;l();break;case"h":case"H":s=p;l();break;case"m":case"M":o=p;l();break;case"s":case"S":u=p;l();break;case"a":var g=this._get(e,"ampmNames"),y=t.substr(a,g[1].length).toLowerCase()==g[1].toLowerCase();s=(s==12?0:s)+(y?12:0);a+=g[0].length;break;default:a++}}if(c<f.length)throw"Invalid date";n+=n>=100||f.indexOf("y")==-1?0:n>this._shortYearCutoff(e)?1900:2e3;var b=this._constrainTime(e,[s,o,u]),w=new Date(n,Math.max(0,r-1),i,b[0],b[1],b[2]);if(!f.match(/y|o|n|d|w/i)||w.getFullYear()==n&&w.getMonth()+1==r&&w.getDate()==i)return w;throw"Invalid date"},_showDatetime:function(e){this._setValue(e,this._formatDatetime(e,this._get(e,"datetimeFormat")));this._showField(e)},_formatDatetime:function(e,t){var n="",r=t.indexOf("a")>-1;for(var i=0;i<t.length;i++){var s=t.charAt(i);switch(s){case"y":n+=this._formatNumber(e._selectedYear%100);break;case"Y":n+=this._formatNumber(e._selectedYear,4);break;case"o":case"O":n+=this._formatNumber(e._selectedMonth+1,s=="o"?1:2);break;case"n":case"N":n+=this._get(e,s=="N"?"monthNames":"monthNamesShort")[e._selectedMonth];break;case"d":case"D":n+=this._formatNumber(e._selectedDay,s=="d"?1:2);break;case"w":case"W":n+=this._get(e,s=="W"?"dayNames":"dayNamesShort")[(new Date(e._selectedYear,e._selectedMonth,e._selectedDay)).getDay()]+" "+this._formatNumber(e._selectedDay);break;case"h":case"H":n+=this._formatNumber(r?e._selectedHour%12||12:e._selectedHour,s=="h"?1:2);break;case"m":case"M":n+=this._formatNumber(e._selectedMinute,s=="m"?1:2);break;case"s":case"S":n+=this._formatNumber(e._selectedSecond,s=="s"?1:2);break;case"a":n+=this._get(e,"ampmNames")[e._selectedHour<12?0:1];break;default:n+=s}}return n},_showField:function(t){var n=t.input[0];if(t.input.is(":hidden")||e.datetimeEntry._lastInput!=n)return;var r=this._get(t,"datetimeFormat"),i=0;for(var s=0;s<t._fields[t._field];s++)i+=this._fieldLength(t,r.charAt(s));var o=i+this._fieldLength(t,r.charAt(s));if(n.setSelectionRange)n.setSelectionRange(i,o);else if(n.createTextRange){var u=n.createTextRange();u.moveStart("character",i);u.moveEnd("character",o-t.input.val().length);u.select()}n.disabled||n.focus()},_fieldLength:function(e,t){switch(t){case"Y":return 4;case"n":case"N":return this._get(e,t=="N"?"monthNames":"monthNamesShort")[e._selectedMonth].length;case"w":case"W":return this._get(e,t=="W"?"dayNames":"dayNamesShort")[(new Date(e._selectedYear,e._selectedMonth,e._selectedDay)).getDay()].length+3;case"y":case"O":case"D":case"H":case"M":case"S":return 2;case"o":return(""+(e._selectedMonth+1)).length;case"d":return(""+e._selectedDay).length;case"h":return(""+(e._ampmField==-1?e._selectedHour:e._selectedHour%12||12)).length;case"m":return(""+e._selectedMinute).length;case"s":return(""+e._selectedSecond).length;case"a":return this._get(e,"ampmNames")[0].length;default:return 1}},_formatNumber:function(e,t){e=""+e;t=t||2;while(e.length<t)e="0"+e;return e},_setValue:function(t,n){if(n!=t.input.val()){var r=this._get(t,"altField");r&&e(r).val(n?this._formatDatetime(t,this._get(t,"altFormat")||this._get(t,"datetimeFormat")):"");t.input.val(n).trigger("change")}},_changeField:function(t,r,i){var s=t.input.val()==""||t._field==(r==-1?0:t._fields.length-1);s||(t._field+=r);this._showField(t);t._lastChr="";e.data(t.input[0],n,t);return s&&i},_adjustField:function(e,t){e.input.val()==""&&(t=0);var n=this._get(e,"datetimeFormat").charAt(e._fields[e._field]),r=e._selectedYear+(n.match(/y/i)?t:0),i=e._selectedMonth+(n.match(/o|n/i)?t:0),s=n.match(/d|w/i)?e._selectedDay+t:Math.min(e._selectedDay,this._getDaysInMonth(r,i)),o=this._get(e,"timeSteps"),u=e._selectedHour+(n.match(/h/i)?t*o[0]:0)+(n=="a"&&t!=0?e._selectedHour<12?12:-12:0),a=e._selectedMinute+(n.match(/m/i)?t*o[1]:0),f=e._selectedSecond+(n.match(/s/i)?t*o[2]:0);this._setDatetime(e,new Date(r,i,s,u,a,f))},_getDaysInMonth:function(e,t){return(new Date(e,t+1,0)).getDate()},_setDatetime:function(t,r){r=this._normaliseDatetime(this._determineDatetime(t,r||this._get(t,"defaultDatetime"))||new Date);var i=this._constrainTime(t,[r.getHours(),r.getMinutes(),r.getSeconds()]);r.setHours(i[0],i[1],i[2]);var s=this._normaliseDatetime(this._determineDatetime(t,this._get(t,"minDatetime"))),o=this._normaliseDatetime(this._determineDatetime(t,this._get(t,"maxDatetime"))),u=this._normaliseDatetime(this._determineDatetime(t,this._get(t,"minTime")),"d"),a=this._normaliseDatetime(this._determineDatetime(t,this._get(t,"maxTime")),"d");r=s&&r<s?s:o&&r>o?o:r;u&&this._normaliseDatetime(new Date(r.getTime()),"d")<u&&this._copyTime(u,r);a&&this._normaliseDatetime(new Date(r.getTime()),"d")>a&&this._copyTime(a,r);t._selectedYear=r.getFullYear();t._selectedMonth=r.getMonth();t._selectedDay=r.getDate();t._selectedHour=r.getHours();t._selectedMinute=r.getMinutes();t._selectedSecond=r.getSeconds();this._showDatetime(t);e.data(t.input[0],n,t)},_copyDate:function(e,t){t.setFullYear(e.getFullYear());t.setMonth(e.getMonth());t.setDate(e.getDate())},_copyTime:function(e,t){t.setHours(e.getHours());t.setMinutes(e.getMinutes());t.setSeconds(e.getSeconds())},_determineDatetime:function(t,n){var r=function(e){var t=new Date;t.setSeconds(t.getSeconds()+e);return t},i=function(n){var r;try{r=e.datetimeEntry._parseDatetime(t,n);if(r)return r}catch(i){}n=n.toLowerCase();r=new Date;var s=r.getFullYear(),o=r.getMonth(),u=r.getDate(),a=r.getHours(),f=r.getMinutes(),l=r.getSeconds(),h=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g,p=h.exec(n);while(p){switch(p[2]||"s"){case"s":l+=parseInt(p[1],10);break;case"m":f+=parseInt(p[1],10);break;case"h":a+=parseInt(p[1],10);break;case"d":u+=parseInt(p[1],10);break;case"w":u+=parseInt(p[1],10)*7;break;case"o":o+=parseInt(p[1],10);break;case"y":s+=parseInt(p[1],10)}p=h.exec(n)}return new Date(s,o,u,a,f,l)};return n?typeof n=="string"?i(n):typeof n=="number"?r(n):n:null},_normaliseDatetime:function(e,t){if(!e)return null;if(t=="d"){e.setFullYear(0);e.setMonth(0);e.setDate(0)}if(t=="t"){e.setHours(0);e.setMinutes(0);e.setSeconds(0)}e.setMilliseconds(0);return e},_handleKeyPress:function(e,t){t=t.toLowerCase();var n=this._get(e,"datetimeFormat"),r=this._get(e,"datetimeSeparators"),i=n.charAt(e._fields[e._field]),s=n.charAt(e._fields[e._field]+1);s="yYoOnNdDwWhHmMsSa".indexOf(s)==-1?s:"";if((r+s).indexOf(t)>-1)this._changeField(e,1,!1);else if(t>="0"&&t<="9"){var o=parseInt(t,10),u=parseInt(e._lastChr+t,10),a=i.match(/y/i)?u:e._selectedYear,f=i.match(/o|n/i)?u>=1&&u<=12?u:o>0?o:e._selectedMonth+1:e._selectedMonth+1,l=i.match(/d|w/i)?u>=1&&u<=this._getDaysInMonth(a,f-1)?u:o>0?o:e._selectedDay:e._selectedDay,c=i.match(/h/i)?e._ampmField==-1?u<24?u:o:(u>=1&&u<=12?u:o>0?o:e._selectedHour)%12+(e._selectedHour>=12?12:0):e._selectedHour,h=i.match(/m/i)?u<60?u:o:e._selectedMinute,p=i.match(/s/i)?u<60?u:o:e._selectedSecond,d=this._constrainTime(e,[c,h,p]),v=this._shortYearCutoff(e);this._setDatetime(e,new Date(a+(a>=100||i!="y"?0:a>v?1900:2e3),f-1,l,d[0],d[1],d[2]));e._lastChr=(i!="Y"?"":e._lastChr.substr(Math.max(0,e._lastChr.length-2)))+t}else if(i.match(/n/i)){e._lastChr+=t;var m=this._get(e,i=="n"?"monthNamesShort":"monthNames"),g=function(){for(var t=0;t<m.length;t++)if(m[t].toLowerCase().substring(0,e._lastChr.length)==e._lastChr)return t;return-1},f=g();if(f==-1){e._lastChr=t;f=g()}if(f==-1)e._lastChr="";else{var a=e._selectedYear,l=Math.min(e._selectedDay,this._getDaysInMonth(a,f));this._setDatetime(e,this._normaliseDatetime(new Date(a,f,l,e._selectedHour,e._selectedMinute,e._selectedSecond)))}}else if(e._ampmField>-1){var y=this._get(e,"ampmNames");if(t==y[0].substring(0,1).toLowerCase()&&e._selectedHour>=12||t==y[1].substring(0,1).toLowerCase()&&e._selectedHour<12){var b=e._field;e._field=e._ampmField;this._adjustField(e,1);e._field=b;this._showField(e)}}},_shortYearCutoff:function(e){var t=this._get(e,"shortYearCutoff");typeof t=="string"&&(t=(new Date).getFullYear()+parseInt(t,10));return t%100},_constrainTime:function(e,t){var n=t!=null;if(!n){var r=this._determineTime(e,this._get(e,"defaultTime"))||new Date;t=[r.getHours(),r.getMinutes(),r.getSeconds()]}var i=!1,s=this._get(e,"timeSteps");for(var o=0;o<s.length;o++)if(i)t[o]=0;else if(s[o]>1){t[o]=Math.round(t[o]/s[o])*s[o];i=!0}return t}});var i=["getDatetime","getOffset","isDisabled"];e.fn.datetimeEntry=function(t){var n=Array.prototype.slice.call(arguments,1);return typeof t=="string"&&e.inArray(t,i)>-1?e.datetimeEntry["_"+t+"DatetimeEntry"].apply(e.datetimeEntry,[this[0]].concat(n)):this.each(function(){var r=this.nodeName.toLowerCase();if(r=="input")if(typeof t=="string")e.datetimeEntry["_"+t+"DatetimeEntry"].apply(e.datetimeEntry,[this].concat(n));else{var i=e.fn.metadata?e(this).metadata():{};e.datetimeEntry._connectDatetimeEntry(this,e.extend(i,t))}})};e.datetimeEntry=new t})(jQuery);(function(e){e.datetimeEntry.regional.ru={datetimeFormat:"D.O.Y H:M",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],ampmNames:["AM","PM"],spinnerTexts:["Сейчас","Предыдущее поле","Следующее поле","Больше","Меньше"],isRTL:!1};e.datetimeEntry.setDefaults(e.datetimeEntry.regional.ru)})(jQuery);jQuery.cookie=function(e,t,n){if(typeof t=="undefined"){var a=null;if(document.cookie&&document.cookie!=""){var f=document.cookie.split(";");for(var l=0;l<f.length;l++){var c=jQuery.trim(f[l]);if(c.substring(0,e.length+1)==e+"="){a=decodeURIComponent(c.substring(e.length+1));break}}}return a}n=n||{};if(t===null){t="";n.expires=-1}var r="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var i;if(typeof n.expires=="number"){i=new Date;i.setTime(i.getTime()+n.expires*24*60*60*1e3)}else i=n.expires;r="; expires="+i.toUTCString()}var s=n.path?"; path="+n.path:"",o=n.domain?"; domain="+n.domain:"",u=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),r,s,o,u].join("")};(function(e){function t(t){if(typeof t.data!="string")return;var n=t.handler,r=t.data.toLowerCase().split(" ");t.handler=function(t){if(!(this===t.target||!/textarea|select/i.test(t.target.nodeName)&&t.target.type!=="text"))return;var i=t.type!=="keypress"&&e.hotkeys.specialKeys[t.which],s=String.fromCharCode(t.which).toLowerCase(),o,u="",a={};t.altKey&&i!=="alt"&&(u+="alt+");t.ctrlKey&&i!=="ctrl"&&(u+="ctrl+");t.metaKey&&!t.ctrlKey&&i!=="meta"&&(u+="meta+");t.shiftKey&&i!=="shift"&&(u+="shift+");if(i)a[u+i]=!0;else{a[u+s]=!0;a[u+e.hotkeys.shiftNums[s]]=!0;u==="shift+"&&(a[e.hotkeys.shiftNums[s]]=!0)}for(var f=0,l=r.length;f<l;f++)if(a[r[f]])return n.apply(this,arguments)}}e.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};e.each(["keydown","keyup","keypress"],function(){e.event.special[this]={add:t}})})(jQuery);