
                (function() {
            (function(){function aa(){return function(){}}function l(a){return function(){return this[a]}}function ba(a){return function(){return a}}var p,r=this;function ca(a){a=a.split(".");for(var b=r,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function t(a){return void 0!==a}function v(a){return"array"==da(a)}function w(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function x(a){return"string"==typeof a}function fa(a){return"boolean"==typeof a}function y(a){return"number"==typeof a}function ga(a){return"function"==da(a)}function z(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ha(a){return a[ia]||(a[ia]=++ja)}
var ia="closure_uid_"+(1E9*Math.random()>>>0),ja=0;function ka(a,b,c){return a.call.apply(a.bind,arguments)}function la(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function ma(a,b,c){ma=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ka:la;return ma.apply(null,arguments)}function na(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var oa=Date.now||function(){return+new Date};
function A(a,b){var c=a.split("."),d=r;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function B(a,b){function c(){}c.prototype=b.prototype;a.v=b.prototype;a.prototype=new c};function pa(a){Error.captureStackTrace?Error.captureStackTrace(this,pa):this.stack=Error().stack||"";a&&(this.message=String(a))}B(pa,Error);pa.prototype.name="CustomError";function ra(a,b){for(var c=1;c<arguments.length;c++){var d=String(arguments[c]).replace(/\$/g,"$$$$");a=a.replace(/\%s/,d)}return a}function sa(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function ta(a){if(!va.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(wa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(xa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(ya,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(za,"&quot;"));return a}var wa=/&/g,xa=/</g,ya=/>/g,za=/\"/g,va=/[&<>\"]/;
function Aa(a){return sa(a.replace(/  /g," &#160;"),void 0)}function Ba(a,b){for(var c=b.length,d=0;d<c;d++){var e=1==c?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a}var Ca={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},Da={"'":"\\'"};
function Ea(a){a=String(a);if(a.quote)return a.quote();for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0),f=b,g=c+1,h;if(!(h=Ca[d])){if(!(31<e&&127>e))if(d in Da)d=Da[d];else if(d in Ca)d=Da[d]=Ca[d];else{e=d;h=d.charCodeAt(0);if(31<h&&127>h)e=d;else{if(256>h){if(e="\\x",16>h||256<h)e+="0"}else e="\\u",4096>h&&(e+="0");e+=h.toString(16).toUpperCase()}d=Da[d]=e}h=d}f[g]=h}b.push('"');return b.join("")};function Fa(a,b){b.unshift(a);pa.call(this,ra.apply(null,b));b.shift()}B(Fa,pa);Fa.prototype.name="AssertionError";function Ga(a,b){throw new Fa("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var Ha=Array.prototype,Ia=Ha.indexOf?function(a,b,c){return Ha.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(x(a))return x(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ja=Ha.forEach?function(a,b,c){Ha.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ma=Ha.map?function(a,b,c){return Ha.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=
x(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Na=Ha.some?function(a,b,c){return Ha.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Oa(a,b){var c=Pa(a,b,void 0);return 0>c?null:x(a)?a.charAt(c):a[c]}function Pa(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}
function Qa(a){if(!v(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Ra(a,b){var c=Ia(a,b),d;(d=0<=c)&&Ha.splice.call(a,c,1);return d}function Sa(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Ta(a,b,c){return 2>=arguments.length?Ha.slice.call(a,b):Ha.slice.call(a,b,c)}function Ua(a,b){if(!w(a)||!w(b)||a.length!=b.length)return!1;for(var c=a.length,d=Va,e=0;e<c;e++)if(!d(a[e],b[e]))return!1;return!0}function Va(a,b){return a===b};function Wa(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function Xa(a,b){for(var c=w(b),d=c?b:arguments,c=c?0:1;c<d.length&&(a=a[d[c]],t(a));c++);return a}var Ya="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Za(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Ya.length;f++)c=Ya[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var $a="StopIteration"in r?r.StopIteration:Error("StopIteration");function ab(){}ab.prototype.a=function(){throw $a;};ab.prototype.xa=function(){return this};function bb(a){if(a instanceof ab)return a;if("function"==typeof a.xa)return a.xa(!1);if(w(a)){var b=0,c=new ab;c.a=function(){for(;;){if(b>=a.length)throw $a;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function cb(a,b,c){if(w(a))try{Ja(a,b,c)}catch(d){if(d!==$a)throw d;}else{a=bb(a);try{for(;;)b.call(c,a.a(),void 0,a)}catch(e){if(e!==$a)throw e;}}}function db(a){if(w(a))return Sa(a);a=bb(a);var b=[];cb(a,function(a){b.push(a)});return b};function eb(a,b){this.b={};this.a=[];var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)fb(this,arguments[d],arguments[d+1])}else if(a){var e;if(a instanceof eb)e=a.oa(),d=a.ob();else{var c=[],f=0;for(e in a)c[f++]=e;e=c;c=[];f=0;for(d in a)c[f++]=a[d];d=c}for(c=0;c<e.length;c++)fb(this,e[c],d[c])}}p=eb.prototype;p.s=0;p.pb=0;p.Qa=l("s");p.ob=function(){gb(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a};
p.oa=function(){gb(this);return this.a.concat()};p.clear=function(){this.b={};this.pb=this.s=this.a.length=0};function gb(a){if(a.s!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Object.prototype.hasOwnProperty.call(a.b,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.s!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Object.prototype.hasOwnProperty.call(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}
function fb(a,b,c){Object.prototype.hasOwnProperty.call(a.b,b)||(a.s++,a.a.push(b),a.pb++);a.b[b]=c}p.Oa=function(){return new eb(this)};p.xa=function(a){gb(this);var b=0,c=this.a,d=this.b,e=this.pb,f=this,g=new ab;g.a=function(){for(;;){if(e!=f.pb)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw $a;var g=c[b++];return a?g:d[g]}};return g};var hb,ib,jb,kb;function lb(){return r.navigator?r.navigator.userAgent:null}kb=jb=ib=hb=!1;var nb;if(nb=lb()){var ob=r.navigator;hb=0==nb.indexOf("Opera");ib=!hb&&-1!=nb.indexOf("MSIE");jb=!hb&&-1!=nb.indexOf("WebKit");kb=!hb&&!jb&&"Gecko"==ob.product}var pb=hb,C=ib,qb=kb,rb=jb;function sb(){var a=r.document;return a?a.documentMode:void 0}var tb;
a:{var ub="",vb;if(pb&&r.opera)var wb=r.opera.version,ub="function"==typeof wb?wb():wb;else if(qb?vb=/rv\:([^\);]+)(\)|;)/:C?vb=/MSIE\s+([^\);]+)(\)|;)/:rb&&(vb=/WebKit\/(\S+)/),vb)var xb=vb.exec(lb()),ub=xb?xb[1]:"";if(C){var yb=sb();if(yb>parseFloat(ub)){tb=String(yb);break a}}tb=ub}var zb={};
function Ab(a){var b;if(!(b=zb[a])){b=0;for(var c=String(tb).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var m=k.exec(g)||["","",""],q=n.exec(h)||["","",""];if(0==m[0].length&&0==q[0].length)break;b=((0==m[1].length?0:parseInt(m[1],10))<(0==q[1].length?0:parseInt(q[1],10))?-1:(0==m[1].length?0:parseInt(m[1],10))>(0==q[1].length?
0:parseInt(q[1],10))?1:0)||((0==m[2].length)<(0==q[2].length)?-1:(0==m[2].length)>(0==q[2].length)?1:0)||(m[2]<q[2]?-1:m[2]>q[2]?1:0)}while(0==b)}b=zb[a]=0<=b}return b}var Bb=r.document,Db=Bb&&C?sb()||("CSS1Compat"==Bb.compatMode?parseInt(tb,10):5):void 0;function Fb(a){return Gb(a||arguments.callee.caller,[])}
function Gb(a,b){var c=[];if(0<=Ia(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Hb(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Hb(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Gb(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Hb(a){if(Ib[a])return Ib[a];a=String(a);if(!Ib[a]){var b=/function ([^\(]+)/.exec(a);Ib[a]=b?b[1]:"[Anonymous]"}return Ib[a]}var Ib={};function Jb(a,b,c,d,e){"number"==typeof e||Kb++;this.g=d||oa();this.e=a;this.d=b;this.c=c;delete this.b;delete this.a}Jb.prototype.b=null;Jb.prototype.a=null;var Kb=0;function Lb(a){this.e=a}Lb.prototype.c=null;Lb.prototype.b=null;Lb.prototype.d=null;Lb.prototype.a=null;function Mb(a,b){this.name=a;this.value=b}Mb.prototype.toString=l("name");var Nb=new Mb("SHOUT",1200),Ob=new Mb("SEVERE",1E3),Pb=new Mb("WARNING",900),Qb=new Mb("INFO",800),Rb=new Mb("CONFIG",700),Sb=new Mb("FINE",500),Tb=new Mb("FINER",400),Ub=new Mb("FINEST",300),Vb=[new Mb("OFF",Infinity),Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,new Mb("ALL",0)],Wb=null;Lb.prototype.getName=l("e");
function Xb(a){if(a.b)return a.b;if(a.c)return Xb(a.c);Ga("Root logger has no level set.");return null}Lb.prototype.log=function(a,b,c){if(a.value>=Xb(this).value)for(a=this.g(a,b,c),b="log:"+a.d,r.console&&(r.console.timeStamp?r.console.timeStamp(b):r.console.markTimeline&&r.console.markTimeline(b)),r.msWriteProfilerMark&&r.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.a)for(var e=0,f=void 0;f=c.a[e];e++)f(d);b=b.c}};
Lb.prototype.g=function(a,b,c){var d=new Jb(a,String(b),this.e);if(c){d.b=c;var e;var f=arguments.callee.caller;try{var g;var h=ca("window.location.href");if(x(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:h,stack:"Not available"};else{var k,n,m=!1;try{k=c.lineNumber||c.vd||"Not available"}catch(q){k="Not available",m=!0}try{n=c.fileName||c.filename||c.sourceURL||r.$googDebugFname||h}catch(u){n="Not available",m=!0}g=!m&&c.lineNumber&&c.fileName&&c.stack?c:{message:c.message,
name:c.name,lineNumber:k,fileName:n,stack:c.stack||"Not available"}}e="Message: "+ta(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+ta(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+ta(Fb(f)+"-> ")}catch(s){e="Exception trying to expose exception! You win, we lose. "+s}d.a=e}return d};function Yb(a,b){a.log(Ob,b,void 0)}function D(a,b){a.log(Pb,b,void 0)}function Zb(a,b){a.log(Sb,b,void 0)}
function E(a,b){a.log(Tb,b,void 0)}function F(a,b){a.log(Ub,b,void 0)}var $b={},ac=null;function bc(){ac||(ac=new Lb(""),$b[""]=ac,ac.b=Rb)}function cc(){bc();return ac}function H(a){bc();var b;if(!(b=$b[a])){b=new Lb(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=H(a.substr(0,c));c.d||(c.d={});c.d[d]=b;b.c=c;$b[a]=b}return b};function dc(a){return function(){throw a;}};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function I(a,b){this.c=[];this.w=b||null}p=I.prototype;p.Pa=!1;p.Ra=!1;p.Nb=!1;p.Nc=!1;p.Ac=!1;p.Oc=0;p.nc=function(a,b){this.Nb=!1;ec(this,a,b)};function ec(a,b,c){a.Pa=!0;a.e=c;a.Ra=!b;fc(a)}function gc(a){if(a.Pa){if(!a.Ac)throw new hc;a.Ac=!1}}p.A=function(a){gc(this);ec(this,!0,a)};p.t=function(a){gc(this);ec(this,!1,a)};p.ea=function(a,b){return this.fa(a,null,b)};p.lc=function(a,b){return this.fa(null,a,b)};p.Mc=function(a,b){return this.fa(a,a,b)};
p.fa=function(a,b,c){this.c.push([a,b,c]);this.Pa&&fc(this);return this};function ic(a){return Na(a.c,function(a){return ga(a[1])})}
function fc(a){a.g&&(a.Pa&&ic(a))&&(r.clearTimeout(a.g),delete a.g);a.i&&(a.i.Oc--,delete a.i);for(var b=a.e,c=!1,d=!1;a.c.length&&!a.Nb;){var e=a.c.shift(),f=e[0],g=e[1],e=e[2];if(f=a.Ra?g:f)try{var h=f.call(e||a.w,b);t(h)&&(a.Ra=a.Ra&&(h==b||h instanceof Error),a.e=b=h);b instanceof I&&(d=!0,a.Nb=!0)}catch(k){b=k,a.Ra=!0,ic(a)||(c=!0)}}a.e=b;d&&(b.fa(ma(a.nc,a,!0),ma(a.nc,a,!1)),b.Nc=!0);c&&(a.g=r.setTimeout(dc(b),0))}
function jc(a){Error.captureStackTrace?Error.captureStackTrace(this,jc):this.stack=Error().stack||"";a&&(this.message=String(a))}B(jc,Error);function hc(){jc.call(this)}B(hc,jc);hc.prototype.message="Deferred has already fired";hc.prototype.name="AlreadyCalledError";var kc={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},lc=r.IDBRequest&&"LOADING"in r.IDBRequest?r.IDBTransaction:r.webkitIDBRequest&&"LOADING"in r.webkitIDBRequest&&1===r.webkitIDBTransaction.READ_WRITE?r.webkitIDBTransaction:kc,J=lc.READ_ONLY,L=lc.READ_WRITE,mc=lc.VERSION_CHANGE;function nc(a,b){return a?b?"prevunique":"prev":b?"nextunique":"next"};function oc(a,b){var c,d;2==arguments.length&&x(arguments[1])?(c=!0,d=arguments[1].split(".")):d=(c=w(b))?b:arguments;for(c=c?0:1;c<d.length&&(a=a[d[c]],t(a));c++);return a}var pc={};
function qc(a){var b=[a];a=new rc;for(var c=0,d,e;void 0!==(e=b.pop());){0===c%4&&12<c+4&&(a.write(c),c=0);d=typeof e;if(e instanceof Array)if(c+=4,0<e.length){b.push(pc);for(d=e.length;d--;)b.push(e[d]);continue}else a.write(c);else if("number"===d)c+=1,a.write(c),sc(a,e);else if(e instanceof Date)c+=2,a.write(c),sc(a,e.valueOf());else if("string"===d){c+=3;a.write(c);c=a;for(d=0;d<e.length;d++){var f=e.charCodeAt(d);126>=f?c.write(f+1):16510>=f?(f-=127,c.write(128|f>>8,f&255)):c.write(192|f>>10,
f>>2|255,(f|3)<<6)}c.write(0)}else if(e===pc)a.write(0);else return"";c=0}for(b=a.a.length;"00"===a.a[--b];);a.a.length=++b;return a.toString()}function tc(a){for(var b=[],c=b,d=[],e,f,g=new uc(a);null!=vc(g);)if(0===g.a)c=d.pop();else{if(null===g.a)break;do{e=g.a/4|0;a=g.a%4;for(var h=0;h<e;h++)f=[],c.push(f),d.push(c),c=f;if(0===a&&12<g.a+4)vc(g);else break}while(1);1===a?c.push(wc(g)):2===a?c.push(new Date(wc(g))):3===a?c.push(xc(g)):0===a&&(c=d.pop())}return b[0]}
function sc(a,b){var c,d,e;c=b;var f=e=d=0;if(0!==c)if(isFinite(c)){0>c&&(d=1,c=-c);f=0;if(2.2250738585072014E-308<=c){for(e=c;1>e;)f--,e*=2;for(;2<=e;)f++,e/=2;e=f+1023}f=e?Math.floor(4503599627370496*(c/Math.pow(2,f)-1)):Math.floor(c/4.9E-324)}else e=2047,isNaN(c)?f=0x8000000000000:-Infinity===c&&(d=1);c=d;d=e;e=f;c&&(e=0xfffffffffffff-e,d=2047-d);a.write((c?0:128)|d>>4);a.write((d&15)<<4|0|e/281474976710656);e%=281474976710656;c=0|e/4294967296;a.write(c>>8,c&255);e%=4294967296;c=0|e/65536;a.write(c>>
8,c&255);c=e%65536;a.write(c>>8,c&255)}function wc(a){var b=vc(a)|0,c=b>>7?!1:!0,d=c?-1:1,e=(b&127)<<4,b=vc(a)|0,e=e+(b>>4);c&&(e=2047-e);for(var b=[c?15-(b&15):b&15],f=6;f--;)b.push(c?255-(vc(a)|0):vc(a)|0);a=0;for(f=7;f--;)a=a/256+b[f];a/=16;return 0===a&&0===e?0:(a+1)*Math.pow(2,e-1023)*d}
function xc(a){for(var b=[],c=0,d=0,e=0,f,g;;){f=vc(a);if(0===f||null==f)break;0===c?(g=f>>6,2>g&&!isNaN(f)?b.push(String.fromCharCode(f-1)):(c=g,d=f<<10,e++)):2===c?(b.push(String.fromCharCode(d+f+127)),c=d=e=0):2===e?(d+=f<<2,e++):(b.push(String.fromCharCode(d|f>>6)),c=d=e=0)}return b.join("")}function uc(a){this.a=null;this.b=a;this.c=this.b.length-1;this.index=-1}function vc(a){return a.a=a.index<a.c?parseInt(a.b[++a.index]+a.b[++a.index],16):null}function rc(){this.a=[];this.b=void 0}
rc.prototype.write=function(a){for(var b=0;b<arguments.length;b++)this.b=arguments[b].toString(16),this.a.push(2===this.b.length?this.b:this.b="0"+this.b)};rc.prototype.toString=function(){return this.a.length?this.a.join(""):""};function yc(a,b){var c=qc(a),d=qc(b);return c>d?1:c==d?0:-1};function zc(){0!=Ac&&(Bc[ha(this)]=this)}var Ac=0,Bc={};zc.prototype.sc=!1;zc.prototype.qc=function(){if(!this.sc&&(this.sc=!0,this.Ba(),0!=Ac)){var a=ha(this);delete Bc[a]}};zc.prototype.Ba=function(){if(this.tc)for(;this.tc.length;)this.tc.shift()()};var Cc=!C||C&&9<=Db,Dc=C&&!Ab("9");!rb||Ab("528");qb&&Ab("1.9b")||C&&Ab("8")||pb&&Ab("9.5")||rb&&Ab("528");qb&&!Ab("8")||C&&Ab("9");function Ec(a,b){this.type=a;this.a=this.target=b}Ec.prototype.qc=aa();Ec.prototype.b=!1;Ec.prototype.d=!0;Ec.prototype.preventDefault=function(){this.d=!1};function Fc(a){Fc[" "](a);return a}Fc[" "]=aa();function Gc(a,b){a&&Hc(this,a,b)}B(Gc,Ec);p=Gc.prototype;p.target=null;p.clientX=0;p.clientY=0;p.oc=null;function Hc(a,b,c){var d=a.type=b.type;Ec.call(a,d);a.target=b.target||b.srcElement;a.a=c;if((c=b.relatedTarget)&&qb)try{Fc(c.nodeName)}catch(e){}a.clientX=void 0!==b.clientX?b.clientX:b.pageX;a.clientY=void 0!==b.clientY?b.clientY:b.pageY;a.oc=b;b.defaultPrevented&&a.preventDefault();delete a.b}
p.preventDefault=function(){Gc.v.preventDefault.call(this);var a=this.oc;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Dc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Ic="closure_listenable_"+(1E6*Math.random()|0),Jc=0;function Kc(a,b,c,d,e,f){this.Y=a;this.a=b;this.src=c;this.type=d;this.capture=!!e;this.Ca=f;this.key=++Jc;this.T=this.ya=!1};var Lc={},Mc={},Nc={},Oc={};
function Pc(a,b,c,d,e){if(v(b))for(var f=0;f<b.length;f++)Pc(a,b[f],c,d,e);else if(c=Qc(c),a&&a[Ic]){f=c;c=a.g[b]||(a.g[b]=[]);var g=Rc(c,f,d,e);-1<g?(a=c[g],a.ya=!1):(a=new Kc(f,null,a,b,!!d,e),a.ya=!1,c.push(a))}else a:{if(!b)throw Error("Invalid event type");d=!!d;var h=Mc;b in h||(h[b]={s:0,ba:0});h=h[b];d in h||(h[d]={s:0,ba:0},h.s++);h=h[d];f=ha(a);h.ba++;if(h[f])for(var g=h[f],k=0;k<g.length;k++){if(h=g[k],h.Y==c&&h.Ca==e){if(h.T)break;g[k].ya=!1;break a}}else g=h[f]=[],h.s++;k=Sc();h=new Kc(c,
k,a,b,d,e);h.ya=!1;k.src=a;k.Y=h;g.push(h);Nc[f]||(Nc[f]=[]);Nc[f].push(h);a.addEventListener?a.addEventListener(b,k,d):a.attachEvent(b in Oc?Oc[b]:Oc[b]="on"+b,k);Lc[h.key]=h}}function Sc(){var a=Tc,b=Cc?function(c){return a.call(b.src,b.Y,c)}:function(c){c=a.call(b.src,b.Y,c);if(!c)return c};return b}
function Uc(a,b,c,d,e){if(v(b))for(var f=0;f<b.length;f++)Uc(a,b[f],c,d,e);else if(c=Qc(c),a&&a[Ic])b in a.g&&(a=a.g[b],c=Rc(a,c,d,e),-1<c&&(e=a[c],delete Lc[e.key],e.T=!0,Ha.splice.call(a,c,1)));else{d=!!d;a:{f=Mc;if(b in f&&(f=f[b],d in f&&(f=f[d],a=ha(a),f[a]))){a=f[a];break a}a=null}if(a)for(f=0;f<a.length;f++)if(a[f].Y==c&&a[f].capture==d&&a[f].Ca==e){Vc(a[f]);break}}}
function Vc(a){if(!y(a)&&a&&!a.T){var b=a.src;if(b&&b[Ic])Wc(b,a);else{var c=a.type,d=a.a,e=a.capture;b.removeEventListener?b.removeEventListener(c,d,e):b.detachEvent&&b.detachEvent(c in Oc?Oc[c]:Oc[c]="on"+c,d);b=ha(b);Nc[b]&&(d=Nc[b],Ra(d,a),0==d.length&&delete Nc[b]);a.T=!0;a.Y=null;a.a=null;a.src=null;a.Ca=null;if(d=Mc[c][e][b])d.uc=!0,Xc(c,e,b,d);delete Lc[a.key]}}}
function Xc(a,b,c,d){if(!d.tb&&d.uc){for(var e=0,f=0;e<d.length;e++)d[e].T||(e!=f&&(d[f]=d[e]),f++);d.length=f;d.uc=!1;0==f&&(delete Mc[a][b][c],Mc[a][b].s--,0==Mc[a][b].s&&(delete Mc[a][b],Mc[a].s--),0==Mc[a].s&&delete Mc[a])}}function Yc(a,b,c,d,e){var f=1;b=ha(b);if(a[b]){var g=--a.ba,h=a[b];h.tb?h.tb++:h.tb=1;try{for(var k=h.length,n=0;n<k;n++){var m=h[n];m&&!m.T&&(f&=!1!==Zc(m,e))}}finally{a.ba=Math.max(g,a.ba),h.tb--,Xc(c,d,b,h)}}return Boolean(f)}
function Zc(a,b){var c=a.Y,d=a.Ca||a.src;a.ya&&Vc(a);return c.call(d,b)}
function Tc(a,b){if(a.T)return!0;var c=a.type,d=Mc;if(!(c in d))return!0;var d=d[c],e,f;if(!Cc){e=b||ca("window.event");var g=!0 in d,h=!1 in d;if(g){if(0>e.keyCode||void 0!=e.returnValue)return!0;a:{var k=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(n){k=!0}if(k||void 0==e.returnValue)e.returnValue=!0}}k=new Gc;Hc(k,e,this);e=!0;try{if(g){for(var m=[],q=k.a;q;q=q.parentNode)m.push(q);f=d[!0];f.ba=f.s;for(var u=m.length-1;!k.b&&0<=u&&f.ba;u--)k.a=m[u],e&=Yc(f,m[u],c,!0,k);if(h)for(f=d[!1],f.ba=
f.s,u=0;!k.b&&u<m.length&&f.ba;u++)k.a=m[u],e&=Yc(f,m[u],c,!1,k)}else e=Zc(a,k)}finally{m&&(m.length=0)}return e}c=new Gc(b,this);return e=Zc(a,c)}var $c="__closure_events_fn_"+(1E9*Math.random()>>>0);function Qc(a){return ga(a)?a:a[$c]||(a[$c]=function(b){return a.handleEvent(b)})};function ad(){zc.call(this);this.g={};this.Vc=this}B(ad,zc);ad.prototype[Ic]=!0;ad.prototype.S=null;ad.prototype.Rb=function(a,b,c,d){Pc(this,a,b,c,d)};ad.prototype.removeEventListener=function(a,b,c,d){Uc(this,a,b,c,d)};
function bd(a,b){var c,d=a.S;if(d)for(c=[];d;d=d.S)c.push(d);var d=a.Vc,e=b,f=e.type||e;if(x(e))e=new Ec(e,d);else if(e instanceof Ec)e.target=e.target||d;else{var g=e,e=new Ec(f,d);Za(e,g)}var g=!0,h;if(c)for(var k=c.length-1;!e.b&&0<=k;k--)h=e.a=c[k],g=cd(h,f,!0,e)&&g;e.b||(h=e.a=d,g=cd(h,f,!0,e)&&g,e.b||(g=cd(h,f,!1,e)&&g));if(c)for(k=0;!e.b&&k<c.length;k++)h=e.a=c[k],g=cd(h,f,!1,e)&&g}
ad.prototype.Ba=function(){ad.v.Ba.call(this);var a=0,b;for(b in this.g){for(var c=this.g[b],d=0;d<c.length;d++)++a,delete Lc[c[d].key],c[d].T=!0;c.length=0}this.S=null};function Wc(a,b){var c=b.type;c in a.g&&Ra(a.g[c],b)&&(delete Lc[b.key],b.T=!0)}function cd(a,b,c,d){if(!(b in a.g))return!0;var e=!0;b=Sa(a.g[b]);for(var f=0;f<b.length;++f){var g=b[f];if(g&&!g.T&&g.capture==c){var h=g.Y,k=g.Ca||g.src;g.ya&&Wc(a,g);e=!1!==h.call(k,d)&&e}}return e&&!1!=d.d}
function Rc(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(f.Y==b&&f.capture==!!c&&f.Ca==d)return e}return-1};function dd(a,b,c){if(ga(a))c&&(a=ma(a,c));else if(a&&"function"==typeof a.handleEvent)a=ma(a.handleEvent,a);else throw Error("Invalid listener argument");2147483647<b||r.setTimeout(a,b||0)};function ed(a,b,c){var d;if(z(a))d=a.store,b=a.id,null!=a.parent&&(c=new ed(a.parent));else if(t(b))d=a;else if(d=a.lastIndexOf("^|"),b=a,0<d&&(b=a.substr(d),c=new ed(a.substring(0,d))),b=b.split("^:"),d=b[0],b=b[1],!t(b))throw Error("Invalid key value: "+a);this.a=d;this.id=b;this.parent=c||null}p=ed.prototype;p.toJSON=function(){var a={store:this.a,id:this.id};this.parent&&(a.parent=this.parent.toJSON());return a};
p.valueOf=function(){return(this.parent?this.parent.valueOf()+"^|":"")+this.a+"^:"+this.id};p.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")};p.md=l("a");p.Qc=l("id");p.ld=l("parent");function fd(a){if(w(a)){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}return a};function M(a,b,c,d){this.lower=a;this.upper=b;this.lowerOpen=!!c;this.upperOpen=!!d;ga(Object.freeze)&&Object.freeze(this)}M.prototype.lower=void 0;M.prototype.upper=void 0;M.prototype.toJSON=function(){return gd(this)};M.only=function(a){return new M(a,a,!1,!1)};M.bound=function(a,b,c,d){return new M(a,b,c,d)};M.upperBound=function(a,b){return new M(void 0,a,void 0,!!b)};M.lowerBound=function(a,b){return new M(a,void 0,!!b,void 0)};
function hd(a){var b;if(v(a))b=Sa(a),b.push("\uffff");else if(x(a))b=a+"\uffff";else throw new N;return M.bound(a,b,!1,!0)}function gd(a){a=a||{};return{lower:a.lower,upper:a.upper,lowerOpen:a.lowerOpen,upperOpen:a.upperOpen}}function jd(a){return null!=a?null!=a.upper&&null!=a.lower?kd.bound(a.lower,a.upper,!!a.lowerOpen,!!a.upperOpen):null!=a.upper?kd.upperBound(a.upper,a.upperOpen):null!=a.lower?kd.lowerBound(a.lower,a.lowerOpen):null:null}
function ld(a){if(a instanceof M)return"";if(null!=a){if(z(a)){for(var b in a)if(a.hasOwnProperty(b)&&!(0<=Ia(["lower","upper","lowerOpen","upperOpen"],b)))return'invalid attribute "'+b+'" in key range object';return""}return"key range must be an object"}return""}
M.prototype.Mb=function(a){var b=this.lower,c=this.upper,d=this.lowerOpen,e=this.upperOpen;null!=a.lower&&(null==this.lower||a.lower>=this.lower)&&(b=a.lower,d=a.lowerOpen||this.lowerOpen);null!=a.upper&&(null==this.upper||a.upper<=this.upper)&&(c=a.upper,e=a.upperOpen||this.upperOpen);return M.bound(b,c,d,e)};function md(a){if(!a)return"";var b=a.lowerOpen?" (":" [";null!=a.lower&&(b+=a.lower+", ");null!=a.upper&&(b+=a.upper);return b+=a.upperOpen?")":"]"}
function nd(a,b,c,d,e){if(c)if(c.lowerOpen||c.upperOpen||null==c.lower||null==c.upper||0!==O(c.lower,c.upper)){if(null!=c.lower){var f=c.lowerOpen?" > ":" >= ";d.push(a+f+"?");e.push(od(c.lower,b))}null!=c.upper&&(f=c.upperOpen?" < ":" <= ",d.push(a+f+"?"),e.push(od(c.upper,b)))}else d.push(a+" = ?"),e.push(od(c.lower,b))}
function pd(a,b,c,d){var e,f,g,h;if("^"==a)return hd(b);if("<"==a||"<="==a)e=b,g="<"==a;else if(">"==a||">="==a)f=b,h=">"==a;else if("="==a||"=="==a)e=f=b;else throw new N("invalid op: "+a);if("<"==c||"<="==c)e=d,g="<"==c;else if(">"==c||">="==c)f=d,h=">"==c;else if(t(c))throw new N("invalid op2: "+c);return M.bound(f,e,h,g)}var kd=r.IDBKeyRange||r.webkitIDBKeyRange||M;function N(a){pa.call(this,a);this.name="ydn.error.ArgumentException"}B(N,pa);function qd(a){pa.call(this,a);this.name="ydn.error.NotSupportedException"}B(qd,pa);function rd(a){pa.call(this,a);this.name="ydn.error.NotImplementedException"}B(rd,pa);function sd(a){pa.call(this,a);this.name="ydn.error.InvalidOperationException"}B(sd,pa);
function td(a){Error.captureStackTrace?Error.captureStackTrace(this,td):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}B(td,Error);td.prototype.name="ydn.error.InternalError";function ud(a){Error.captureStackTrace?Error.captureStackTrace(this,vd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ConstraintError"}B(ud,Error);ud.prototype.name="ydn.error.ConstraintError";function wd(a,b,c,d,e,f){t(e)||(e=v(a)?a.join(", "):a);if(null!=a&&!x(a)&&!w(a))throw new N("index keyPath for "+e+" must be a string or array, but "+a+" is "+typeof a);v(a)&&Object.freeze&&Object.freeze(a);!t(a)&&t(e)&&(a=e);this.keyPath=a;this.e=w(this.keyPath);this.name=e;this.type=xd(b);if(t(b)){if(!t(this.type))throw new N("type invalid in index: "+this.name);if(v(this.keyPath))throw new N('composite key for store "'+this.name+'" must not specified type');}this.unique=!!c;this.multiEntry=!!d;
this.g=x(this.type)?this.type:yd;this.c=x(e)?e:v(a)?this.keyPath.join(","):a;this.b=Ea(this.c);this.a=this.e||this.multiEntry?null:this.keyPath.split(".");this.d=f||null}function zd(a,b){if(null!=b){if(w(a.keyPath)){for(var c=[],d=0,e=a.keyPath.length;d<e;d++){var f=oc(b,a.keyPath[d]);c[d]=f}return c}return oc(b,a.keyPath)}}function Ad(a,b,c){for(var d=0;d<a.a.length;d++)d==a.a.length-1?b[a.a[d]]=c:z(b[a.a[d]])||(b[a.a[d]]={})}var yd="TEXT";
function od(a,b){if("DATE"==b){if(a instanceof Date)return+a}else return t(b)?a:qc(a)}function Bd(a,b){return"DATE"==b?new Date(a):t(b)?a:tc(a)}var Cd=["BLOB","DATE","INTEGER","NUMERIC",yd];function xd(a){if(x(a))return a=Ia(Cd,a),Cd[a]}wd.prototype.getName=l("name");wd.prototype.toJSON=function(){return{name:this.name,keyPath:this.keyPath,type:this.type,unique:this.unique,multiEntry:this.multiEntry}};
wd.prototype.Oa=function(){var a=v(this.keyPath)?Sa(this.keyPath):this.keyPath;return new wd(a,this.type,this.unique,this.multiEntry,this.name,this.d)};function Dd(a,b){return null!=a||null!=b?null!=a?null!=b?w(a)&&w(b)?Ua(a,b)?null:"expect: "+a+", but: "+b:Ed(a,b)?null:"expect: "+a+", but: "+b:"keyPath: "+a+" no longer defined":"newly define "+b:null}
wd.prototype.hint=function(a){if(!a)return this;var b=v(this.keyPath)?Sa(this.keyPath):this.keyPath,c=this.type;t(a.type)||"TEXT"!=c||(c=void 0);return new wd(b,c,this.unique,this.multiEntry,a.name)};function Fd(a,b,c){I.call(this,0,c);this.d=a;this.S=[];this.b=[];this.k=[];this.a=null;this.ia=""}B(Fd,I);p=Fd.prototype;p.ia="";p.zb=H("ydn.db.Request");function Gd(a,b,c){a.a=b;a.ia=c;E(a.zb,a+" BEGIN");if(b){for(c=0;c<a.b.length;c++)a.b[c][0].call(a.b[c][1],b);a.b.length=0}E(a.zb,a+" END")}p.Pc=function(){return!!this.a};
p.nd=function(){if(this.a)if(ga(this.a.abort))this.a.abort();else if(ga(this.a.executeSql))this.a.executeSql("ABORT",[],aa(),ba(!0));else throw new Hd;else throw new Id("No active transaction");};function P(a,b,c){var d=a.k.shift();c=!!c;d?d[0].call(d[1],b,c,function(b,c){P(a,b,c)}):c?a.t(b):a.A(b)}function Jd(a,b,c){a.k.push([b,c])}function Q(a,b,c){a.a?b.call(c,a.a):a.b.push([b,c])}p.A=function(a){E(this.zb,this+" SUCCESS");Fd.v.A.call(this,a);Kd(this)};
p.t=function(a){E(this.zb,this+" ERROR");Fd.v.t.call(this,a);Kd(this)};function Kd(a){a.S.length=0;a.a=null;a.ia=a.ia}function S(a){var b="";a.ia&&(b=a.a?"!":"",b+="["+a.ia+"]");return a.d+b}function Ld(a,b){var c=new Fd(a);P(c,b);return c}p.toString=function(){return"Request:"+S(this)};p.valueOf=l("ia");p.toJSON=function(){var a=this.ia||"";return{method:this.d?this.d.split(":"):[],branchNo:parseFloat(a.match(/B(\d+)/)[1]),transactionNo:parseFloat(a.match(/T(\d+)/)[1]),requestNo:parseFloat(a.match(/R(\d+)/)[1])}};function Md(a,b,c,d,e,f,g){this.name=a;if(!x(this.name))throw new N("store name must be a string");this.keyPath=t(b)?b:null;this.d=w(this.keyPath);if(null!==this.keyPath&&!x(this.keyPath)&&!this.d)throw new N("keyPath must be a string or array");this.autoIncrement=c;var h;if(null!=d){h=xd(d);if(!t(h))throw new N('type "'+d+'" for primary key in store "'+this.name+'" is invalid.');if(this.d)throw new N('composite key for store "'+this.name+'" must not specified type');}this.type=null!=h?h:this.autoIncrement?
"INTEGER":void 0;this.c=x(this.keyPath)?this.keyPath.split("."):[];this.indexes=e||[];this.na=!!f;this.Jc=!!g;this.e=x(this.type)?this.type:yd;this.b=v(this.keyPath)?this.keyPath.join(","):x(this.keyPath)?this.keyPath:"_ROWID_";this.a=Ea(this.b)}p=Md.prototype;p.na=!1;p.Jc=!1;p.toJSON=function(){for(var a=[],b=0;b<this.indexes.length;b++)a.push(this.indexes[b].toJSON());return{name:this.name,keyPath:this.keyPath,autoIncrement:this.autoIncrement,type:this.type,indexes:a}};
function Nd(a){var b="name keyPath autoIncrement type indexes dispatchEvents fixed Sync".split(" "),c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ia(b,c))throw new N('Unknown attribute "'+c+'"');b=[];c=a.indexes||[];if(v(c))for(var d=0;d<c.length;d++){var e;e=c[d];var f="name unique type keyPath multiEntry generator".split(" "),g=void 0;for(g in e)if(e.hasOwnProperty(g)&&-1==Ia(f,g))throw new N("Unknown field: "+g+" in "+T(e));e=new wd(e.keyPath,e.type,e.unique,e.multiEntry,e.name,e.generator);t(e.keyPath)&&
e.keyPath===a.keyPath||b.push(e)}return new Md(a.name,a.keyPath,a.autoIncrement,"undefined"===a.type||"null"===a.type?void 0:a.type,b,a.dispatchEvents,a.fixed)}function Od(a,b,c,d,e,f,g){a=Pd(a,b,c,d,e,f,g);b="";0!=c&&(b+="SELECT "+a.select);b+=" FROM "+a.Aa;a.p&&(b+=" WHERE "+a.p);a.group&&(b+=" GROUP BY "+a.group);a.aa&&(b+=" ORDER BY "+a.aa);return b}
function Pd(a,b,c,d,e,f,g){var h={select:"",Aa:"",p:"",group:"",aa:""},k=a.b,n=a.a,m=null;d!==k&&x(d)&&(m=Qd(a,d));var q=!!m,u=d||k,s=Ea(u),G=q?m.type:a.type,K=q&&m.multiEntry;h.Aa=Rd(a);4===c?h.select="COUNT("+n+")":1===c?(h.select=n,null!=d&&d!=k&&(h.select+=", "+s)):h.select="*";d=g?"DISTINCT ":"";k=[];K?(K=Ea("ydn.db.me:"+a.getName()+":"+m.getName()),h.select=4===c?"COUNT("+d+K+"."+s+")":1===c?Rd(a)+"."+n+", "+K+"."+s:Rd(a)+".*, "+K+"."+s+" AS "+u,h.Aa=K+" INNER JOIN "+Rd(a)+" USING ("+n+")",
null!=e&&(nd(K+"."+s,G,e,k,b),0<k.length&&(h.p=h.p?h.p+(" AND "+k.join(" AND ")):k.join(" AND ")))):null!=e&&(nd(s,G,e,k,b),0<k.length&&(h.p=h.p?h.p+(" AND "+k.join(" AND ")):k.join(" AND ")));q&&(!m.unique&&g)&&(h.group=s);a=f?"DESC":"ASC";h.aa=s+" "+a;q&&(h.aa+=", "+n+" "+a);return h}p.Oa=function(){return Nd(this.toJSON())};p.index=function(a){return this.indexes[a]||null};function Qd(a,b){return Oa(a.indexes,function(a){return a.name==b})}
function Sd(a,b){return b===a.keyPath?!0:Na(a.indexes,function(a){return a.name==b})}function Rd(a){return Ea(a.name)}
p.hint=function(a){if(!a)return this;var b=this.autoIncrement,c=v(this.keyPath)?Sa(this.keyPath):this.keyPath,d=this.type,e=Ma(this.indexes,function(a){return a.Oa()});t(a.type)||"TEXT"!=d||(d=void 0);v(a.keyPath)&&(x(c)&&c==a.keyPath.join(","))&&(c=Sa(a.keyPath));for(var f=0,g=a.indexes.length;f<g;f++)if(a.indexes[f].e)for(var h=a.indexes[f].getName(),k=e.length-1;0<=k;k--)if(0<=h.indexOf(e[k].getName())){e[k]=a.indexes[f].Oa();break}for(f=0;f<e.length;f++)(g=Qd(a,e[f].getName()))&&(e[f]=e[f].hint(g));
return new Md(a.name,c,b,d,e)};p.getName=l("name");function Td(a,b,c){if(!a.keyPath&&null!=c)return c;if(a.d){c=[];for(var d=0;d<a.keyPath.length;d++)c.push(oc(b,a.keyPath[d]));return c}if(a.keyPath)return Xa(b,a.c)}function Ud(a,b,c){for(var d=0;d<a.c.length;d++){var e=a.c[d];if(d==a.c.length-1){b[e]=c;break}t(b[e])||(b[e]={});b=b[e]}}
function Vd(a,b,c){var d=[],e=[];c=t(c)?c:Td(a,b);t(c)&&(e.push(a.a),d.push(od(c,a.type)));for(var f=0;f<a.indexes.length;f++){var g=a.indexes[f];if(!g.multiEntry&&g.name!==a.keyPath&&"_default_"!=g.name){var h=zd(g,b);null!=h&&(d.push(od(h,g.type)),e.push(g.b))}}a.Jc||(d.push(T(b)),e.push("_default_"));a=[];for(f=d.length-1;0<=f;f--)a[f]="?";return{mc:e,Bc:a,G:d,key:c}}
function Wd(a,b){if(!b)return"missing store: "+a.name;if(a.name!=b.name)return"store name, expect: "+a.name+", but: "+b.name;var c=Dd(a.keyPath,b.keyPath);if(c)return"keyPath, "+c;if(t(a.autoIncrement)&&t(b.autoIncrement)&&a.autoIncrement!=b.autoIncrement)return"autoIncrement, expect:  "+a.autoIncrement+", but: "+b.autoIncrement;if(a.indexes.length!=b.indexes.length)return"indexes length, expect:  "+a.indexes.length+", but: "+b.indexes.length;if(t(a.type)&&t(b.type)&&(w(a.type)?!Ua(a.type,b.type):
a.type!=b.type))return"data type, expect:  "+a.type+", but: "+b.type;for(c=0;c<a.indexes.length;c++){var d=Qd(b,a.indexes[c].name),e;e=a.indexes[c];if(d)if(e.name!=d.name)e="name, expect: "+e.name+", but: "+d.name;else{var f=Dd(e.keyPath,d.keyPath);e=f?"keyPath, "+f:null!=e.unique&&null!=d.unique&&e.unique!=d.unique?"unique, expect: "+e.unique+", but: "+d.unique:null!=e.multiEntry&&null!=d.multiEntry&&e.multiEntry!=d.multiEntry?"multiEntry, expect: "+e.multiEntry+", but: "+d.multiEntry:t(e.type)&&
t(d.type)&&(w(e.type)?!Ua(e.type,d.type):e.type!=d.type)?"data type, expect: "+e.type+", but: "+d.type:""}else e="no index for "+e.name;if(0<e.length)return'index "'+a.indexes[c].name+'" '+e}return""}function Xd(a,b){if(b)for(var c=0;c<a.indexes.length;c++){var d=a.indexes[c],e=b;if(d.d){var f=d.d(e),g=typeof f;if("string"==g||"number"==g||"array"==g||"undefined"==g||f instanceof Date){for(g=0;g<d.a.length-1;g++)z(e[d.a[g]])||(e[d.a[g]]={});e[d.a[d.a.length-1]]=f}}}};function Yd(a,b){var c,d=b;if(z(a)){c=["version","stores"];for(var e in a)if(a.hasOwnProperty(e)&&-1==Ia(c,e))throw new N("Unknown field: "+e+" in schema.");c=a.version;d=[];e=a.stores||[];if(!v(e))throw new N("stores must be array");for(var f=0;f<e.length;f++){var g=Nd(e[f]);if(-1!=Pa(d,function(a){return a.name==g.name}))throw new N('duplicate store name "'+g.name+'".');d.push(g)}}else x(a)?c=0==a.length?void 0:parseFloat(a):y(a)&&(c=a);if(t(c)){if(!y(c)||0>c)throw new N("Invalid version: "+c+" ("+
a+")");isNaN(c)&&(c=void 0)}if(t(b)&&(!v(b)||0<b.length&&!(b[0]instanceof Md)))throw new N("stores");this.version=c;this.Da=!t(this.version);this.stores=d||[]}p=Yd.prototype;p.toJSON=function(){var a=Ma(this.stores,function(a){return a.toJSON()}),b={};b.stores=a;t(this.version)&&(b.version=this.version);return b};p.Da=!1;p.R=ba(!1);function Zd(a){return Ma(a.stores,function(a){return a.name})}p.ra=function(a){return this.stores[a]||null};p.count=function(){return this.stores.length};
function U(a,b){return Oa(a.stores,function(a){return a.name==b})}function $d(a,b){return Na(a.stores,function(a){return a.name==b})}function ae(a,b,c){if(!b||a.stores.length!=b.stores.length)return"Number of store: "+a.stores.length+" vs "+b.stores.length;for(var d=0;d<a.stores.length;d++){var e=U(b,a.stores[d].name),e=e&&c?e.hint(a.stores[d]):e,e=Wd(a.stores[d],e);if(0<e.length)return'store: "'+a.stores[d].name+'" '+e}return""};function be(a){Error.captureStackTrace?Error.captureStackTrace(this,be):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ArgumentException"}B(be,Error);function Hd(a){Error.captureStackTrace?Error.captureStackTrace(this,Hd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotSupportedException"}B(be,Error);Hd.prototype.name="ydn.error.NotSupportedException";
function ce(a){Error.captureStackTrace?Error.captureStackTrace(this,ce):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotImplementedException"}B(ce,Error);function de(a){Error.captureStackTrace?Error.captureStackTrace(this,de):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}B(de,Error);de.prototype.name="ydn.InternalError";
function vd(a){Error.captureStackTrace?Error.captureStackTrace(this,vd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ConstraintError"}B(vd,Error);vd.prototype.name="ydn.error.ConstraintError";function ee(a){Error.captureStackTrace?Error.captureStackTrace(this,ee):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationException"}B(be,Error);
function fe(a){Error.captureStackTrace?Error.captureStackTrace(this,fe):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationError"}B(fe,Error);function ge(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);}function he(){}
function ie(a,b,c){switch(typeof b){case "string":je(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(null==b){c.push("null");break}if(v(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),ie(a,b[f],c),e=",";c.push("]");break}c.push("{");d="";for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(f=b[e],"function"!=typeof f&&(c.push(d),je(e,c),c.push(":"),ie(a,f,c),d=","));c.push("}");
break;case "function":break;default:throw Error("Unknown type: "+typeof b);}}var ke={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},le=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function je(a,b){b.push('"',a.replace(le,function(a){if(a in ke)return ke[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return ke[a]=e+b.toString(16)}),'"')};H("ydn");var me="undefined"!=typeof r.JSON;function ne(a){return!x(a)||/^[\s\xa0]*$/.test(a)?{}:me?JSON.parse(a):ge(a)}function V(a){var b;try{b=T(a)}catch(c){b=""}return b?b.substr(0,70)+(70<b.length?"...":""):""}function T(a){if(me)a=JSON.stringify(a);else{var b=[];ie(new he,a,b);a=b.join("")}return a};function oe(a,b){t(a)&&5242880<a&&D(this.m,"storage size request ignored, use Quota Management API instead");this.q=null;this.Wa=b||NaN}
oe.prototype.Ja=function(a,b){function c(a,c,d){E(e.m,(d?"changing":"upgrading")+" version to "+a.version+" from "+g);for(d=0;d<b.stores.length;d++)pe(e,a,c,b.stores[d]);c=a.objectStoreNames;var f=c.length;for(d=0;d<f;d++)$d(b,c[d])||(a.deleteObjectStore(c[d]),E(e.m,"store: "+c[d]+" deleted."))}function d(a,b){f.Pa?D(e.m,"database already set."):t(b)?(D(e.m,b?b.message:"Error received."),e.q=null,f.t(b)):(e.q=a,e.q.onabort=function(a){F(e.m,e+": abort");e.bb(a.target.kc)},e.q.onerror=function(a){F(e.m,
e+": error");e.bb(a.target.kc)},e.q.onversionchange=function(a){F(e.m,e+" closing connection for onversionchange to: "+a.version);e.q&&(e.q.onabort=null,e.q.onblocked=null,e.q.onerror=null,e.q.onversionchange=null,e.q.close(),e.q=null,e.Cb(a.target.kc))},f.A(parseFloat(g)))}var e=this,f=new I,g=void 0,h=b.version;E(e.m,"Opening database: "+a+" ver: "+(b.Da?"auto":h));var k;k=t(h)?qe.open(a,h):qe.open(a);k.onsuccess=function(f){var h=f.target.result;t(g)||(g=h.version);E(e.m,"Database: "+h.name+", ver: "+
h.version+" opened.");if(b.Da)e.Q(function(f){if(b instanceof re)for(var g=0;g<f.stores.length;g++)$d(b,f.stores[g].getName())||se(b,f.stores[g].Oa());f=ae(b,f);if(0<f.length){E(e.m,"Schema change require for difference in "+f);var k=y(h.version)?h.version+1:1;if("IDBOpenDBRequest"in r){h.close();var n=qe.open(a,k);n.onupgradeneeded=function(a){a=a.target.result;E(e.m,"re-open for version "+a.version);c(a,n.transaction,!1)};n.onsuccess=function(a){d(a.target.result)};n.onerror=function(){E(e.m,e+
": fail.");d(null)}}else{var q=h.setVersion(k+"");q.a=function(a){D(e.m,"migrating from "+h.version+" to "+k+" failed.");d(null,a)};q.onsuccess=function(){q.transaction.oncomplete=ea;c(h,q.transaction,!0)};var ea=function(){var b=qe.open(a);b.onsuccess=function(a){a=a.target.result;E(e.m,e+": OK.");d(a)};b.onerror=function(){E(e.m,e+": fail.");d(null)}};null!=q.transaction&&(q.transaction.oncomplete=ea)}}else d(h)},void 0,h);else if(b.version>h.version){var k=h.setVersion(b.version);k.a=function(a){D(e.m,
"migrating from "+h.version+" to "+b.version+" failed.");d(null,a)};k.onsuccess=function(){c(h,k.transaction,!0)}}else b.version==h.version?E(e.m,"database version "+h.version+" ready to go"):D(e.m,"connected database version "+h.version+" is higher than requested version."),e.Q(function(a){a=ae(b,a);0<a.length?(E(e.m,a),d(null,new vd("different schema: "+a))):d(h)},void 0,h)};k.onupgradeneeded=function(a){a=a.target.result;g=NaN;E(e.m,"upgrade needed for version "+a.version);c(a,k.transaction,!1)};
k.onerror=function(c){Yb(e.m,'open request to database "'+a+'" '+(t(b.version)?" with version "+b.version:"")+" cause error of "+k.error.name);d(null,c)};k.onblocked=function(c){Yb(e.m,"database "+a+" "+b.version+" block, close other connections.");d(null,c)};y(this.Wa)&&!isNaN(this.Wa)&&dd(function(){"done"!=k.readyState&&(Yb(e.m,e+": database state is still "+k.readyState),d(null,new te("connection timeout after "+e.Wa)))},this.Wa);return f};
var qe=r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.moz_indexedDB||r.msIndexedDB;p=oe.prototype;p.Wa=18E4;p.Cb=aa();p.bb=aa();p.ta=ba("indexeddb");p.hc=function(){return this.q||null};p.ab=function(){return!!this.q};p.m=H("ydn.db.con.IndexedDb");p.q=null;p.Bb=function(){return this.q?parseFloat(this.q.version):void 0};
p.Q=function(a,b,c){c=c||this.q;if(t(b)){if(null===b){if(0==c.objectStoreNames.length){a(new Yd(c.version));return}throw new de;}c=b.db}else{b=[];for(var d=c.objectStoreNames.length-1;0<=d;d--)b[d]=c.objectStoreNames[d];if(0==b.length){a(new Yd(c.version));return}b=c.transaction(b,J)}for(var e=c.objectStoreNames,f=[],g=e.length,d=0;d<g;d++){for(var h=b.objectStore(e[d]),k=[],n=0,m=h.indexNames.length;n<m;n++){var q=h.index(h.indexNames[n]);k[n]=new wd(q.keyPath,void 0,q.unique,q.multiEntry,q.name)}f[d]=
new Md(h.name,h.keyPath,h.autoIncrement,void 0,k)}b=new Yd(c.version,f);a(b)};
function pe(a,b,c,d){function e(){var a={autoIncrement:!!d.autoIncrement};null!=d.keyPath&&(a.keyPath=d.keyPath);try{return b.createObjectStore(d.getName(),a)}catch(c){if("InvalidAccessError"==c.name)throw new ue("creating store for "+d.getName()+" of keyPath: "+d.keyPath+" and autoIncrement: "+d.autoIncrement);if("ConstraintError"==c.name)throw new vd("creating store for "+d.getName());throw c;}}F(a.m,"Creating Object Store for "+d.getName()+" keyPath: "+d.keyPath);if(b.objectStoreNames.contains(d.getName()))if(c=
c.objectStore(d.getName()),Dd(d.keyPath||"",c.keyPath||""))b.deleteObjectStore(d.getName()),D(a.m,"store: "+d.getName()+" deleted due to keyPath change."),c=e();else if(fa(c.autoIncrement)&&fa(d.autoIncrement)&&c.autoIncrement!=d.autoIncrement)b.deleteObjectStore(d.getName()),D(a.m,"store: "+d.getName()+" deleted due to autoIncrement change."),c=e();else{for(var f=c.indexNames,g=0,h=0,k=0,n=0;n<d.indexes.length;n++){var m=d.indexes[n],q=!1;if(f.contains(m.name)){var u=c.index(m.name),s=null!=u.unique&&
null!=m.unique&&u.unique!=m.unique,G=null!=u.multiEntry&&null!=m.multiEntry&&u.multiEntry!=m.multiEntry,u=null!=u.keyPath&&null!=m.keyPath&&!!Dd(u.keyPath,m.keyPath);if(s||G||u)c.deleteIndex(m.name),q=!0,g--,k++}else q=!0;q&&(m.unique||m.multiEntry?(q={unique:m.unique,multiEntry:m.multiEntry},c.createIndex(m.name,m.keyPath,q)):c.createIndex(m.name,m.keyPath),g++)}for(n=0;n<f.length;n++)Sd(d,f[n])||(c.deleteIndex(f[n]),h++);F(a.m,"Updated store: "+c.name+", "+g+" index created, "+h+" index deleted, "+
k+" modified.")}else{c=e();for(n=0;n<d.indexes.length;n++)m=d.indexes[n],F(a.m,"Creating index: "+m.name+" multiEntry: "+m.multiEntry),m.unique||m.multiEntry?(q={unique:m.unique,multiEntry:m.multiEntry},c.createIndex(m.name,m.keyPath,q)):c.createIndex(m.name,m.keyPath);F(a.m,"Created store: "+c.name+" keyPath: "+c.keyPath)}}
p.kb=function(a,b,c,d){var e=this.q;if(!b){b=[];for(var f=e.objectStoreNames.length-1;0<=f;f--)b[f]=e.objectStoreNames[f]}0==b.length?a(null):(b=e.transaction(b,c),b.oncomplete=function(a){d("complete",a)},b.onabort=function(a){d("abort",a)},a(b),a=null)};p.Ab=function(){F(this.m,this+" closing connection");this.q.close()};p.toString=function(){return"IndexedDB:"+(this.q?this.q.name+":"+this.q.version:"")};function ve(a){Error.captureStackTrace?Error.captureStackTrace(this,ve):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ConstraintError"}B(ve,Error);ve.prototype.name="ConstraintError";function we(a){Error.captureStackTrace?Error.captureStackTrace(this,we):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.InvalidKeyException"}B(we,Error);
function xe(a){Error.captureStackTrace?Error.captureStackTrace(this,xe):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.VersionError"}B(xe,Error);xe.prototype.name="ydn.db.VersionError";function ye(a){Error.captureStackTrace?Error.captureStackTrace(this,ye):this.stack=Error().stack||"";a&&(this.message=String(a))}B(ye,Error);ye.prototype.name="ydn.db.InternalError";
function Id(a){Error.captureStackTrace?Error.captureStackTrace(this,Id):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidStateError"}B(Id,Error);function ue(a){Error.captureStackTrace?Error.captureStackTrace(this,ue):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidAccessError"}B(ue,Error);function ze(a){Error.captureStackTrace?Error.captureStackTrace(this,ze):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="NotFoundError"}
B(ze,Error);ze.prototype.name="NotFoundError";function Ae(a,b){Error.captureStackTrace?Error.captureStackTrace(this,Ae):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message+" ["+a.code+"]";this.name="SQLError"}B(Ae,Error);function Be(a,b){Error.captureStackTrace?Error.captureStackTrace(this,Be):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message;this.name="SecurityError"}B(Be,Error);
function Ce(a){Error.captureStackTrace?Error.captureStackTrace(this,Ce):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.SqlParseError"}B(Ce,Error);function te(a){Error.captureStackTrace?Error.captureStackTrace(this,te):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.TimeoutError"}B(te,Error);function De(a){this.a=t(a)?a:4194304}p=De.prototype;
p.Ja=function(a,b){function c(b,c){var f=b.version?parseInt(b.version,10):0,f=c.Da?isNaN(f)?1:f+1:c.version;F(e.r,a+": changing version from "+b.version+" to "+f);var g=!1,h=0;b.changeVersion(b.version,f+"",function(a){e.Q(function(b){g=!0;for(var d=0;d<c.count();d++){var f=U(b,c.ra(d).getName()),f=f?f.hint(c.ra(d)):null;Ee(e,a,c.ra(d),function(a){a&&h++},f)}for(d=0;d<b.count();d++)f=b.ra(d),$d(c,f.getName())||(c instanceof re?se(c,f):(f="DROP TABLE "+Rd(f),E(e.r,f),a.executeSql(f,[],aa(),function(a,
b){throw b;})))},a,b)},function(a){throw a;},function(){if(g){var f=".";h!=c.stores.length&&(f=" but unexpected stores exists.");F(e.r,a+":"+b.version+" ready"+f);d(b)}else D(e.r,a+": changing version voided.")})}function d(a,b){t(b)?(e.D=null,g.t(b)):(e.D=a,g.A(parseFloat(f)))}var e=this,f=NaN,g=new I,h=null;try{h=r.openDatabase(a,"",a,this.a)}catch(k){if("SECURITY_ERR"==k.name)D(this.r,"SECURITY_ERR for opening "+a),h=null,this.ic=new Be(k);else throw k;}if(h){var f=h.version,n="database "+a+(0==
h.version.length?"":" version "+h.version);null!=b.version&&b.version==h.version?(Zb(e.r,"Existing "+n+" opened as requested."),d(h)):this.Q(function(a){(a=ae(b,a,!0))?(0==h.version.length?Zb(e.r,"New "+n+" created."):b.Da?Zb(e.r,"Existing "+n+" opened and schema change for "+a):Zb(e.r,"Existing "+n+" opened and  schema change to version "+b.version+" for "+a),c(h,b)):(Zb(e.r,"Existing "+n+" with same schema opened."),d(h))},null,h)}else d(null,this.ic);return g};p.ta=ba("websql");p.ic=null;p.D=null;
p.hc=function(){return this.D||null};p.r=H("ydn.db.con.WebSql");p.Cb=aa();p.bb=aa();
function Fe(a){var b=a.e,c="CREATE TABLE IF NOT EXISTS "+Rd(a)+" (",d=a.a,c=c+(d+" "+b+" PRIMARY KEY ");a.autoIncrement&&(c+=" AUTOINCREMENT ");for(var c=c+" ,_default_ BLOB",e=[],f=[d],g=0,h=a.indexes.length;g<h;g++){var k=a.index(g),n="";if(k.multiEntry)n=k.unique?" UNIQUE ":"",k="CREATE TABLE IF NOT EXISTS "+Ea("ydn.db.me:"+a.getName()+":"+k.getName())+" ("+d+" "+b+", "+k.b+" "+k.g+n+")",e.push(k);else{k.unique&&(n=" UNIQUE ");var m=k.keyPath;"BLOB"!=k.type&&x(m)&&(m="CREATE "+n+" INDEX IF NOT EXISTS "+
Ea(a.getName()+"-"+k.getName())+" ON "+Rd(a)+" ("+Ea(m)+")",e.push(m));m=k.b;-1==f.indexOf(m)&&(c+=", "+m+" "+k.g+n,f.push(m))}}e.unshift(c+")");return e}p.Bb=function(){return this.D?parseFloat(this.D.version):void 0};
p.Q=function(a,b,c){function d(a,b){throw b;}function e(b,c){if(c&&c.rows){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);if("__WebKitDatabaseInfoTable__"!=e.name&&"sqlite_sequence"!=e.name&&"table"==e.type){var u="sql"in e?e.sql:void 0;F(f.r,"Parsing table schema from SQL: "+u);for(var s=u.substr(u.indexOf("("),u.lastIndexOf(")")).match(/(?:"[^"]*"|[^,])+/g),G=void 0,K,u=[],$=!1,ea=!1,qa=0;qa<s.length;qa++){var Ka=s[qa].match(/\w+|"[^"]+"/g),La=Ma(Ka,function(a){return a.toUpperCase()}),R=
Ba(Ka[0],'"'),Ka=xd(La[1]);if(-1!=La.indexOf("PRIMARY")&&-1!=La.indexOf("KEY")){K=Ka;if(x(R)&&!/^[\s\xa0]*$/.test(R)&&"_ROWID_"!=R){var ua=R.split(","),G=R;1<ua.length&&(G=ua,K=void 0)}-1!=La.indexOf("AUTOINCREMENT")&&($=!0)}else if("_ROWID_"!=R)if("_default_"==R)ea=!0;else{var id="UNIQUE"==La[2];0==R.lastIndexOf(e.tbl_name+"-",0)&&(R=R.substr(e.tbl_name.length+1));La=new wd(R,Ka,id);u.push(La)}}if(0==e.name.lastIndexOf("ydn.db.me:",0)){var mb=e.name.split(":");if(3<=mb.length){var Cb=mb[1],G=new wd(mb[2],
Ka,id,!0),s=Pa(u,function(a){return a.getName()==mb[2]});0<=s?u[s]=G:u.push(G);s=Pa(h,function(a){return a.getName()===Cb});0<=s?(qa=h[s],h[s]=new Md(qa.getName(),qa.keyPath,$,K,u,void 0,!ea)):h.push(new Md(Cb,void 0,!1,void 0,[G]));F(f.r,'multi entry index "'+G.getName()+'" found in '+Cb+(-1==s?"*":""))}else D(f.r,'Invalid multiEntry store name "'+e.name+'"')}else qa=Pa(h,function(a){return a.getName()===e.name}),0<=qa?(s=h[qa].index(0),u.push(s),h[qa]=new Md(e.name,G,$,K,u,void 0,!ea)):(u=new Md(e.name,
G,$,K,u,void 0,!ea),h.push(u))}}d=new Yd(g,h);a(d)}}var f=this,g=(c=c||this.D)&&c.version?parseFloat(c.version):void 0,g=isNaN(g)?void 0:g,h=[];b?b.executeSql("SELECT * FROM sqlite_master",[],e,d):c.readTransaction(function(b){f.Q(a,b,c)},function(a){Yb(f.r,"opening tx: "+a.message);throw a;},e)};
function Ee(a,b,c,d,e){function f(a){b.executeSql(a,[],function(){g++;g==h.length&&(d(!0),d=null)},function(b,e){g++;g==h.length&&(d(!1),d=null);throw new Ae(e,"SQLError creating table: "+c.name+" "+e.message+' for executing "'+a);})}var g=0,h=Fe(c),k="Create";if(e){e=Wd(c,e);if(0==e.length){F(a.r,"same table "+c.name+" exists.");d(!0);d=null;return}k="Modify";D(a.r,"table: "+c.name+" has changed by "+e+" additionallly TABLE ALTERATION is not implemented, dropping old table.");h.unshift("DROP TABLE IF EXISTS "+
Ea(c.name))}F(a.r,k+" table: "+c.name+": "+h.join(";"));for(a=0;a<h.length;a++)f(h[a])}p.ab=function(){return!!this.D};p.Ab=aa();p.kb=function(a,b,c,d){function e(a){F(h.r,h+": Tx "+c+" request cause error.");d("abort",a)}function f(){d("complete",{type:"complete"})}function g(b){a(b)}var h=this;null===this.D&&(a(null),d("abort",this.ic));c==J?this.D.readTransaction(g,e,f):c==mc?this.D.changeVersion(this.D.version,this.D.version+1+"",g,e,f):this.D.transaction(g,e,f)};
function Ge(a){function b(){c.r.log(Qb,"all tables in "+a+" deleted.",void 0)}var c=new De,d=new re;E(c.r,"deleting websql database: "+a);d=c.Ja(a,d);d.ea(function(){c.kb(function(b){b.executeSql('SELECT * FROM sqlite_master WHERE type = "table"',[],function(d,g){if(g&&g.rows){for(var h=g.rows.length,k=0,n=0;n<h;n++){var m=g.rows.item(n);"__WebKitDatabaseInfoTable__"!=m.name&&"sqlite_sequence"!=m.name&&(k++,F(c.r,"deleting table: "+m.name),b.executeSql("DROP TABLE "+m.name))}E(c.r,k+' tables deleted from "'+
a+'"')}},function(a,b){throw b;})},[],L,b)});d.lc(function(){D(c.r,"Connecting "+a+" failed.")})}p.toString=function(){return"WebSql:"+(this.D?":"+this.D.version:"")};function He(a,b,c){a=["ydn.db",a];t(b)&&(a.push(b),t(c)&&(a.push(c),t(void 0)&&a.push(qc(void 0))));return a.join("^|")};function Ie(a){this.J=a||Je}function Je(a,b){return String(a)<String(b)?-1:String(a)>String(b)?1:0}p=Ie.prototype;p.C=null;p.J=null;p.$=null;p.Z=null;
function Ke(a,b){if(null==a.C)a.C=new Le(b),a.$=a.C,a.Z=a.C;else{var c=null;Me(a,function(a){var e=null;0<this.J(a.value,b)?(e=a.left,null==a.left&&(c=new Le(b,a),a.left=c,a==this.$&&(this.$=c))):0>this.J(a.value,b)&&(e=a.right,null==a.right&&(c=new Le(b,a),a.right=c,a==this.Z&&(this.Z=c)));return e});c&&(Me(a,function(a){a.count++;return a.parent},c.parent),Ne(a,c.parent))}}
function Oe(a,b){Me(a,function(a){var d=null;0<this.J(a.value,b)?d=a.left:0>this.J(a.value,b)?d=a.right:Pe(this,a);return d})}p.clear=function(){this.Z=this.$=this.C=null};p.contains=function(a){var b=!1;Me(this,function(c){var d=null;0<this.J(c.value,a)?d=c.left:0>this.J(c.value,a)?d=c.right:b=!0;return d});return b};p.Qa=function(){return this.C?this.C.count:0};p.ob=function(){var a=[];Qe(this,function(b){a.push(b)});return a};
function Qe(a,b){if(a.C){var c,d=c=Te(a);for(c=c.left?c.left:c;null!=d;)if(null!=d.left&&d.left!=c&&d.right!=c)d=d.left;else{if(d.right!=c&&b(d.value))break;var e=d,d=null!=d.right&&d.right!=c?d.right:d.parent;c=e}}}function Me(a,b,c){for(c=c?c:a.C;c&&null!=c;)c=b.call(a,c)}
function Ne(a,b){Me(a,function(a){var b=a.left?a.left.height:0,e=a.right?a.right.height:0;1<b-e?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&Ue(this,a.left),Ve(this,a)):1<e-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&Ve(this,a.right),Ue(this,a));b=a.left?a.left.height:0;e=a.right?a.right.height:0;a.height=Math.max(b,e)+1;return a.parent},b)}
function Ue(a,b){We(b)?(b.parent.left=b.right,b.right.parent=b.parent):Xe(b)?(b.parent.right=b.right,b.right.parent=b.parent):(a.C=b.right,a.C.parent=null);var c=b.right;b.right=b.right.left;null!=b.right&&(b.right.parent=b);c.left=b;b.parent=c;c.count=b.count;b.count-=(c.right?c.right.count:0)+1}
function Ve(a,b){We(b)?(b.parent.left=b.left,b.left.parent=b.parent):Xe(b)?(b.parent.right=b.left,b.left.parent=b.parent):(a.C=b.left,a.C.parent=null);var c=b.left;b.left=b.left.right;null!=b.left&&(b.left.parent=b);c.right=b;b.parent=c;c.count=b.count;b.count-=(c.left?c.left.count:0)+1}
function Pe(a,b){if(null!=b.left||null!=b.right){var c=null,d;if(null!=b.left){d=Ye(a,b.left);Me(a,function(a){a.count--;return a.parent},d);if(d!=b.left){if(d.parent.right=d.left)d.left.parent=d.parent;d.left=b.left;d.left.parent=d;c=d.parent}d.parent=b.parent;d.right=b.right;d.right&&(d.right.parent=d);b==a.Z&&(a.Z=d)}else{d=Te(a,b.right);Me(a,function(a){a.count--;return a.parent},d);if(d!=b.right){if(d.parent.left=d.right)d.right.parent=d.parent;d.right=b.right;d.right.parent=d;c=d.parent}d.parent=
b.parent;d.left=b.left;d.left&&(d.left.parent=d);b==a.$&&(a.$=d)}d.count=b.count;We(b)?b.parent.left=d:Xe(b)?b.parent.right=d:a.C=d;Ne(a,c?c:d)}else Me(a,function(a){a.count--;return a.parent},b.parent),We(b)?(b.parent.left=null,b==a.$&&(a.$=b.parent),Ne(a,b.parent)):Xe(b)?(b.parent.right=null,b==a.Z&&(a.Z=b.parent),Ne(a,b.parent)):a.clear()}function Te(a,b){if(!b)return a.$;var c=b;Me(a,function(a){var b=null;a.left&&(b=c=a.left);return b},b);return c}
function Ye(a,b){if(!b)return a.Z;var c=b;Me(a,function(a){var b=null;a.right&&(b=c=a.right);return b},b);return c}function Le(a,b){this.value=a;this.parent=b?b:null;this.count=1}Le.prototype.left=null;Le.prototype.right=null;Le.prototype.height=1;function Xe(a){return!!a.parent&&a.parent.right==a}function We(a){return!!a.parent&&a.parent.left==a};function Ze(a){this.J=a||Je}B(Ze,Ie);function $e(a,b,c){if(a.C){var d;if(c instanceof Le)d=c;else if(c){if(Me(a,function(a){var b=null;0<this.J(a.value,c)?(b=a.left,d=a):0>this.J(a.value,c)?b=a.right:d=a;return b}),!d)return}else d=Te(a);a=d;for(var e=d.left?d.left:d;null!=a;)if(null!=a.left&&a.left!=e&&a.right!=e)a=a.left;else{if(a.right!=e&&b(a))return;var f=a;a=null!=a.right&&a.right!=e?a.right:a.parent;e=f}b(null)}}
function af(a,b,c){if(a.C){var d;if(c instanceof Le)d=c;else if(c){if(Me(a,ma(function(a){var b=null;0<this.J(a.value,c)?b=a.left:(0>this.J(a.value,c)&&(b=a.right),d=a);return b},a)),!d)return}else d=Ye(a);a=d;for(var e=d.right?d.right:d;null!=a;)if(null!=a.right&&a.right!=e&&a.left!=e)a=a.right;else{if(a.left!=e&&b(a))return;var f=a;a=null!=a.left&&a.left!=e?a.left:a.parent;e=f}b(null)}};function W(a,b){this.key=a;this.a=b}W.prototype.toString=function(){return"ydn.db.con.simple.Node:"+this.key+(null!=this.a?":"+this.a:"")};function bf(a,b){var c=O(a.key,b.key);return 0===c?null!=a.a?null!=b.a?O(a.a,b.a):1:null!=b.a?-1:0:c};function cf(a,b,c){this.g=a;this.c=b;this.d=c;this.a={};a=this.d.keyPath;this.b=v(a)?a.join(","):a||"_ROWID_";this.a[this.b]=null;this.e=He(this.g,this.d.getName(),this.b)+"^|"}
function df(a,b){var c=b||a.b;if(!a.a[c]){a.a[c]=new Ze(bf);for(var d=a.c.length,e=0;e<d;e++){var f=a.c.key(e);if(null!==f&&0==f.lastIndexOf(a.e,0)){var g=tc(f.substr(a.e.length));if(c==a.b)Ke(a.a[c],new W(g));else{var h=a.c.getItem(f);if(null!==h)if(f=Qd(a.d,c),h=ne(h),h=zd(f,h),f.multiEntry){if(v(h))for(f=0;f<h.length;f++)Ke(a.a[c],new W(h[f],g))}else Ke(a.a[c],new W(h,g))}}}}return a.a[c]}
function ef(a,b,c){for(var d in a.a){var e=a.a[d];if(e)if(d==a.b)Oe(e,new W(b));else{var f=Qd(a.d,d),f=oc(c,f.keyPath);Oe(e,new W(b,f))}}}function ff(a){for(var b in a.a){var c=a.a[b];c&&c.clear()}a.a={}}
function gf(a,b,c,d){if(null==b&&(a.d.keyPath&&(b=Td(a.d,c)),a.d.autoIncrement&&null==b)){b=a.e+qc(void 0);var e=ne(a.c.getItem(b));e.key_count||(e.key_count=0);e.key_count++;a.c.setItem(b,T(e));b=e.key_count}if(d)if(a.a[a.b]){if(a.a[a.b].contains(qc(b)))return null}else if(null!==a.c.getItem(a.e+qc(b)))return null;a.c.setItem(a.e+qc(b),T(c));d=b;for(var f in a.a)if(e=a.a[f])if(f==a.b)Ke(e,new W(d));else{var g=Qd(a.d,f),g=oc(c,g.keyPath);null!=g&&Ke(e,new W(d,g))}return b}
function hf(a,b){var c=a.e+qc(b),d=a.c.getItem(c);if(null===d)return 0;a.c.removeItem(c);c=ne(d);ef(a,b,c);return 1}cf.prototype.clear=function(){ff(this);jf(this)};function kf(a,b){var c=a.c.getItem(a.e+qc(b)),d=void 0;if(null!==c)for(var d=ne(c),c=0,e=a.d.indexes.length;c<e;c++){var f=a.d.index(c);if("DATE"==f.type){var g=zd(f,d);g&&Ad(f,d,new Date(g))}}return d}cf.prototype.getName=function(){return this.d.getName()};
function lf(a,b,c){b=b||a.b;a=df(a,b);var d=null,e=null,f=0,g=!1,h=!1;null!=c&&(null!=c.lower&&(d=new W(c.lower)),null!=c.upper&&(e=new W(c.upper)),g=c.lowerOpen,h=c.upperOpen);$e(a,function(a){if(null!=a&&(a=a.value,!g||null==d||0!=O(a.key,d.key))){if(null!=e&&(a=O(a.key,e.key),1===a||0===a&&h))return!0;f++}},d);return f}
function jf(a,b){var c=df(a,a.b),d=null,e=null,f=0,g=[],h=[],k=!1,n=!1;null!=b&&(null!=b.lower&&(d=new W(b.lower)),null!=b.upper&&(e=new W(b.upper)),k=b.lowerOpen,n=b.upperOpen);$e(c,function(b){if(null!=b&&(b=b.value,!k||null==d||0!=bf(b,d))){if(null!=e){var c=bf(b,e);if(1===c||0===c&&n)return!0}var c=a.e+qc(b.key),u=a.c.getItem(c);null!==u&&(a.c.removeItem(c),f++,10>g.length&&(g.push(b.key),h.push(ne(u))))}},d);if(10>g.length)for(c=0;c<g.length;c++)ef(a,g[c],h[c]);else ff(a);return f}
function mf(a,b,c,d,e,f,g,h){function k(c){if(c&&(G++,!(G<g))){var d=c.value;if(e){if($&&null!=s&&0==O(d.key,s.key))return;if(null!=u&&(c=O(d.key,u.key),-1===c||0===c&&K))return!0}else{if(K&&null!=u&&0==O(d.key,u.key))return;if(null!=s&&(c=O(d.key,s.key),1===c||0===c&&$))return!0}c=d.key;if(!h||null!=m&&O(m,c))d=q?d.a:c,b?n.push(d):(d=kf(a,d),n.push(d));m=c;if(t(f)&&n.length>=f)return!0}}var n=[],m;c=c||a.b;var q=c!=a.b;c=df(a,c);var u=null,s=null;t(g)||(g=0);var G=-1,K=!1,$=!1;null!=d&&(null!=d.lower&&
(u=q&&e?new W(d.lower,"\uffff"):new W(d.lower)),null!=d.upper&&(s=q&&!e?new W(d.upper,"\uffff"):new W(d.upper)),K=d.lowerOpen,$=d.upperOpen);e?af(c,k,s):$e(c,k,u);return n}cf.prototype.oa=function(a,b,c,d,e){return mf(this,!0,a,b,c,d,e)};cf.prototype.toString=function(){return"ydn.db.con.simple.Store:"+this.g+":"+this.d.getName()};function nf(a,b){this.h=a;this.a=b}function of(a,b,c){dd(function(){b.call(c,this.h)},0,a);return function(){a.a("complete",null);a.a=null;a.h=null}};function pf(){this.clear()}p=pf.prototype;p.hb=function(){return this};p.setItem=function(a,b){t(this.a[a])||(this.keys.push(a.toString()),this.length=this.keys.length);this.a[a]=b};p.getItem=function(a){return t(this.a[a])?this.a[a]:null};p.removeItem=function(a){delete this.a[a];Ra(this.keys,a.toString());this.length=this.keys.length};p.length=0;p.key=function(a){a=this.keys[a];return t(a)?this.a[a]:null};p.clear=function(){this.a={};this.keys=[];this.length=0};function qf(a){this.d=a||new pf;this.b=NaN}p=qf.prototype;p.Ec=H("ydn.db.con.SimpleStorage");p.Bb=l("b");
p.Ja=function(a,b){function c(a,b){dd(function(){b?(E(d.Ec,d+" opening fail"),e.t(b)):(E(d.Ec,d+" version "+d.Bb()+" open"),e.A(a))})}var d=this,e=new I;this.h=this.d.hb(a);this.ma=a;this.a=b;this.c={};var f=He(this.ma);this.b=NaN;var g=ne(this.h.getItem(f));t(g.version)&&!y(g.version)&&(g.version=NaN);if(g)if(g=new Yd(g),ae(this.a,g))if(!this.a.Da&&!isNaN(g.version)&&this.a.version>g.version)c(NaN,new xe("existing version "+g.version+" is larger than "+this.a.version));else{var h=this.a.version;
this.b=t(h)?h:g.version+1;for(h=0;h<this.a.count();h++)var k=this.a.ra(h);if(this.a instanceof re)for(h=0;h<g.count();h++)k=g.ra(h),se(this.a,k);h=this.a.toJSON();h.version=this.b||NaN;this.h.setItem(f,T(h));c(g.version||NaN)}else{for(h=0;h<this.a.count();h++)k=this.a.ra(h);this.b=g.version||NaN;c(this.b)}else g=b.toJSON(),this.b=1,g.version=this.b,this.h.setItem(f,T(g)),c(NaN);return e};p.ab=function(){return!!this.ma};p.hc=function(){return this.h||null};p.Cb=aa();p.bb=aa();p.ta=ba("memory");
p.Ab=aa();p.kb=function(a,b,c,d){a(new nf(this,function(a,b){d(a,b)}))};p.Q=function(a){dd(function(){var b=He(this.ma),b=this.h.getItem(b),b=new Yd(b);a(b)},0,this)};function rf(a,b){var c=U(a.a,b);if(c)a.c[b]||(a.c[b]=new cf(a.ma,a.h,c));else throw new td('store name "'+b+'" not found.');return a.c[b]}p.toString=function(){return"SimpleStorage:"+this.ta()+":"+(this.ma+":"+this.b)};function sf(){qf.call(this,this)}B(sf,qf);sf.prototype.hb=function(){return window.localStorage};sf.prototype.ta=ba("localstorage");function tf(a){var b=new sf,c=new re;b.Ja(a,c);b.Q(function(a){for(var c=0;c<a.stores.length;c++)rf(b,a.stores[c].name).clear()})}function uf(){qf.call(this,this)}B(uf,qf);uf.prototype.hb=function(){return window.sessionStorage};uf.prototype.ta=ba("sessionstorage");
function vf(a){var b=new uf,c=new re;b.Ja(a,c);b.Q(function(a){for(var c=0;c<a.stores.length;c++)rf(b,a.stores[c].name).clear()})};var O=qe&&qe.cmp?ma(qe.cmp,qe):yc;function wf(a,b,c,d){this.a=a;this.b=[];this.c=[];this.g=[];this.s=0;this.Pb=this.O=!1;b&&(this.b=Sa(b.b),this.c=Sa(b.c));null!=c&&(this.b[0]=c);null!=d&&(this.c[0]=d);this.d=function(){throw new td;};this.e=function(){throw new td;};0<this.a.length&&xf(this)}p=wf.prototype;p.s=0;p.O=!1;p.Pb=!1;p.V=H("ydn.db.Cursor");
function yf(a,b){b.K=function(c,e,f){null==c&&(F(a.V,"cursor "+b+" finished."),a.O=!0);a.b[0]=c;a.c[0]=e;a.g[0]=f;a.s++;a.O?(F(a.V,a+" DONE."),a.d(),zf(a)):(F(a.V,a+" new cursor position {"+(null!=a.c[0]?a.b[0]+", "+a.c[0]:a.b[0])+"}"),a.d(a.b[0]))};b.cb=function(b){a.e(b);zf(a);a.O=!0};var c=null!=a.c[0]?", "+a.c[0]:"",c=null!=a.b[0]?" resume from {"+a.b[0]+c+"}":"";F(a.V,b+c+" opening");b.Ka(a.b[0],a.c[0])}
function Af(a){function b(b){var f=a.a[b];f.K=function(k,m,q){d++;null==k&&(F(a.V,"cursor "+f+" finished."),a.O=!0);a.b[b]=k;a.c[b]=m;a.g[b]=q;e[b]=f.b?m:k;if(d==c){d=0;if(a.O)a.s++,F(a.V,a+" DONE."),a.d(),zf(a);else if(k=e.reduce(function(a,b){return null===a?b:1==O(b,a)?b:a},null),0==O(k,e[0]))F(a.V,a+" new cursor position {"+(null!=a.c[0]?a.b[0]+", "+a.c[0]:a.b[0])+"}"),a.d(a.b[0]);else for(m=0;m<c;m++)-1==O(e[m],k)?(q=a.a[m],q.b?q.eb(k):q.va(k)):d++;Qa(e)}};f.cb=function(b){a.e(b);zf(a);a.O=!0;
d=0};var k=null!=a.c[b]?", "+a.c[b]:"",k=null!=a.b[b]?" resume from {"+a.b[b]+k+"}":"";F(a.V,f+k+" opening");f.Ka(a.b[b],a.c[b])}for(var c=a.a.length,d=0,e=[],f=0;f<c;f++)b(f)}function xf(a){var b=a.a.length;if(1==b)yf(a,a.a[0]);else if(1<b)Af(a);else throw new td("no cursors");}p.Qa=l("s");p.Dc=function(a){return this.b[a||0]};p.U=function(a){a=a||0;return this.a[a].b?this.c[a]:this.b[a]};p.ja=function(a){a=a||0;return this.a[a].Ta?this.U(a):this.g[a]};p.advance=function(a){for(var b=0;b<this.a.length;b++)this.a[b].advance(a)};
p.update=function(a,b){return this.a[b||0].update(a)};p.clear=function(a){return this.a[a||0].clear()};function Bf(a){a.Pb=!0;F(a.V,a+": exit");zf(a);for(var b=0;b<a.a.length;b++)a.a[b].qc();F(a.V,a+" disposed");Qa(a.g);Qa(a.a)}function zf(a){a.c=Ma(a.c,function(a){if(null!=a)return fd(a)});a.b=Ma(a.b,function(a){if(null!=a)return fd(a)})}
p.toString=function(){for(var a="[",b=0;b<this.b.length;b++)0<b&&(a+=" "),this.a[b]?a+=this.a[b].toString():(a+="cursor~{"+this.b[b],a=null!=this.c[b]?a+(";"+this.c[b]+"}"):a+"}");return"Cursor "+(a+"]")};function Cf(a,b,c,d,e){if(!(b instanceof M))if(x(b)&&t(c))b=pd(b,c,d,e);else if(null!=b){if(!(b instanceof M))if(z(b))b=new M(b.lower,b.upper,b.lowerOpen,b.upperOpen);else throw new N("Invalid key range: "+b+" of type "+typeof b);}else b=null;this.a=b;this.sa=a}Cf.prototype.sa="";Cf.prototype.Mb=function(a){if(this.sa!=a.sa)return null;a=null!=this.a&&null!=a.a?this.a.Mb(a.a):this.a||a.a;return new Cf(this.sa,a)};function X(a,b,c,d,e,f,g){if(!x(a))throw new TypeError("store name");this.N=a;this.e=b;this.i=g;this.d=!!this.e;this.b=t(f)?f:!!x(this.e);if(!fa(this.b))throw new TypeError("key_only");if(t(d)&&!fa(d))throw new TypeError("reverse");if(t(e)&&!fa(e))throw new TypeError("unique");a="next";d&&e?a="prevunique":d?a="prev":e&&(a="nextunique");this.g=a;if(d=ld(c))throw new N("Invalid key range: "+d);this.a=jd(c);this.c=null}X.prototype.b=!0;
function Df(a,b,c){if(3<arguments.length)throw new N("too many argument");X.call(this,a,void 0,b,c,void 0,!0)}B(Df,X);function Ef(a,b,c,d,e){if(!x(b))throw new N("index name must be string");X.call(this,a,b,c,d,e,!0)}B(Ef,X);function Ff(a,b,c){if(3<arguments.length)throw new N("too many argument");X.call(this,a,void 0,b,c,void 0,!1)}B(Ff,X);function Gf(a,b,c,d,e){if(!x(b))throw new N("index name must be string");X.call(this,a,b,c,d,e,!1)}B(Gf,X);p=X.prototype;
p.pc=function(){return this.c?this.c.O?"done":this.c.Pb?"rest":"busy":"init"};p.hd=H("ydn.db.Iterator");p.fd=l("N");p.X=l("e");p.Uc=l("a");p.dd=function(){return this.a?this.a instanceof kd?this.a:kd.bound(this.a.lower,this.a.upper,this.a.lowerOpen,this.a.upperOpen):null};p.gd=l("b");p.Tc=l("d");p.toJSON=function(){return{store:this.N,index:this.e,keyRange:this.a?gd(this.a):null,direction:this.g}};
p.toString=function(){var a=t(this.i)?":"+this.i.join(","):t(this.e)?":"+this.e:"",a=a+md(this.a),b=this.d?"Index":"",b=b+(this.b?"Key":"Value");return b+"Iterator:"+this.N+a};p.cd=function(){return this.c?this.c.Dc():void 0};p.ed=function(){return this.c?this.c.U():void 0};p.Wc=function(a,b){var c=new X(this.N,this.e,this.a,this.yb(),this.Xa(),this.b,this.i);c.c=new wf([],null,a,b);return c};
p.kd=function(a,b){var c=new X(this.N,this.e,this.a,!this.yb(),this.Xa(),this.b,this.i);null!=a&&(c.c=new wf([],null,a,b));return c};p.count=function(){return this.c?this.c.Qa():NaN};p.stores=function(){var a=[this.N];if(this.k)for(var b=0;b<this.k.length;b++)0<=Ia(a,this.k[b].a)||a.push(this.k[b].a);return a};p.yb=function(){return"prev"===this.g||"prevunique"===this.g};p.Xa=function(){return"nextunique"===this.g||"prevunique"===this.g};
p.aa=function(a,b){var c;c=[b];c=this.a?new M(null!=this.a.lower?c.concat(this.a.lower):c,null!=this.a.upper?c.concat(this.a.upper):c,!!this.a.lowerOpen,!!this.a.upperOpen):this.d?hd(c):M.only(b);var d,e;this.i?e=[a].concat(this.i):this.d?e=[a].concat(this.e):d=a;return new X(this.N,d,c,this.yb(),this.Xa(),this.b,e)};
function Hf(a,b,c,d,e){var f=e||2;e=[d.nb(b,c,a.N,a.i||a.e,a.a,a.g,a.b,f)];for(var g=0,h=a.k?a.k.length:0;g<h;g++){var k=a.k[g];if(k.b&&null!=k.value){var n;n=a.d?jd(hd([k.value])):kd.only(k.value);k=d.nb(b,c,k.a,k.b,n,a.g,a.b,f);e.push(k)}}b="";a.c&&(b=" by resuming "+a.c);a.c=new wf(e,a.c);F(a.hd,c+" "+a+" created "+a.c+b);return a.c}p.jd=function(){if("busy"==this.pc())throw new fe("busy");this.c=null};function If(a,b){this.ma=a;this.a=b}If.prototype.f=H("ydn.db.crud.req.RequestExecutor");If.prototype.ma="";If.prototype.toString=ba("RequestExecutor");If.prototype.X=function(a,b){var c;if(v(b))a:{for(c=0;c<a.indexes.length;c++)if(!Dd(a.indexes[c].keyPath,b)){c=a.indexes[c];break a}c=null}else c=Qd(a,b);return c.getName()};A("ydn.db.con.IStorage.prototype.transaction",aa().prototype.ua);function Jf(a,b,c,d){if("transaction"in a)this.k=a,this.e=this.i=null;else if("objectStore"in a){if(this.k=null,this.i=a.db,this.e=a,!this.e.db.objectStoreNames.contains(b))throw new be('store "'+b+'" not in transaction.');}else throw new be("storage instance require.");this.w=b;this.S=c;this.Ea=d;this.d=[];this.b=0;this.g=!1}Jf.prototype.a=H("ydn.db.con.IdbCursorStream");Jf.prototype.g=!1;Jf.prototype.d=[];
function Kf(a,b){a.b++;b.onsuccess=function(b){if(b=b.target.result){if(ga(a.Ea)){var d=b.value;a.Ea(b.primaryKey,null!=a.S?d[a.S]:d)}else D(a.a,"sink gone, dropping value for: "+b.primaryKey);if(b&&0<a.d.length)b["continue"](a.d.shift());else a.b--,0==a.b&&a.ga&&a.ga()}};b.onerror=function(){D(a.a,"seeking fail. "+("error"in b?b.error.name+":"+b.error.message:""));a.b--;0==a.b&&a.ga&&a.ga()}}function Lf(a,b){0==a.d.length&&0==a.b?b():a.ga=b}
function Mf(a){if(!a.g){var b=function(b,c){a.e=null;"complete"!==b&&D(a.a,c.name+":"+c.message);F(a.a,a+" transaction "+b)},c=function(b){var c=a.d.shift();F(a.a,a+" transaction started for "+c);b=b.objectStore(a.w);Kf(a,b.openCursor(c))};if(a.e)F(a.a,a+" using existing tx."),c(a.e);else if(a.i)F(a.a,a+" creating tx from IDBDatabase."),a.c=a.i.transaction([a.w],J),a.c.oncomplete=function(a){b("complete",a)},a.c.onerror=function(a){b("error",a)},a.c.onabort=function(a){b("abort",a)};else if(a.k)F(a.a,
a+" creating tx from ydn.db.con.IStorage."),a.g=!0,a.k.ua(function(b){a.g=!1;c(b)},[a.w],J,b);else throw new de("no way to create a transaction provided.");}};function Nf(a,b,c){if(a&&a instanceof Y)this.$a=a,this.ka=null;else if(a&&a.db)if(this.$a=null,a.db)this.ka=new Jf(a,this.a,this.Ia,ma(this.ga,this));else throw new N("Invalid IndexedDB Transaction.");else throw new N("ydn.db.Streamer: First argument requires storage or transaction instance required.");if(!x(b))throw new N("a store name required.");this.a=b;if(t(c)&&!x(c))throw new N("index name must be a string.");this.Ia=c;this.ka=null;this.ca=[];this.qa=[];this.Sa=!1}p=Nf.prototype;p.$a=null;
p.h=null;p.gc=null;p.qa=[];p.ca=[];p.ka=null;p.Zc=function(a){this.gc=a};function Of(a){var b=0<a.ca.length;if(b&&!a.Sa&&ga(a.gc)){var c=function(){Of(a)},d=a.qa.shift(),e=a.ca.shift(),b=0<a.ca.length,c=a.gc(d,e,b?c:null);b&&!c&&Of(a)}}p.Sa=!1;p.od=function(a){if(this.ka){this.Sa=!0;var b=this;Lf(this.ka,function(){a(b.qa,b.ca);b.qa=[];b.ca=[];b.Sa=!1})}else a(this.qa,this.ca),this.qa=[],this.ca=[]};p.ga=function(a,b){this.qa.push(a);this.ca.push(b);Of(this)};
p.push=function(a,b){if(this.Sa)throw new fe("push not allowed after a collection is started");if(2<=arguments.length)this.ga(a,b);else{if(!this.ka){if(!this.$a)throw new fe("Database is not setup.");var c=this.$a.k();if(c)if("indexeddb"===c)this.ka=new Jf(this.$a,this.a,this.Ia,ma(this.ga,this));else throw new ce(c);else throw new fe("Database is not connected.");}c=this.ka;c.d.push(a);Mf(c)}};p.X=l("Ia");p.toString=function(){return"Streamer:"+this.a+(this.Ia||"")};function Pf(a,b,c,d,e,f,g,h){zc.call(this);this.Eb=c;this.g=d;this.b=x(this.g);this.n=e||null;this.c=a;this.S=b;this.o="prev"==f||"prevunique"==f;this.unique="nextunique"==f||"prevunique"==f;this.W=f;this.Ta=g;this.i=h}B(Pf,zc);p=Pf.prototype;p.Eb="";p.W="";p.n=null;p.unique=!1;p.o=!1;p.Ta=!0;p.cb=function(){throw new td;};p.K=function(){throw new td;};p.Ba=function(){this.c=null};p.toString=function(){return"Cursor:"+this.Eb+(t(this.g)?":"+this.g:"")+"["+(this.c?"":"~")+this.S+"]"};function Qf(a,b){if(null!=a&&!("push"in a))throw new be;this.a=a||null;this.g=b;this.e=0}Qf.prototype.i=H("ydn.db.algo.AbstractSolver");Qf.prototype.a=null;Qf.prototype.b=function(a){if(!v(a))throw new TypeError("iterators must be array");if(2>a.length)throw new RangeError("ZigzagMerge require at least 2 iterators, but  only "+a.length+" found.");for(var b=0;b<a.length;b++)if(!(a[b]instanceof X))throw new TypeError("item at iterators "+b+" is not an iterator.");return!1};
function Rf(a,b,c){var d,e=null!=d;if(!t(d)){d=c[0];for(var e=null!=d,f=1;e&&f<c.length;f++)null!=c[f]&&0==O(c[f],d)||(e=!1)}return e&&(a.e++,a.a&&a.a.push(d),t(a.g)&&a.e>=a.g)?[]:b}Qf.prototype.c=function(){return[]};function Sf(a,b,c,d,e,f,g,h){Pf.call(this,a,b,c,d,e,f,g,h);this.B=null}B(Sf,Pf);p=Sf.prototype;p.Hc=H("ydn.db.core.req.IDBCursor");p.jb=function(a){(a=a.target.result)?this.K(a.key,this.b?a.primaryKey:void 0,a.value):this.K()};p.B=null;
p.Ka=function(a,b){function c(a,b,c){h.B=g;h.K(a,h.b?b:void 0,c);h.B&&(h.B.onsuccess=ma(h.jb,h));g=null}var d=this+" opening ";null!=a&&(d+="{"+a,d=null!=b?d+(";"+b+"}"):d+"}");F(this.Hc,d);var d=this.n,e=this.c.objectStore(this.Eb),f=x(this.g)?e.index(this.g):null,g;g=this.Ta?f?null!=this.W?f.openKeyCursor(d,this.W):null!=d?f.openKeyCursor(d):f.openKeyCursor():null!=this.W?e.openCursor(d,this.W):null!=d?e.openCursor(d):e.openCursor():f?null!=this.W?f.openCursor(d,this.W):null!=d?f.openCursor(d):
f.openCursor():null!=this.W?e.openCursor(d,this.W):null!=d?e.openCursor(d):e.openCursor();var h=this;g.onerror=function(a){var b=g.error;a.preventDefault();h.cb(b)};null!=a?g.onsuccess=function(d){if(d=d.target.result){var e=qe.cmp(d.key,a),f=h.o?-1:1;if(e==f)c(d.key,d.primaryKey,d.value);else if(e==-f)d["continue"](a);else if(null!=b)if(qe.cmp(d.primaryKey,b)==f)c(d.key,d.primaryKey,d.value);else d["continue"]();else d["continue"]()}else c()}:(h.B=g,h.B.onsuccess=ma(h.jb,h))};p.qb=function(){return!!this.B};
p.update=function(a){var b=this.B.result;if(b){var c=new I;a=b.update(a);a.onsuccess=function(a){c.A(a.target.result)};a.onerror=function(a){a.preventDefault();c.t(a)};return c}throw new ue("cursor gone");};p.clear=function(){var a=this.B.result;if(a){var b=new I,a=a["delete"]();a.onsuccess=function(){b.A(1)};a.onerror=function(a){a.preventDefault();b.t(a)};return b}throw new ue("cursor gone");};p.fb=function(a,b){F(this.Hc,this+" restarting.");this.Ka(b,a)};
p.advance=function(a){var b=this.B.result;if(1==a)b["continue"]();else b.advance(a)};
p.eb=function(a){var b=this.B.result,c=qe.cmp(a,b.primaryKey);if(1!=c)throw new td('continuing primary key "'+a+'" must higher than current primary key "'+b.primaryKey+'"');var d=this;this.B.onsuccess=function(e){if(b=e.target.result)if(c=qe.cmp(b.primaryKey,a),0==c||1==c&&!d.o||-1==c&&d.o)d.B.onsuccess=ma(d.jb,d),d.K(b.key,d.b?b.primaryKey:void 0,b.value);else b["continue"]();else d.B.onsuccess=ma(d.jb,d),d.K()};b["continue"]()};p.va=function(a){var b=this.B.result;if(null!=a)b["continue"](a);else b["continue"]()};
p.Ba=function(){Sf.v.Ba.call(this);this.B=null};p.toString=function(){return"IDB"+Sf.v.toString.call(this)};function Tf(a,b){If.call(this,a,b)}B(Tf,If);p=Tf.prototype;p.f=H("ydn.db.crud.req.IndexedDb");p.ib=function(a,b){function c(e){var f=a.a.objectStore(b[e]).count();f.onsuccess=function(f){d[e]=f.target.result;e++;e==b.length?P(a,d):c(e)};f.onerror=function(b){b.preventDefault();P(a,f.error,!0)}}var d=[];0==b.length?P(a,[]):c(0)};
p.Kb=function(a,b,c,d){var e=a.a.objectStore(b);F(this.f,S(a)+" addObject: "+b+" "+d);var f;f=t(d)?e.add(c,d):e.add(c);f.onsuccess=function(b){P(a,b.target.result)};f.onerror=function(b){b.preventDefault();P(a,f.error,!0)}};
p.ac=function(a,b,c,d){var e=a.a.objectStore(b);F(this.f,S(a)+' putObject to store "'+b+'" '+(t(d)?" key: "+d:""));var f;f=t(d)?e.put(c,d):e.put(c);f.onsuccess=function(b){P(a,b.target.result)};f.onerror=function(d){"DataError"==d.name&&(d=T(c),d=new we(b+": "+d.substring(0,70)));d.preventDefault();P(a,f.error,!0)}};
p.Lb=function(a,b,c,d){function e(m){var u;u=null!=d?n.add(c[m],d[m]):n.add(c[m]);u.onsuccess=function(b){g++;f[m]=b.target.result;g==c.length?P(a,f,k):(b=m+10,b<c.length&&e(b))};u.onerror=function(d){g++;var n=u.error;D(h.f,S(a)+' add request to "'+b+'" cause '+n.name+' for object "'+V(c[m])+'" at index '+m+" of "+c.length+" objects.");f[m]=n;k=!0;d.preventDefault();g==c.length?P(a,f,k):(d=m+10,d<c.length&&e(d))}}var f=[],g=0,h=this,k=!1,n=a.a.objectStore(b);F(this.f,S(a)+" addObjects: "+b+" "+c.length+
" objects");if(0<c.length)for(var m=0;10>m&&m<c.length;m++)e(m);else P(a,[])};
p.bc=function(a,b,c,d){function e(m){if(null==c[m])if(F(k.f,"empty object at "+m+" of "+c.length),g++,g==c.length)P(a,f,h);else{var u=m+10;u<c.length&&e(u)}var s;s=null!=d?n.put(c[m],d[m]):n.put(c[m]);s.onsuccess=function(b){g++;f[m]=b.target.result;g==c.length?P(a,f,h):(b=m+10,b<c.length&&e(b))};s.onerror=function(d){g++;var n=s.error;F(k.f,S(a)+' put request to "'+b+'" cause '+n.name+' for object "'+V(c[m])+'" at index '+m+" of "+c.length+" objects.");f[m]=n;h=!0;d.preventDefault();g==c.length?
P(a,f,h):(d=m+10,d<c.length&&e(d))}}var f=[],g=0,h=!1,k=this,n=a.a.objectStore(b);F(this.f,S(a)+" put "+c.length+' objects to store "'+b+'"');if(0<c.length)for(var m=0;10>m&&m<c.length;m++)e(m);else P(a,[])};
p.$b=function(a,b,c){function d(k){var m=c[k],q=m.a,u=a.a.objectStore(q),s;s=null===u.keyPath?u.put(b[k],m.id):u.put(b[k]);s.onsuccess=function(c){f++;e[k]=c.target.result;f==b.length?P(a,e,g):(c=k+10,c<b.length&&d(c))};s.onerror=function(c){f++;D(h.f,"request result "+c.name+' error when put keys to "'+q+'" for object "'+V(b[k])+'" at index '+k+" of "+b.length+" objects.");e[k]=s.error;g=!0;c.preventDefault();f==b.length?P(a,e,g):(c=k+10,c<b.length&&d(c))}}var e=[],f=0,g=!1,h=this;F(this.f,S(a)+
" putByKeys: of "+b.length+" objects");if(0<b.length)for(var k=0;10>k&&k<b.length;k++)d(k);else P(a,e,g)};p.vb=function(a,b,c){var d=a.a.objectStore(b);F(this.f,S(a)+" clearById: "+b+" "+c);var e=d.openCursor(kd.only(c));e.onsuccess=function(b){if(b=b.target.result){var c=b["delete"]();c.onsuccess=function(){P(a,1)};c.onerror=function(){P(a,c.error,!0)}}else P(a,0)};e.onerror=function(b){b.preventDefault();P(a,e.error,!0)}};
p.dc=function(a,b){function c(h){h++;if(h>=b.length)0<g.length?P(a,g,!0):P(a,d);else{b[h].a!=e&&(e=b[h].a,f=a.a.objectStore(e));var k=f["delete"](b[h].id);k.onsuccess=function(){d++;c(h)};k.onerror=function(a){a.preventDefault();g[h]=k.error;c(h)}}}var d=0,e,f;F(this.f,S(a)+" removeByKeys: "+b.length+" keys");var g=[];c(-1)};
p.wb=function(a,b,c){var d=a.a.objectStore(b),e=d.count(c);F(this.f,S(a)+" clearByKeyRange: "+b+" "+c);e.onsuccess=function(b){var e=b.target.result,h=d["delete"](c);h.onsuccess=function(){P(a,e)};h.onerror=function(){P(a,h.error,!0)}};e.onerror=function(b){b.preventDefault();P(a,e.error,!0)}};p.Ob=function(a,b,c){var d=a.a.objectStore(b);F(this.f,S(a)+" "+b+" "+c);var e=d["delete"](c);e.onsuccess=function(){P(a,void 0)};e.onerror=function(b){b.preventDefault();P(a,e.error,!0)}};
p.cc=function(a,b,c,d){var e=a.a.objectStore(b).index(c);F(this.f,S(a)+" clearByIndexKeyRange: "+b+":"+c+" "+d);var f=[],g=e.openCursor(d),h=0;g.onsuccess=function(b){var c=b.target.result;if(c){var d=c["delete"]();d.onsuccess=function(){h++;c["continue"]()};d.onerror=function(a){f.push(d.error);a.preventDefault();c["continue"]()}}else 0<f.length?P(a,f,!0):P(a,h)};g.onerror=function(b){b.preventDefault();P(a,g.error,!0)}};
p.gb=function(a,b){var c=b.length,d=0;F(this.f,S(a)+" clearByStores: "+b);for(var e=0;e<c;e++){var f=a.a.objectStore(b[e]).clear();f.onsuccess=function(){d++;d==c&&P(a,d)};f.onerror=function(b){d++;b.preventDefault();d==c&&P(a,f.error,!0)}}};
function Uf(a,b,c,d,e,f,g,h,k){var n=[],m=b.a.objectStore(c),q=nc(f,k);c=S(b)+" "+c+(d?":"+d:"")+(e?T(e):"");f&&(c+=" reverse");k&&(c+=" unique");F(a.f,c);var u;u=d?m.index(d).openCursor(e,q):m.openCursor(e,q);var s=!1;u.onsuccess=function(a){if(a=a.target.result)if(!s&&0<h)s=!0,a.advance(h);else if(n.push(a.value),n.length<g)a["continue"]();else P(b,n);else P(b,n)};u.onerror=function(a){a.preventDefault();P(b,u.error,!0)}}p.sb=function(a,b,c,d,e,f){Uf(this,a,b,null,c,d,e,f)};
p.Ua=function(a,b,c,d,e,f,g,h){Uf(this,a,b,c,d,e,f,g,h)};p.Ub=function(a,b,c,d,e,f){var g=[],h=a.a.objectStore(b);d=nc(d);F(this.f,S(a)+" "+b+" "+c);var k=h.openCursor(c,d),n=!1;k.onsuccess=function(b){if(b=b.target.result)if(!n&&0<f)n=!0,b.advance(f);else if(g.push(b.key),g.length<e)b["continue"]();else P(a,g);else P(a,g)};k.onerror=function(b){b.preventDefault();P(a,k.error,!0)}};
p.Sb=function(a,b,c,d,e,f,g,h){var k=[],n=a.a.objectStore(b).index(c);F(this.f,S(a)+" "+b+":"+c+" "+d);var m=n.openKeyCursor(d,nc(e,h)),q=!1;m.onsuccess=function(b){if(b=b.target.result)if(!q&&0<g)q=!0,b.advance(g);else if(k.push(b.primaryKey),k.length<f)b["continue"]();else P(a,k);else P(a,k)};m.onerror=function(b){b.preventDefault();P(a,m.error,!0)}};
p.mb=function(a,b,c){var d=this;F(this.f,S(a)+b+":"+c);var e=a.a.objectStore(b).get(c);e.onsuccess=function(b){F(d.f,S(a)+" record "+c+(null!=b.target.result?" ":" not ")+" exists.");P(a,b.target.result)};e.onerror=function(b){b.preventDefault();P(a,e.error,!0)}};
p.Vb=function(a,b,c){function d(b){if(null==c[b])if(f++,e[b]=void 0,f==h)P(a,e);else{var n=b+10;n<h&&d(n)}var m;m=g.get(c[b]);m.onsuccess=function(c){f++;e[b]=c.target.result;f==h?P(a,e):(c=b+10,c<h&&d(c))};m.onerror=function(b){f++;b.preventDefault();P(a,m.error,!0)}}var e=[];e.length=c.length;var f=0,g=a.a.objectStore(b),h=c.length;F(this.f,S(a)+" "+b+":"+h+" ids");if(0<h)for(b=0;10>b&&b<h;b++)d(b);else P(a,[])};
p.Xb=function(a,b){function c(f){var h=b[f],k=a.a.objectStore(h.a).get(h.id);k.onsuccess=function(h){e++;d[f]=h.target.result;e==b.length?P(a,d):(h=f+10,h<b.length&&c(h))};k.onerror=function(b){e++;b.preventDefault();P(a,k.error,!0)}}var d=[];d.length=b.length;var e=0;F(this.f,S(a)+" "+b.length+" ids");if(0<b.length)for(var f=0;10>f&&f<b.length;f++)c(f);else P(a,[])};
p.za=function(a,b,c,d){var e=a.a.objectStore(b);b=S(a)+" "+b+(d?":"+d:"")+(c?":"+T(c):"");F(this.f,b);var f;null!=d?(d=e.index(d),f=null!=c?d.count(c):d.count()):f=null!=c?e.count(c):e.count();f.onsuccess=function(b){P(a,b.target.result)};f.onerror=function(b){b.preventDefault();P(a,f.error,!0)}};function Vf(a,b){If.call(this,a,b)}B(Vf,Tf);p=Vf.prototype;p.f=H("ydn.db.core.req.IndexedDb");p.Tb=function(a,b,c,d){Wf(this,1,a,b,c,d)};
function Wf(a,b,c,d,e,f){var g=[],h=c.a,k=S(c),n=1==b,m=k+" "+b+"ByIterator "+d;0<e&&(m+=" limit "+e);E(a.f,m);var q=Hf(d,h,k,a,b);q.e=function(a){Bf(q);P(c,a,!0)};var u=0,s=!1,G=!1;q.d=function(h){G||(F(a.f,m+" starting"),G=!0);if(null!=h){var k=d.d?q.U():h;!s&&0<f?(q.advance(f),s=!0):(u++,n?g.push(h):g.push(d.b?k:q.ja()),3==b?(Bf(q),P(c,g[0])):!t(e)||u<e?q.a[0].va(void 0):(E(a.f,"success:"+m+" "+g.length+" records"),Bf(q),P(c,g)))}else E(a.f,"success:"+m+" "+g.length+" records"),Bf(q),P(c,3==b?
g[0]:g)}}p.Wb=function(a,b,c,d){Wf(this,2,a,b,c,d)};p.Qb=function(a,b){Wf(this,3,a,b,1,0)};p.nb=function(a,b,c,d,e,f,g,h){var k=U(this.a,c);t(d)&&(d=this.X(k,d));return new Sf(a,b,c,d,e,f,g,h)};function Xf(){this.a=!1}Xf.prototype.a=!1;function Yf(a,b,c,d,e,f,g,h,k){Pf.call(this,a,b,d,e,f,g,h,k);this.xb=this.Va=this.Fa=void 0;this.Zb=this.k=this.d=this.a=null;this.e=new Xf}B(Yf,Pf);p=Yf.prototype;p.qb=function(){return!!this.c};p.update=function(){throw new rd;};p.advance=function(a){function b(b){d++;if(!b||d>=a)return Zf(c,b)}var c=this,d=this.a?-1:0;this.o?af(this.d,b,this.a):$e(this.d,b,this.a)};
p.va=function(a){if(null!=a){var b=this,c=new W(a),d=function(c){b.a=c;if(!c)return Zf(b,c);var d=O(c.value.key,a);if(b.o){if(1!=d)return Zf(b,c)}else if(-1!=d)return Zf(b,c)};this.o?af(this.d,d,c):$e(this.d,d,c)}else this.advance(1)};function $f(a){dd(function(){a.e.a?(a.e.a=!1,this.K(this.Fa,this.Va,this.xb),$f(this)):(this.Zb(),this.Zb=null)},0,a)}
function Zf(a,b){if(a.a=b){var c=b.value;if(a.n)if(a.o||null==a.n.upper)a.o&&null!=a.n.lower&&(d=O(c.key,a.n.lower),-1==d||0==d&&a.n.lowerOpen)&&(a.a=null);else{var d=O(c.key,a.n.upper);if(1==d||0==d&&a.n.upperOpen)a.a=null}if(a.a){if(a.unique&&(null!=a.Fa&&null!=c.key)&&0==O(a.Fa,c.key))return;a.Fa=c.key;a.Va=a.b?c.a:a.Fa;2==a.i&&(a.Ta?a.xb=a.Va:a.xb=kf(a.k,a.Va))}}a.a||(a.Fa=void 0,a.Va=void 0,a.xb=void 0);return a.e.a=!0}
p.Ka=function(a,b){var c=null;this.n&&(this.o?null!=this.n.upper&&(c=new W(this.n.upper)):null!=this.n.lower&&(c=new W(this.n.lower)));null!=a&&(c=this.b?new W(a,b):new W(a));this.Zb=of(this.c,function(d){function e(c){var d=c.value,e=d.key;if(c&&null!=e)if(null!=a)if(null!=b){if(d=d.a,null!=d&&0==O(a,e)&&0==O(b,d))return}else{if(0==O(a,e))return}else if(this.n&&(!this.o&&(this.n.lowerOpen&&null!=this.n.lower)&&(d=O(e,this.n.lower),0==d)||this.o&&(this.n.upperOpen&&null!=this.n.upper)&&(d=O(e,this.n.upper),
0==d)))return;return Zf(this,c)}this.k=rf(d,this.Eb);this.d=df(this.k,this.g);this.o?af(this.d,ma(e,this),c):$e(this.d,ma(e,this),c);$f(this)},this)};p.clear=function(){throw new rd;};p.fb=function(){throw new rd;};p.eb=function(){throw new rd;};p.toString=function(){return"Simple"+Yf.v.toString.call(this)};function ag(a,b){If.call(this,a,b)}B(ag,If);p=ag.prototype;p.f=H("ydn.db.crud.req.SimpleStore");p.Sb=function(a,b,c,d,e,f,g){var h=S(a)+" "+b+":"+c+" "+(d?V(d):"");F(this.f,h);var k=of(a.a,function(h){h=rf(h,b).oa(c,d,e,f,g);P(a,h);k();k=null},this)};p.Ub=function(a,b,c,d,e,f){var g=S(a)+" "+b+" "+(c?V(c):"");F(this.f,g);var h=of(a.a,function(g){g=rf(g,b).oa(null,c,d,e,f);P(a,g);h();h=null},this)};p.$b=function(a,b,c){bg(this,a,null,b,c,!0,!1)};
function bg(a,b,c,d,e,f,g){F(a.f,S(b)+" "+(f?"put":"add")+"Object"+(g?"":"s "+d.length+" objects"));var h=of(b.a,function(a){var n;if(g)n=rf(a,c),a=gf(n,e,d,!f),null!=a?P(b,a):(a=V(a),a=new ve(a),P(b,a,!0));else{for(var m=c,q=[],u=!1,s=e||{},G=0;G<d.length;G++){var K;c?K=s[G]:(m=e[G],K=m.id,m=m.a);n&&n.getName()==m||(n=rf(a,m));K=gf(n,K,d[G],!f);null!=K||(u=!0);q.push(K)}P(b,q,u)}h();h=null},a)}p.Kb=function(a,b,c,d){bg(this,a,b,c,d,!1,!0)};p.ac=function(a,b,c,d){bg(this,a,b,c,d,!0,!0)};
p.Lb=function(a,b,c,d){bg(this,a,b,c,d,!1,!1)};p.bc=function(a,b,c,d){bg(this,a,b,c,d,!0,!1)};p.mb=function(a,b,c){var d=of(a.a,function(e){e=kf(rf(e,b),c);P(a,e);d();d=null},this)};function cg(a,b,c,d){var e=of(b.a,function(a){for(var g=[],h=c,k,n=0;n<d.length;n++){var m=d[n];m instanceof ed&&(h=m,m=h.id,h=h.a);k&&k.getName()==h||(k=rf(a,h));m=kf(k,m);g[n]=m}P(b,g,!1);e();e=null},a)}p.Vb=function(a,b,c){cg(this,a,b,c)};p.Xb=function(a,b){cg(this,a,null,b)};
p.sb=function(a,b,c,d,e,f){var g=S(a)+" "+b+" "+(c?V(c):"");F(this.f,g);var h=of(a.a,function(k){k=rf(k,b);E(this.f,g+" getting records for "+b);k=mf(k,!1,null,c,d,e,f);E(this.f,g+" "+k.length+" records found.");P(a,k);h();h=null},this)};p.Ua=function(a,b,c,d,e,f,g,h){var k=S(a)+" "+b+" "+(d?V(d):"");F(this.f,k);var n=of(a.a,function(m){m=mf(rf(m,b),!1,c,d,e,f,g,h);E(this.f,k+" "+m.length+" records found.");P(a,m);n();n=null},this)};
p.vb=function(a,b,c){var d=S(a)+" removeById "+b+" "+c;F(this.f,d);var e=this,f=of(a.a,function(g){g=hf(rf(g,b),c);E(e.f,"success "+d+(0==g?" [not found]":""));P(a,g);f();f=null},this)};p.dc=function(a,b){F(this.f,S(a)+" removeByKeys "+b.length+" keys");var c,d=0,e=of(a.a,function(f){for(var g=0;g<b.length;g++){var h=b[g].a,k=b[g].id;c&&c.getName()==h||(c=rf(f,h));d+=hf(c,k)}P(a,d);e();e=null},this)};p.Ob=function(a,b,c){this.wb(a,b,c)};
p.wb=function(a,b,c){var d=S(a)+" removeByKeyRange "+(c?T(c):"");F(this.f,d);var e=this,f=of(a.a,function(g){g=jf(rf(g,b),c);E(e.f,d+" deleted "+g+" records.");P(a,g);f();f=null},this)};p.cc=function(a,b,c,d){var e=S(a)+" removeByIndexKeyRange "+(d?T(d):"");F(this.f,e);var f=of(a.a,function(e){e=rf(e,b);for(var h=e.oa(c,d),k=h.length,n=0;n<k;n++)hf(e,h[n]);P(a,k);f();f=null},this)};
p.gb=function(a,b){var c=S(a)+" clearByStores";F(this.f,c);var d=of(a.a,function(e){for(var f=0;f<b.length;f++)rf(e,b[f]).clear();E(this.f,"success "+c);P(a,b.length);d();d=null},this)};p.ib=function(a,b){var c=of(a.a,function(d){for(var e=[],f=0;f<b.length;f++){var g=rf(d,b[f]);e.push(lf(g))}P(a,e);c();c=null},this)};
p.za=function(a,b,c,d){var e=S(a)+" count"+(null!=d?"Index":"")+(null!=c?"KeyRange":"Store");F(this.f,e);var f=of(a.a,function(g){g=lf(rf(g,b),d,c);E(this.f,"success "+e);P(a,g);f();f=null},this)};function dg(a,b){If.call(this,a,b)}B(dg,ag);dg.prototype.Tb=function(a,b,c,d){var e=[],f=S(a),g=a.a;F(this.f,f+" keysByIterator:"+b);var h=Hf(b,g,f,this);h.e=function(b){P(a,b,!0)};var k=0,n=!1;h.d=function(b){null!=b?!n&&0<d?(h.advance(d),n=!0):(k++,e.push(b),!t(c)||k<c?h.advance(1):(Bf(h),P(a,e))):(Bf(h),P(a,e))}};
function eg(a,b,c,d,e,f){var g=c.a,h=S(c),k=[];F(a.f,h+" listByIterator"+d);var n=Hf(d,g,h,a);n.e=function(a){Bf(n);P(c,a,!0)};var m=0,q=!1;n.d=function(a){if(null!=a){a=d.d?n.U():a;var g=n.ja();!q&&0<f?(n.advance(f),q=!0):(m++,k.push(d.b?a:g),!t(e)||m<e?n.advance(1):(Bf(n),a=3==b?k[0]:k,P(c,a)))}else Bf(n),a=3==b?k[0]:k,P(c,a)}}dg.prototype.Wb=function(a,b,c,d){eg(this,2,a,b,c,d)};dg.prototype.Qb=function(a,b){eg(this,3,a,b,1,0)};
dg.prototype.nb=function(a,b,c,d,e,f,g,h){var k=U(this.a,c);t(d)&&(d=this.X(k,d));return new Yf(a,b,0,c,d,e,f,g,h)};function fg(a,b,c,d,e,f,g,h,k){Pf.call(this,a,b,d,e,f,g,h,k);this.a=c;this.k=x(e)?Qd(c,e):null;this.d=this.e=void 0}B(fg,Pf);p=fg.prototype;p.wa=H("ydn.db.core.req.WebsqlCursor");function gg(a,b){a.e=void 0;a.d=void 0;a.w=void 0;if(t(b))if(z(b)){var c=Bd(b[a.a.b],a.a.type);if(a.b){var d;d=Qd(a.a,a.g).type;a.d=c;a.e=Bd(b[a.g],d)}else a.e=c;a.w=a.Ta?c:hg(b,a.a)}else a.w=b}
function ig(a,b,c){Qd(a.a,a.g);var d=[],e=a.g,f=a.n,g=a.e;if(null!=f){var h=f.lower,k=f.upper,n=f.lowerOpen,f=f.upperOpen;a.o?k=null!=k&&-1==O(k,g)?k:g:h=null!=h&&1==O(h,g)?h:g;f=null!=h&&null!=k?M.bound(h,k,!!n,!!f):null!=h?kd.lowerBound(h,!!n):kd.upperBound(k,!!f)}else f=a.o?kd.upperBound(g):kd.lowerBound(g);e=Pd(a.a,d,a.i,e,f,a.o,a.unique);c=a.o?kd.upperBound(c,!1):kd.lowerBound(c,!1);c=Pd(a.a,d,a.i,a.a.b,c,a.o,a.unique);e.p=e.p?e.p+(" AND "+c.p):c.p;c="SELECT "+e.select+" FROM "+e.Aa+(e.p?" WHERE "+
e.p:"")+(e.group?" GROUP BY "+e.group:"")+" ORDER BY "+e.aa;c+=" LIMIT 1";F(a.wa,a+": continuePrimary:  SQL: "+c+" : "+T(d));a.c.executeSql(c,d,function(c,d){0<d.rows.length?gg(a,d.rows.item(0)):gg(a);b.call(a,a.e,a.d,a.w);b=null},function(c,d){D(a.wa,"get error: "+d.message);a.cb(d);gg(a);b.call(a,a.d,a.e,a.w);b=null;return!1})}
function jg(a,b,c,d,e){var f=a.k.c,g=a.k.b,h=a.a.a,k=a.o?" <":" >",k=d?k+" ":k+"= ";d=od(c,a.k.type);e=od(e,a.a.type);var n="";a.n?(a=Pd(a.a,b,a.i,f,a.n,a.o,a.unique),a.p+=" AND ",n=g+k+"?",b.push(d)):(c=a.o?M.upperBound(c,!0):M.lowerBound(c,!0),a=Pd(a.a,b,a.i,f,c,a.o,a.unique),n=a.p,a.p="");a.p+="("+n+" OR ("+g+" = ? AND "+h+k+"?))";b.push(d);b.push(e);return"SELECT "+a.select+" FROM "+a.Aa+" WHERE "+a.p+(a.group?" GROUP BY "+a.group:"")+" ORDER BY "+a.aa}
function kg(a,b,c,d){var e,f,g,h;if(null!=a.n)if(e=a.n.lower,f=a.n.upper,g=a.n.lowerOpen,h=a.n.upperOpen,a.o)if(null!=f){var k=O(c,f);-1==k?(f=c,h=d):0==k&&(h=d||h)}else f=c,h=d;else null!=e?(k=O(c,e),1==k?(e=c,g=d):0==k&&(g=d||g)):(e=c,g=d);else a.o?(f=c,h=d):(e=c,g=d);c=new M(e,f,!!g,!!h);b=Pd(a.a,b,a.i,a.k?a.k.c:a.a.b,c,a.o,a.unique);b="SELECT "+b.select+" FROM "+b.Aa+(b.p?" WHERE "+b.p:"")+(b.group?" GROUP BY "+b.group:"")+" ORDER BY "+b.aa;a.b&&(b+=", "+a.a.a+(a.o?"DESC":"ASC"));return b}
function lg(a,b,c,d,e,f){var g=!d;d=[];null!=f?c=jg(a,d,c,g,f):null!=c?c=kg(a,d,c,g):(c=Od(a.a,d,a.i,a.b?a.k.c:a.a.b,a.n,a.o,a.unique),a.b&&(c+=", "+a.a.a+" ASC"));c+=" LIMIT 1";0<e&&(c+=" OFFSET "+e);F(a.wa,a+": continue:  SQL: "+c+" : "+T(d));a.c.executeSql(c,d,function(c,d){0<d.rows.length?gg(a,d.rows.item(0)):gg(a);b.call(a,a.e,a.d,a.w);b=null},function(c,d){D(a.wa,"get error: "+d.message);a.cb(d);gg(a);b.call(a,a.d,a.e,a.w);b=null;return!1})}p.qb=function(){return!!this.c};
p.update=function(a){if(!this.qb())throw new ue;var b=new I,c=this.d;a=Vd(this.a,a,c);var d="REPLACE INTO "+Rd(this.a)+" ("+a.mc.join(", ")+") VALUES ("+a.Bc.join(", ")+") ON CONFLICT FAIL";F(this.wa,this+': clear "'+d+'" : '+T(a.G));this.c.executeSql(d,a.G,function(){b.A(c)},function(a,c){b.t(c);return!1});return b};
p.advance=function(a){var b=this.e,c=this.d,d=!0;null==this.e||this.b&&null==this.d||(a-=1,d=!1);lg(this,function(a,d,g){var h=null!=b&&null!=a&&0==O(b,a);if(this.b){var k=null!=d&&null!=c&&0==O(d,c);if(h&&k)throw new td("current: "+b+";"+c+" next: "+a+";"+d);}else if(h)throw new td("current: "+b+" next: "+a);this.K(a,d,g)},this.e,d,a,this.d)};p.va=function(a){null!=a?lg(this,this.K,a,!0):this.advance(1)};p.Ka=function(a,b){lg(this,this.K,a,!1,0,b)};
p.clear=function(){if(!this.qb())throw new ue;var a=new I,b=this.a.b,b="DELETE FROM "+Rd(this.a)+" WHERE "+b+" = ?",c=[this.d];F(this.wa,this+': clear "'+b+'" : '+T(c));this.c.executeSql(b,c,function(b,c){a.A(c.rowsAffected)},function(b,c){a.t(c);return!1});return a};p.fb=function(a,b){F(this.wa,this+" restarting.");this.Ka(b,a)};
p.eb=function(a){var b=O(a,this.d);if(0==b||1==b&&this.o||-1==b&&!this.o)throw new fe(this+" to continuePrimaryKey  from "+this.d+" to "+a+" on "+this.W+" direction is wrong");ig(this,this.K,a)};p.toString=function(){return"WebSql"+fg.v.toString.call(this)};function mg(a,b){If.call(this,a,b)}B(mg,If);p=mg.prototype;p.f=H("ydn.db.crud.req.WebSql");function hg(a,b){var c=a._default_?ne(a._default_):{};if(null!=b.keyPath){var d=Bd(a[b.keyPath],b.type);null!=d&&Ud(b,c,d)}for(d=0;d<b.indexes.length;d++){var e=b.indexes[d],f=e.c;"_default_"==f||(e.e||e.multiEntry)||"DATE"!=e.type||(f=Bd(a[f],e.type),t(f)&&Ad(e,c,f))}return c}p.Ub=function(a,b,c,d,e,f){ng(this,a,!0,b,void 0,c,d,e,f,!1)};p.Sb=function(a,b,c,d,e,f,g,h){ng(this,a,!0,b,c,d,e,f,g,h)};
function ng(a,b,c,d,e,f,g,h,k,n){var m=[],q=U(a.a,d),u=q.b;null!=e&&e!==u&&Qd(q,e);d=[];e=Od(q,d,c?1:2,e||u,f,g,n);y(h)&&(e+=" LIMIT "+h);y(k)&&(e+=" OFFSET "+k);var s=S(b)+" SQL: "+e+" ;params= "+T(d);F(a.f,s);b.a.executeSql(e,d,function(d,e){for(var f=e.rows.length,g=0;g<f;g++){var h=e.rows.item(g);c?m[g]=Bd(h[u],q.type):null!=h&&(m[g]=hg(h,q))}E(a.f,"success "+s);P(b,m)},function(c,d){D(a.f,"error: "+s+d.message);P(b,d,!0);return!1})}p.Kb=function(a,b,c,d){og(this,a,!0,!0,b,[c],[d])};
p.ac=function(a,b,c,d){og(this,a,!1,!0,b,[c],[d])};p.Lb=function(a,b,c,d){og(this,a,!0,!1,b,c,d)};
function og(a,b,c,d,e,f,g){function h(c,e){if(null==f[c])if(F(a.f,"empty object at "+c+" of "+f.length),q++,q==f.length)E(a.f,"success "+u),P(b,m,s);else{var $=c+2;$<f.length&&h($,e)}var ea;ea=t(g)?Vd(k,f[c],g[c]):Vd(k,f[c]);$=n+Rd(k)+" ("+ea.mc.join(", ")+") VALUES ("+ea.Bc.join(", ")+");";F(a.f,S(b)+" SQL: "+$+" PARAMS: "+ea.G+" REQ: "+c+" of "+f.length);e.executeSql($,ea.G,function(g,u){function $(c,d){var f=n+Ea("ydn.db.me:"+k.getName()+":"+c.getName())+" ("+k.a+", "+c.b+") VALUES (?, ?)",g=[od(R,
k.type),d];F(a.f,S(b)+" multiEntry "+f+" "+g);e.executeSql(f,g,aa(),function(b,c){D(a.f,"multiEntry index insert error: "+c.message);return!1})}q++;var R=t(ea.key)?ea.key:u.insertId;1>u.rowsAffected&&(s=!0,R=new ve(R+" no-op"));for(var ua=0,id=k.indexes.length;ua<id;ua++){var mb=k.index(ua);if(mb.multiEntry)for(var Cb=oc(f[c],mb.keyPath),uh=(Cb?Cb.length:0)||0,Se=0;Se<uh;Se++)$(mb,Cb[Se])}d?P(b,R):(m[c]=R,q==f.length?P(b,m,s):(ua=c+2,ua<f.length&&h(ua,g)))},function(e,g){q++;s=!0;6==g.code?g.name=
"ConstraintError":D(a.f,"error: "+g.message+" "+u);if(d)P(b,g,!0);else if(m[c]=g,q==f.length)F(a.f,"success "+u),P(b,m,s);else{var k=c+2;k<f.length&&h(k,e)}return!1})}var k=U(a.a,e),n=c?"INSERT INTO ":"INSERT OR REPLACE INTO ";c=b.a;var m=[],q=0,u=S(b)+" inserting "+f.length+" objects.",s=!1;if(0<f.length)for(e=0;2>e&&e<f.length;e++)h(e,c);else E(a.f,"success"),P(b,[])}p.bc=function(a,b,c,d){og(this,a,!1,!1,b,c,d)};
p.$b=function(a,b,c){if(0==c.length)P(a,[]);else{for(var d=0,e=this,f=function(d,f){var g=[];F(e.f,"put "+f.length+" objects to "+d);for(var h,k=(h=!!U(e.a,d).keyPath)?void 0:[],m=0;m<f.length;m++)g.push(b[f[m]]),h||k.push(c[f[m]].id);og(e,a,!1,!1,d,g,k)},g="",h=[],k=[],n=0;n<c.length;n++){var m=c[n].a,q=c[n].id;m!=g?(d++,0<h.length&&f(g,h),h=[n],k=[q],g=m):(h.push(n),k.push(q))}0<h.length&&f(g,h)}};
p.mb=function(a,b,c){var d=a.a,e=U(this.a,b),f=this;b=e.a;c=[od(c,e.type)];b="SELECT * FROM "+Rd(e)+" WHERE "+b+" = ?";var g=S(a)+" SQL: "+b+" PARAMS: "+c;F(this.f,g);d.executeSql(b,c,function(b,c){if(0<c.rows.length){var d=c.rows.item(0);null!=d?(d=hg(d,e),P(a,d)):(E(f.f,"success no result: "+g),P(a,void 0))}else E(f.f,"success no result: "+g),P(a,void 0)},function(b,c){D(f.f,"error: "+g+" "+c.message);P(a,c,!0);return!1})};
p.Vb=function(a,b,c){function d(b,e){var q=k.a,u=[od(c[b],k.type)],s="SELECT * FROM "+Rd(k)+" WHERE "+q+" = ?";F(f.f,"SQL: "+s+" PARAMS: "+u);e.executeSql(s,u,function(e,f){h++;if(0<f.rows.length){var m=f.rows.item(0);null!=m&&(g[b]=hg(m,k))}else g[b]=void 0;h==c.length?P(a,g):(m=b+10,m<c.length&&d(m,e))},function(e,k){h++;D(f.f,"error: "+s+" "+k.message);if(h==c.length)P(a,g);else{var m=b+10;m<c.length&&d(m,e)}return!1})}var e=a.a,f=this,g=[],h=0,k=U(this.a,b);if(0<c.length)for(b=0;10>b&&b<c.length;b++)d(b,
e);else E(f.f,"success"),P(a,[])};p.sb=function(a,b,c,d,e,f){ng(this,a,!1,b,void 0,c,d,e,f,!1)};p.Ua=function(a,b,c,d,e,f,g,h){ng(this,a,!1,b,c,d,e,f,g,h)};
p.Xb=function(a,b){function c(d,h){var m=b[d],q=U(e.a,m.a),u=v(m.id)?m.id.join("^|"):m.id instanceof Date?+m.id:m.id,m=q.a,u=[od(u,q.type)],s="SELECT * FROM "+Rd(q)+" WHERE "+m+" = ?";F(e.f,"SQL: "+s+" PARAMS: "+u);h.executeSql(s,u,function(h,m){g++;if(0<m.rows.length){var n=m.rows.item(0);null!=n&&(f[d]=hg(n,q))}else f[d]=void 0;g==b.length?(F(e.f,"success "+s),P(a,f)):(n=d+10,n<b.length&&c(n,h))},function(b,c){P(a,c,!0);return!1})}var d=a.a,e=this,f=[],g=0;if(0<b.length)for(var h=0;10>h&&h<b.length;h++)c(h,
d);else F(this.f,"success"),P(a,[])};
p.gb=function(a,b){function c(d,g){function h(a){a="DELETE FROM  "+Ea("ydn.db.me:"+k.getName()+":"+a.getName());F(e.f,"SQL: "+a);g.executeSql(a,[])}var k=U(e.a,b[d]),n="DELETE FROM  "+Rd(k);F(e.f,"SQL: "+n+" PARAMS: []");g.executeSql(n,[],function(g){d==b.length-1?(F(e.f,"success "+n),P(a,b.length)):c(d+1,g)},function(b,c){P(a,c,!0);return!1});for(var m=0,q=k.indexes.length;m<q;m++){var u=k.index(m);u.multiEntry&&h(u)}}var d=a.a,e=this;0<b.length?c(0,d):(F(this.f,"success"),P(a,0))};
p.dc=function(a,b){function c(h){if(h>=b.length)P(a,f,g);else{var k=U(e.a,b[h].a),n=od(b[h].id,k.type),m=" WHERE "+k.a+" = ?",q="DELETE FROM "+Rd(k)+m,u=S(a)+" SQL: "+q+" PARAMS: "+[n];d.executeSql(q,[n],function(){f++;c(h)},function(a,b){D(e.f,"error: "+u+b.message);g=!0;c(h);return!1});h++;for(var q=function(b){b="DELETE FROM  "+Ea("ydn.db.me:"+k.getName()+":"+b.getName())+m;F(e.f,S(a)+NaN+b);d.executeSql(b,[n])},s=0,G=k.indexes.length;s<G;s++){var K=k.index(s);K.multiEntry&&q(K)}}}var d=a.a,e=
this,f=0,g=!1;F(this.f,S(a)+" removeByKeys: "+b.length+" keys");c(0)};p.vb=function(a,b,c){function d(b){b="DELETE FROM  "+Ea("ydn.db.me:"+f.getName()+":"+b.getName())+k;F(h.f,S(a)+NaN+b);e.executeSql(b,[g])}var e=a.a,f=U(this.a,b),g=od(c,f.type),h=this,k=" WHERE "+f.a+" = ?";b="DELETE FROM "+Rd(f)+k;F(this.f,S(a)+" SQL: "+b+" PARAMS: "+[g]);e.executeSql(b,[g],function(b,c){P(a,c.rowsAffected)},function(b,c){P(a,c,!0);return!1});b=0;for(c=f.indexes.length;b<c;b++){var n=f.index(b);n.multiEntry&&d(n)}};
p.Ob=function(a,b,c){pg(this,a,b,void 0,c)};p.wb=function(a,b,c){pg(this,a,b,void 0,c)};p.cc=function(a,b,c,d){pg(this,a,b,c,d)};
function pg(a,b,c,d,e){function f(c){c="DELETE FROM  "+Ea("ydn.db.me:"+h.getName()+":"+c.getName())+m;F(a.f,S(b)+NaN+c);g.executeSql(c,n)}var g=b.a,h=U(a.a,c);c="DELETE FROM "+Rd(h);var k=[],n=[],m="";null!=e&&(t(d)?(d=Qd(h,d),nd(d.b,d.type,e,n,k)):nd(h.a,h.type,e,n,k),m=" WHERE "+n.join(" AND "));c+=m;var q=S(b)+" SQL: "+c+" PARAMS: "+k;F(a.f,q);g.executeSql(c,k,function(c,d){F(a.f,"success "+q);P(b,d.rowsAffected)},function(c,d){D(a.f,"error: "+q+d.message);P(b,d,!0);return!1});e=0;for(d=h.indexes.length;e<
d;e++)c=h.index(e),c.multiEntry&&f(c)}p.ib=function(a,b){function c(g){var h="SELECT COUNT(*) FROM "+Ea(b[g]);F(e.f,"SQL: "+h+" PARAMS: []");d.executeSql(h,[],function(d,e){var h=e.rows.item(0);f[g]=parseInt(h["COUNT(*)"],10);g++;g==b.length?P(a,f):c(g)},function(b,c){P(a,c,!0);return!1})}var d=a.a,e=this,f=[];0==b.length?(F(this.f,"success"),P(a,0)):c(0)};
p.za=function(a,b,c,d,e){var f=[];b=Od(U(this.a,b),f,4,d,c,!1,e);F(this.f,S(a)+" SQL: "+b+" PARAMS: "+f);a.a.executeSql(b,f,function(b,c){var d=c.rows.item(0);P(a,qg(d))},function(b,c){P(a,c,!0);return!1})};function rg(a,b){If.call(this,a,b)}B(rg,mg);p=rg.prototype;p.f=H("ydn.db.core.req.WebSql");p.Tb=function(a,b,c,d){sg(this,a,b,1,c,d)};p.Qb=function(a,b){sg(this,a,b,3,1,0)};p.Wb=function(a,b,c,d){sg(this,a,b,2,c,d)};
function sg(a,b,c,d,e,f){var g=b.a,h=S(b),k=[],n=h+" "+(1==d?"keys":2==d?"values":4==d?"count":"")+"ByIterator "+c;0<e&&(n+=" limit "+e);E(a.f,n);var m=Hf(c,g,h,a,d);m.e=function(a){Bf(m);P(b,a,!0)};var q=0,u=!1;m.d=function(g){if(t(g)){var h=m.U(),K=m.ja();!u&&0<f?(m.advance(f),u=!0):(q++,k.push(1==d?g:c.d&&c.b?h:K),!t(e)||q<e?m.a[0].va(void 0):(Bf(m),E(a.f,"success:"+n+" "+k.length+" records"),g=3==d?k[0]:k,P(b,g)))}else Bf(m),E(a.f,"success:"+n+" "+k.length+" records"),g=3==d?k[0]:k,P(b,g)}}
p.nb=function(a,b,c,d,e,f,g,h){var k=U(this.a,c);t(d)&&(d=this.X(k,d));return new fg(a,b,k,c,d,e,f,g,h)};function tg(a){this.d=a;this.a=null;this.b=0}tg.prototype.e=H("ydn.db.tr.Mutex");tg.prototype.P=null;tg.prototype.L=null;tg.prototype.toString=function(){return"Mutex:"+("B"+this.d+"T"+this.b)+(this.a?"*":"")};function ug(a,b,c,d,e,f){this.h=a;this.b=0;this.e=d;this.d=c||"single";this.a=[];this.c=[];this.Ha=null;this.u=new tg(b);this.Jb=f||0}p=ug.prototype;p.u=null;p.Jb=0;p.I=H("ydn.db.tr.Serial");p.Hb=function(){return this.u.b};
function vg(a,b,c){if("multi"==a.d)a:if(a=a.u,!a.P||!a.mode||c!=a.mode&&(a.mode!=L||c!=J)||b.length>a.P.length)b=!1;else{for(c=0;c<b.length;c++)if(-1==a.P.indexOf(b[c])){b=!1;break a}b=!0}else if("repeat"==a.d)a:if(a=a.u,a.P&&a.mode&&c==a.mode&&a.P.length==b.length){for(c=0;c<b.length;c++)if(-1==a.P.indexOf(b[c])){b=!1;break a}b=!0}else b=!1;else b="all"==a.d?!0:!1;return b}p.ud=function(){return this.u.a&&!this.u.c?this.u.a:null};A("ydn.db.tr.Serial.prototype.getTx",ug.prototype.ud);p=ug.prototype;
p.Ha=null;p.type=function(){return this.h.k()};function wg(a){var b=0<a.a.length?a.a[0].P:null,c=0<a.a.length?a.a[0].mode:null;return null!=b&&null!=c?vg(a,b,c):!1}function xg(a,b,c,d,e){F(a.I,"push tx queue["+a.a.length+"]");a.a.push({lb:b,P:c,mode:d,L:e})}
p.pa=function(a,b,c,d){var e=x(b)?[b]:b;if(w(e)){if(0==e.length)throw new N("number of store names must more than 0");for(var f=0;f<e.length;f++){if(!x(e[f]))throw new N("store name at "+f+" must be string but found "+e[f]+" of type "+typeof e[f]);if(this.e&&!(0<=Ia(this.e,e[f])))throw new N('store name "'+f+e[f]+'" in scope of '+this);}}else throw new N("store names must be an array");var g=t(c)?c:J,h=this;if(this.u.a||!(this.h.a&&this.h.a.ab()||0==this.c.length))xg(this,a,b,g,d);else{var k=this.H();
d&&this.c.push(d);if(this.Jb&&this.Hb()>=this.Jb)throw new sd("Exceed maximum number of transactions of "+this.Jb);this.h.ua(function(c){var d=h.u;d.a=c;d.c=!1;d.P=b;d.mode=g;d.b++;d.L=null;k=h.H();Zb(h.I,k+" BEGIN "+T(b)+" "+g);a(h);for(a=null;wg(h);)c=h.a.shift(),c.L&&h.c.push(c.L),Zb(h.I,"pop tx queue"+(h.a.length+1)+" reusing T"+h.Hb()),c.lb()},e,g,function(a,b){Zb(h.I,k+" "+a);for(var c=0;c<h.c.length;c++)(0,h.c[c])(a,b);h.c.length=0;c=h.u;c.a?(c.a=null,c.P=null,c.mode=null,ga(c.L)&&c.L(a,b),
c.L=null):D(c.e,c+" has no TX to be unlocked for "+a);(c=h.a.shift())&&h.pa(c.lb,c.P,c.mode,c.L);h.b=0})}};p.H=function(){return"B"+this.u.d+"T"+this.u.b};p.l=function(a,b,c,d){var e=new Fd(a);a=c||J;var f=this;this.u.a&&!this.u.c&&vg(this,b,a)?(b=this.u.a,this.b++,Gd(e,b,this.H()+"R"+this.b),d&&this.c.push(d)):f.pa(function(){var a=f.u.a;f.b++;Gd(e,a,f.H()+"R"+f.b)},b,a,d);return e};
p.da=function(a,b,c,d,e){d=d||J;var f=this,g;if(f.u.a&&!f.u.c&&vg(this,c,d)){var h=f.u.a;f.b++;g=f.H()+"R"+f.b;E(f.I,g+" BEGIN");b(h,g,function(b,c){f.Ha=h;c?(E(f.I,g+" ERROR"),a.t(b)):(E(f.I,g+" SUCCESS"),a.A(b));f.Ha=null});E(f.I,g+" END");b=null}else f.pa(function(){var c=f.u.a;f.b++;g=f.H()+"R"+f.b;E(f.I,g+" BEGIN");b(c,g,function(b,d){f.Ha=c;d?(E(f.I,g+" ERROR"),a.t(b)):(E(f.I,g+" SUCCESS"),a.A(b));f.Ha=null});E(f.I,g+" END");b=null},c,d,e)};p.getName=function(){return this.h.getName()};
p.toString=function(){return"Serial:"+this.H()+(this.Ha?"*":"")};function yg(a,b){ug.call(this,a,b)}B(yg,ug);yg.prototype.I=H("ydn.db.tr.AtomicSerial");yg.prototype.l=function(a,b,c){var d,e,f,g=yg.v.l.call(this,a,b,c,function(a,b){g.a=null;if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new te;P(g,c,!0)}});Jd(g,function(a,b,c){f=b;e=a;d=c});return g};
yg.prototype.da=function(a,b,c,d,e){var f,g,h=new I;h.fa(function(a){g=!1;f=a},function(a){g=!0;f=a});yg.v.da.call(this,h,b,c,d,function(b,c){if("complete"!=b)a.t(c);else if(!0===g)a.t(f);else if(!1===g)a.A(f);else{var d=new te;a.t(d)}e&&(e(b,c),e=void 0)})};yg.prototype.toString=function(){return"Atomic"+yg.v.toString.call(this)};function zg(a,b,c){this.h=a;this.b=b;this.a=c;this.c=null}zg.prototype.j=H("ydn.db.tr.DbOperator");function Z(a){a.c||(a.c=a.h.Yb());return a.c}zg.prototype.toString=function(){return"TxStorage:"+this.h.getName()};function Ag(a,b,c){zg.call(this,a,b,c)}B(Ag,zg);p=Ag.prototype;p.j=H("ydn.db.crud.DbOperator");
p.count=function(a,b,c,d){var e,f,g,h;if(null!=a)if(v(a)){if(t(c)||t(b))throw new N("too many arguments.");f=a;for(a=0;a<f.length;a++)if(!$d(this.b,f[a]))throw new N('store name "'+f[a]+'" at '+a+" not found.");E(this.j,"countStores: "+T(f));e=this.a.l("count",f);Q(e,function(){Z(this).ib(e,f)},this)}else if(x(a)){if(!U(this.b,a))throw new N('store name "'+a+'" not found.');if(t(d)&&!fa(d))throw new TypeError('unique value "'+d+'" must be boolean, but found '+typeof d+".");f=[a];if(x(b))if(g=b,z(c)){if(b=
ld(c))throw new N("invalid key range: "+V(c)+" "+b);h=jd(c)}else{if(null!=c)throw new N("invalid key range: "+V(c)+" of type "+typeof c);h=null}else if(z(b)||!t(b))if(z(b)){if(c=ld(b))throw new N("invalid key range: "+V(b)+" "+c);h=jd(b)}else{if(null!=b)throw new N("key range must be  an object but found "+V(b)+" of type "+typeof b);h=null}else throw new N("key range must be an object, but "+V(c)+" of type "+typeof b+" found.");E(this.j,"countKeyRange: "+a+" "+(g?g:"")+T(h));e=this.a.l("count",f);
Q(e,function(){Z(this).za(e,f[0],h,g,!!d)},this)}else throw new N("Invalid store name or store names.");else D(this.j,"count method requires store name(s)"),a=Zd(this.b),e=this.a.l("count",a),Jd(e,function(a,b,c){if(b)c(a,!0);else{for(var d=b=0;d<a.length;d++)b+=a[d];c(b,!1)}},this),Q(e,function(){Z(this).ib(e,f)},this);return e};
p.La=function(a,b){var c;if(a instanceof ed){var d=a.a,e=U(this.b,d);if(!e){if(this.b.R())return Ld("get",void 0);throw new N("Store: "+d+" not found.");}var f=a.id;E(this.j,"getByKey: "+d+":"+f);c=this.a.l("get",[d]);Q(c,function(){Z(this).mb(c,d,f)},this)}else if(x(a)&&t(b)){e=U(this.b,a);if(!e){if(this.b.R())return Ld("get",void 0);throw new N('Store name "'+a+'" not found.');}E(this.j,"getById: "+a+":"+b);c=this.a.l("get",[a]);Q(c,function(){Z(this).mb(c,a,b)},this)}else throw new N("get require valid input arguments.");
return c};
p.keys=function(a,b,c,d,e,f){var g,h,k=null,n=!1,m=U(this.b,a);if(!x(a))throw new N("store name must be a string, but "+a+" of type "+typeof a+" is not.");if(!this.b.R()){if(!m)throw new N('store name "'+a+'" not found.');if(x(b)&&!Qd(m,b))throw new N('index "'+b+'" not found in store "'+a+'".');}if(this.b.R()&&!m)return Ld("keys",[]);var q;if(x(b)){if(m=ld(c))throw new N("invalid key range: "+c+" "+m);k=jd(c);if(y(d))g=d;else{if(t(d))throw new N("limit must be a number");g=100}if(y(e))h=e;else{if(t(e))throw new N("offset must be a number");
h=0}if(t(f))if(fa)n=f;else throw new N("reverse must be a boolean");E(this.j,"keysByIndexKeyRange: "+a);q=this.a.l("keys:iter:index",[a]);Q(q,function(){Z(this).Sb(q,a,b,k,n,g,h,!1)},this)}else{if(z(b)){if(m=ld(b))throw new N("invalid key range: "+V(b)+" "+m);k=jd(b)}else{if(null!=b)throw new TypeError("invalid key range: "+V(b)+" of type "+typeof b);k=null}if(y(c))g=c;else{if(t(c))throw new N("limit must be a number");g=100}if(y(d))h=d;else{if(t(d))throw new N("offset must be a number");h=0}if(t(e))if(fa(e))n=
e;else throw new N("reverse must be a boolean");E(this.j,"keysByKeyRange: "+a);q=this.a.l("keys",[a]);Q(q,function(){Z(this).Ub(q,a,k,n,g,h)},this)}return q};
p.G=function(a,b,c,d,e,f){var g,h,k,n=!1;if(x(a)){var m=U(this.b,a);if(!m){if(this.b.R())return Ld("get",[]);throw new ze(a);}if(v(b)){if(t(c)||t(d))throw new N("too many input arguments");E(this.j,"listByIds: "+a+" "+b.length+" ids");g=this.a.l("values:array",[a]);Q(g,function(){Z(this).Vb(g,a,b)},this)}else if(x(b)){if(!Sd(m,b))throw new N('index "'+b+'" not found in store "'+a+'"');if(m=ld(c))throw new N("invalid key range: "+c+" "+m);var q=jd(c);if(t(d))if(y(d))h=d;else throw new N("limit must be a number.");
else h=100;if(t(e))if(y(e))k=e;else throw new N("offset must be a number.");else k=0;if(fa(f))n=f;else if(t(f))throw new N("reverse must be a boolean, but "+f);E(this.j,"listByIndexKeyRange: "+a+":"+b);g=this.a.l("values:iter:index",[a]);Q(g,function(){Z(this).Ua(g,a,b,q,n,h,k,!1)},this)}else{q=null;if(z(b)){if(m=ld(b))throw new N("invalid key range: "+b+" "+m);q=jd(b)}else if(null!=b)throw new TypeError('expect key range object, but found "'+V(b)+'" of type '+typeof b);if(t(c))if(y(c))h=c;else throw new N("limit must be a number, but "+
c+" is "+typeof c);else h=100;if(t(d))if(y(d))k=d;else throw new N("offset must be a number, but "+d+" is "+typeof d);else k=0;if(t(e))if(fa(e))n=e;else throw new N("reverse must be a boolean, but "+e+" is "+typeof e);E(this.j,(q?"listByKeyRange: ":"listByStore: ")+a);g=this.a.l("values",[a]);Q(g,function(){Z(this).sb(g,a,q,n,h,k)},this)}}else if(v(a))if(a[0]instanceof ed){c=[];for(d=0;d<a.length;d++){e=a[d].a;if(!$d(this.b,e)){if(this.b.R())return c=[],c[a.length-1]=void 0,Ld("get",c);throw new N("Store: "+
e+" not found.");}0<=Ia(c,e)||c.push(e)}E(this.j,"listByKeys: "+T(c)+" "+a.length+" keys");g=this.a.l("values:keys",c);Q(g,function(){Z(this).Xb(g,a)},this)}else throw new N("first argumentmust be array of ydn.db.Key, but "+a[0]+" of "+typeof a[0]+" found.");else throw new N("first argument "+a+" is invalid.");return g};
p.Fb=function(a,b,c){var d=x(a)?a:z(a)?a.name:void 0;if(!x(d))throw new N("store name "+d+" must be a string, but "+typeof d);var e=U(this.b,d);if(!e){if(!this.b.R())throw new N('store name "'+d+'" not found.');e=Nd(z(a)?a:{name:d});E(this.j,"Adding object store: "+d);Bg(this.h,e)}else if(this.b.R()&&z(a)&&(a=Nd(a),a=Wd(e,a)))throw new Hd(a);var f;if(!e)throw new N('store name "'+d+'" not found.');if(x(e.keyPath)&&t(c))throw new N("key must not be provided while the store uses in-line key.");if(!e.keyPath&&
!e.autoIncrement&&!t(c))throw new N("out-of-line key must be provided.");if(v(b)){E(this.j,"addObjects: "+d+" "+b.length+" objects");for(a=0;a<b.length;a++)Xd(e,b[a]);f=this.a.l("add:array",[d],L);Q(f,function(){Z(this).Lb(f,d,b,c)},this);e.na&&f.ea(function(a){bd(this.h,new Cg(Dg,this.h,e.getName(),a,b))},this)}else if(z(b))a="store: "+d+" key: "+Td(e,b,c),E(this.j,"addObject: "+a),Xd(e,b),f=this.a.l("add",[d],L),Q(f,function(){Z(this).Kb(f,d,b,c)},this),e.na&&f.ea(function(a){bd(this.h,new Eg(Dg,
this.h,e.getName(),a,b))},this);else throw new N("record must be an object or array list of objects, but "+b+" of type "+typeof b+" found.");return f};function Fg(a,b){var c=x(b)?b:z(b)?b.name:void 0;if(!x(c))throw new N("store name must be a string");var d=U(a.b,c);if(!d){if(!a.b.R())throw new ze(c);d=Nd(z(b)?b:{name:c});E(a.j,"Adding object store: "+c);Bg(a.h,d)}else if(a.b.R()&&z(b)){var e=Nd(b);if(e=Wd(d,e))throw new Hd(e);}if(!d)throw new ze(c);return d}
p.Ma=function(a,b,c){var d,e=this;if(a instanceof ed){var f=a.a,g=U(this.b,f);if(!g)throw new N('store "'+f+'" not found.');if(g.keyPath){var h=Td(g,b);if(null!=h){if(0!=O(h,a.id))throw new N("Inline key must be "+a+" but "+h+" found.");}else Ud(g,b,a.id);return this.Ma(f,b)}return this.Ma(f,b,a.id)}if(v(a)){if(t(c))throw new N("too many arguments");if(!t(b))throw new N("record values required");f=[];g=0;for(h=a.length;g<h;g++){var k=a[g].a;-1==Ia(f,k)&&f.push(k);var n=U(this.b,k);if(!n)throw new N('store "'+
k+'" not found.');n.keyPath&&Ud(n,b[g],a[g].id)}E(this.j,"putByKeys: to "+T(f)+" "+b.length+" objects");for(g=0;g<b.length;g++)Xd(n,b[g]);d=this.a.l("put:keys",f,L);Q(d,function(){Z(e).$b(d,b,a)},this)}else if(x(a)||z(a)){var n=Fg(this,a),m=n.getName();if(n.keyPath&&t(c))throw new N("key must not be provided while the store uses in-line key.");if(!n.keyPath&&!n.autoIncrement&&!t(c))throw new N("out-of-line key must be provided.");if(v(b)){E(this.j,"putObjects: "+m+" "+b.length+" objects");for(g=0;g<
b.length;g++)Xd(n,b[g]);d=this.a.l("put:array",[m],L);Q(d,function(){Z(this).bc(d,m,b,c)},this);n.na&&d.ea(function(a){bd(this.h,new Cg(Gg,this.h,m,a,b))},this)}else if(z(b))E(this.j,"putObject: "+m+" "+c),Xd(n,b),d=this.a.l("put",[m],L),Q(d,function(){Z(e).ac(d,m,b,c)},this),n.na&&d.ea(function(a){bd(this.h,new Eg(Gg,this.h,m,a,b))},this);else throw new N("put record value must be Object or array of Objects");}else throw new N("the first argument of put must be store name, store schema or array of keys.");
return d};
p.clear=function(a,b,c){if(t(c))throw new N("too many input arguments");var d;if(x(a)){if(!U(this.b,a))throw new N('store name "'+a+'" not found.');if(z(b)){var e=jd(b);if(null===e)throw new N("clear method requires a valid non-null KeyRange object.");E(this.j,"clearByKeyRange: "+a+":"+T(e));d=this.a.l("clear",[a],L);Q(d,function(){Z(this).Ob(d,a,e)},this)}else{if(t(b))throw new N("clear method requires a valid KeyRange object as second argument, but found "+b+" of type "+typeof b);E(this.j,"clearByStore: "+
a);d=this.a.l("clear",[a],L);Q(d,function(){Z(this).gb(d,[a])},this)}}else if(!t(a)||v(a)&&x(a[0])){var f=a||Zd(this.b);E(this.j,"clearByStores: "+T(f));d=this.a.l("clear",f,L);Q(d,function(){Z(this).gb(d,f)},this)}else throw new N('first argument "'+a+'" is invalid.');return d};
p.Gb=function(a,b,c){var d;if(x(a)){var e=U(this.b,a);if(!e)throw new N('store name "'+a+'" not found.');if(t(c))if(x(b)){var f=Qd(e,b);if(!f)throw new N("index: "+b+" not found in "+a);if(z(c)||null===c){var g=jd(c);E(this.j,"removeByIndexKeyRange: "+a+":"+f.getName()+" "+a);d=this.a.l("rm:iter:index",[a],L);Q(d,function(){Z(this).cc(d,a,f.getName(),g)},this)}else throw new N("key range "+c+' is invalid type "'+typeof c+'".');}else throw new N('index name "'+b+'" must be a string, but '+typeof b+
" found.");else if(x(b)||y(b)||w(b)||b instanceof Date)E(this.j,"removeById: "+a+":"+b),d=this.a.l("rm",[a],L),Q(d,function(){Z(this).vb(d,a,b)},this),e.na&&d.ea(function(b){bd(this.h,new Eg(Hg,this.h,a,b,void 0))},this);else if(z(b))g=jd(b),E(this.j,"removeByKeyRange: "+a+":"+T(g)),d=this.a.l("rm:iter",[a],L),Q(d,function(){Z(this).wb(d,a,g)},this),e.na&&d.ea(function(b){bd(this.h,new Cg(Hg,this.h,a,b,void 0))},this);else throw new N('Invalid key or key range "'+b+'" of type '+typeof b);}else if(a instanceof
ed)d=this.a.l("rm",[a.a],L),Q(d,function(){Z(this).vb(d,a.a,a.id)},this);else if(v(a)){c=[];for(var e=0,h=a.length;e<h;e++){if(!(a[e]instanceof ed))throw new N("key list element at "+e+" of "+h+' must be yn.db.Key, but "'+V(a[e])+'" ('+da(a[e])+") is not ydn.db.Key.");var k=a[e].a;-1==Ia(c,k)&&c.push(k)}if(1>c.length)throw new N('at least one valid key required in key list "'+V(a)+'"');d=this.a.l("rm:keys",c,L);Q(d,function(){Z(this).dc(d,a)},this)}else throw new N('first argument requires store name, key (ydn.db.Key) or list of keys (array) , but "'+
V(a)+'" ('+da(a)+") found.");return d};p.toString=function(){return"DbOperator:"+this.h.getName()};function Ig(a,b,c){zg.call(this,a,b,c)}B(Ig,Ag);p=Ig.prototype;p.j=H("ydn.db.core.DbOperator");p.La=function(a,b){if(a instanceof X){var c=a.N,d=U(this.b,c);if(!d)throw new N('store "'+c+'" not found.');var e=a.X();if(t(e)&&!Sd(d,e))throw new N('index "'+e+'" not found in store "'+c+'".');E(this.j,"getByIterator:"+a);var f=this.a.l("get:iter",[c]);Q(f,function(){Z(this).Qb(f,a)},this);return f}return Ig.v.La.call(this,a,b)};
p.keys=function(a,b,c,d,e){if(a instanceof X){var f=100;if(y(b)){if(f=b,1>f)throw new N("limit must be a positive value, but "+b);}else if(t(b))throw new N("limit must be a number,  but "+b);if(t(c))throw new N("offset must not be specified");E(this.j,"keysByIterator:"+a);var g=this.a.l("keys:iter",a.stores());Q(g,function(){Z(this).Tb(g,a,f)},this);return g}return Ig.v.keys.call(this,a,b,c,d,e)};
p.count=function(a,b,c){if(a instanceof X){if(t(b)||t(c))throw new N("too many arguments.");E(this.j,"countKeyRange:"+a);var d=this.a.l("count",a.stores());Q(d,function(){Z(this).za(d,a.N,a.Uc(),a.X(),a.Xa())},this);return d}return Ig.v.count.call(this,a,b,c)};
p.G=function(a,b,c,d,e,f){if(a instanceof X){var g;if(y(b)){if(g=b,1>g)throw new N("limit must be a positive value, but "+g);}else if(t(b))throw new N("limit must be a number, but "+b);if(t(c))throw new N("offset must not be specified");E(this.j,"listByIterator:"+a);var h=this.a.l("values:iter",a.stores());Q(h,function(){Z(this).Wb(h,a,g)},this);return h}return Ig.v.G.call(this,a,b,c,d,e,f)};
p.Gc=function(a,b){var c=new I;if(t(b)){if(!v(b))throw new TypeError("Iterator argument must be an array.");for(var d=0;d<b.length;d++)if(!(b[d]instanceof X))throw new TypeError("Iterator at "+d+" must be cursor range iterator.");}var e;e=b?b:null;for(var f=[],d=0;d<e.length;d++)for(var g=e[d].stores(),h=0;h<g.length;h++)0<=Ia(f,g[h])||f.push(g[h]);F(this.j,this+": scan for "+e.length+" iterators on "+f);var k=this;this.a.da(c,function(b,c,d){function f(){for(var a=0,d=0;d<e.length;d++){var q=Hf(e[d],
b,c,Z(k));q.e=g;q.d=na(h,a);R[d]=q;qa[a]=d;a++}ea=e.length}function g(a){for(var b=0;b<R.length;b++)Bf(R[b]);Qa(R);E(k.j,K+" error");d(a,!0)}function h(b,c){if($)throw new de;ua++;var f=ua===ea,g=qa[b],m=e[g],n=R[g],g=n.U(),n=n.ja();Ka[b]=c;La[b]=m.d?m.b?g:n:m.b?c:n;if(f){var u;u=a instanceof Qf?a.c(Ka,La):a(Ka,La);f=[];m=[];g=[];n=[];if(v(u))for(var s=0;s<u.length;s++)!0===u[s]?g[s]=1:!1===u[s]?n[s]=!0:m[s]=u[s];else if(null===u)f=[];else if(t(u))if(z(u)){f=["advance","continue","continuePrimary",
"restart"];for(s in u)if(!(0<=Ia(f,s)))throw new sd('Unknown attribute "'+s+'" in cursor advancement object');f=u.continuePrimary||[];m=u["continue"]||[];g=u.advance||[];n=u.restart||[]}else throw new ee("scan callback output");else for(f=[],s=0;s<e.length;s++)t(qa[s])&&(g[s]=1);for(s=ua=u=0;s<e.length;s++)null!=f[s]||(t(m[s])||null!=n[s]||null!=g[s])||ua++;for(s=0;s<e.length;s++)if(null!=f[s]||t(m[s])||null!=n[s]||null!=g[s]){var G=qa[s];if(!t(G))throw new ee(s+" is not an iterator.");var G=e[G],
Eb=R[s];if(null==Ka[s]){var Re=s+"/"+e.length;if(null!=g[s])throw new fe(Eb+" "+Re+" must not advance "+g[s]+" steps");if(t(m[s]))throw new fe(Eb+" "+Re+" must not continue to key "+m[s]);if(null!=f[s])throw new fe(Eb+" "+Re+" must not continue to primary key "+f[s]);}Ka[s]=void 0;La[s]=void 0;if(null!=n[s])G=Eb,G.O=!1,G.a[0].fb(void 0,void 0);else if(t(m[s]))Eb.a[0].va(m[s]);else if(null!=f[s])Eb.a[0].eb(f[s]);else if(null!=g[s])Eb.advance(1);else throw new de(G+": has no action");u++}if(0==u){for(f=
0;f<R.length;f++)Bf(R[f]);$=!0;Qa(R);E(k.j,"success "+K);d(void 0)}}}var K=c+" "+k+" scanning";F(k.j,K);var $=!1,ea,qa=[],Ka=[],La=[],R=[],ua=0;a instanceof Qf?a.b(e,function(){f()})||f():f()},f,J);return c};
p.Fc=function(a,b,c){if(!(b instanceof X))throw new N("Second argument must be cursor range iterator.");if(!U(this.b,b.N))throw new N('Store "'+b.N+'" not found.');c=c||J;var d=this,e=new I;E(this.j,"open:"+c+" "+b);this.a.da(e,function(c,e,h){F(d.j,e+" iterating "+b);var k=Hf(b,c,e,Z(d));k.e=function(a){h(a,!0)};k.d=function(b){if(null!=b){var c=a(k);!0===c?(k.O=!1,k.a[0].fb(void 0,void 0)):z(c)?!0===c.restart?(b=c["continue"],c=c.continuePrimary,k.O=!1,k.a[0].fb(c,b)):null!=c["continue"]?k.a[0].va(c["continue"]):
null!=c.continuePrimary?k.a[0].eb(c.continuePrimary):(Bf(k),h(void 0)):k.advance(1)}else Bf(k),h(void 0)}},b.stores(),c);return e};p.map=function(a,b){for(var c=this,d=a.stores(),e,f=0;e=d[f];f++)if(!e)throw new N('Store "'+e+'" not found.');e=new I;F(this.j,"map:"+a);this.a.da(e,function(d,e,f){F(c.j,e+" iterating "+a);var n=Hf(a,d,e,Z(c));n.e=function(a){f(a,!1)};n.d=function(c){null!=c?(b(a.d?a.b?c:n.U():a.b?c:n.ja()),n.advance(1)):(f(void 0),b=null)}},d,J);return e};
p.Db=function(a,b,c){for(var d=this,e=a.stores(),f,g=0;f=e[g];g++)if(!f)throw new N('Store "'+f+'" not found.');f=new I;var h=z(c)?ne(T(c)):c;E(this.j,"reduce:"+a);this.a.da(f,function(c,e,f){var g=Hf(a,c,e,Z(d));g.e=function(a){f(a,!0)};var u=0;g.d=function(c){null!=c?(h=b(h,a.d?a.b?c:g.U():a.b?c:g.ja(),u++),g.advance(1)):f(h)}},e,J);return f};var Dg="created",Hg="deleted",Gg="updated";function Jg(a,b){Ec.call(this,a,b)}B(Jg,Ec);Jg.prototype.e=l("c");function Kg(a,b,c,d,e){Ec.call(this,a,b);this.version=c;this.Ic=d;this.xc=e}B(Kg,Jg);p=Kg.prototype;p.name="ReadyEvent";p.version=NaN;p.Ic=NaN;p.xc=null;p.td=l("version");p.Sc=l("Ic");p.Rc=l("xc");function Lg(a,b){Ec.call(this,"fail",a);this.error=b}B(Lg,Jg);Lg.prototype.name="ErrorEvent";function Mg(a,b){Ec.call(this,"fail",a);this.error=b}B(Mg,Jg);Mg.prototype.name="FailEvent";
Mg.prototype.error=null;function Eg(a,b,c,d,e){Ec.call(this,a,b);this.c=c;this.key=d;this.value=e}B(Eg,Jg);Eg.prototype.name="RecordEvent";Eg.prototype.g=l("key");Eg.prototype.i=l("value");function Cg(a,b,c,d,e){Ec.call(this,a,b);this.c=c;this.keys=d;this.G=e}B(Cg,Jg);Cg.prototype.name="StoreEvent";Cg.prototype.oa=l("keys");Cg.prototype.ob=l("G");function re(a,b){Yd.call(this,a,b)}B(re,Yd);re.prototype.R=ba(!0);function se(a,b){a.stores.push(b)};function Ed(a,b){var c;c=c||{};if(null!=a&&null!=b){if(w(a)&&w(b)){if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++)if(-1==Oa(b,function(b){return Ed(b,a[d])}))return!1;return!0}if(w(a))return 1==a.length&&Ed(a[0],b);if(w(b))return 1==b.length&&Ed(b[0],a);if(z(a)&&z(a)){for(var e in a)if(a.hasOwnProperty(e)&&!c[e]){var f=Ed(a[e],b[e]);if(!f)return!1}for(e in b)if(b.hasOwnProperty(e)&&!c[e]&&(f=Ed(a[e],b[e]),!f))return!1;return!0}return a===b}return!1}
function qg(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return a[b]};function Ng(){};function Og(){}B(Og,Ng);Og.prototype.Qa=function(){var a=0;cb(this.xa(!0),function(){a++});return a};Og.prototype.clear=function(){var a=db(this.xa(!0)),b=this;Ja(a,function(a){b.F.removeAttribute(Pg(a));Qg(b)})};function Rg(a,b){if(C&&!(C&&9<=Db)){Sg||(Sg=new eb);var c=Sg;this.F=Object.prototype.hasOwnProperty.call(c.b,a)?c.b[a]:void 0;this.F||(b?this.F=document.getElementById(b):(this.F=document.createElement("userdata"),this.F.addBehavior("#default#userData"),document.body.appendChild(this.F)),fb(Sg,a,this.F));this.ec=a;try{this.F.load(this.ec)}catch(d){this.F=null}}}B(Rg,Og);var Tg={".":".2E","!":".21","~":".7E","*":".2A","'":".27","(":".28",")":".29","%":"."},Sg=null;p=Rg.prototype;p.F=null;p.ec=null;
function Pg(a){return"_"+encodeURIComponent(a).replace(/[.!~*'()%]/g,function(a){return Tg[a]})}p.Qa=function(){return Ug(this).attributes.length};p.xa=function(a){var b=0,c=Ug(this).attributes,d=new ab;d.a=function(){if(b>=c.length)throw $a;var d=c[b++];if(a)return decodeURIComponent(d.nodeName.replace(/\./g,"%")).substr(1);d=d.nodeValue;if(!x(d))throw"Storage mechanism: Invalid value was encountered";return d};return d};
p.clear=function(){for(var a=Ug(this),b=a.attributes.length;0<b;b--)a.removeAttribute(a.attributes[b-1].nodeName);Qg(this)};function Qg(a){try{a.F.save(a.ec)}catch(b){throw"Storage mechanism: Quota exceeded";}}function Ug(a){return a.F.XMLDocument.documentElement};function Vg(){qf.call(this,this)}B(Vg,qf);Vg.prototype.hb=function(a){return new Wg(a)};Vg.prototype.ta=ba("userdata");function Wg(a){this.h=new Rg(a);this.length=this.keys().length}p=Wg.prototype;p.length=0;p.clear=function(){this.h.clear();this.a=[]};p.keys=function(){this.a||(this.a=[],cb(this.h,function(a){this.a.push(a)},this));return this.a};p.key=function(a){return this.keys()[a]};p.setItem=function(a,b){this.a&&this.a.push(a);var c=this.h;c.F.setAttribute(Pg(a),b);Qg(c)};
p.getItem=function(a){a=this.h.F.getAttribute(Pg(a));if(!x(a)&&null!==a)throw"Storage mechanism: Invalid value was encountered";return t(a)?a:null};p.removeItem=function(a){this.a=null;var b=this.h;b.F.removeAttribute(Pg(a));Qg(b)};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function Y(a,b,c){ad.call(this);c=c||{};var d="autoSchema connectionTimeout size mechanisms policy isSerial".split(" "),e;for(e in c)if(c.hasOwnProperty(e)&&-1==Ia(d,e))throw new N('Unknown attribute "'+e+'" in options.');if(c.mechanisms){if(!v(c.mechanisms))throw new N("mechanisms attribute must be an array but "+da(c.mechanisms)+" found.");for(e=0;e<c.mechanisms.length;e++)if(!(0<=Ia(Xg,c.mechanisms[e])))throw new N('Invalid mechanism "'+c.mechanisms[e]+'"');}this.$c=c.mechanisms||Xg;this.yc=c.size;
this.ad=t(c.connectionTimeout)?c.connectionTimeout:3E4;this.Cc=t(c.Cc)?c.Cc:!1;this.a=null;this.i=[];this.rb=!1;if(b instanceof Yd)c=b;else if(z(b))for(c=c.autoSchema||!t(b.stores)?new re(b):new Yd(b),d=b.stores?b.stores.length:0,e=0;e<d;e++){var f=U(c,b.stores[e].name);b.stores[e].Sync&&D(this.e,"Synchronization option for "+f.getName()+" ignored.")}else c=new re;this.b=c;t(a)&&this.Ea(a)}B(Y,ad);Y.prototype.e=H("ydn.db.con.Storage");
Y.prototype.bd=function(a){if(t(a)){var b=function(b){a(b.toJSON())};if(this.a)this.a.Q(b);else{var c=this;this.ua(function(a){c.a.Q(b,a)},null,J)}}return this.b?this.b.toJSON():null};function Bg(a,b){var c=b instanceof Md?b:Nd(b),d=b.name,e=U(a.b,d);if(0==Wd(c,e).length)(new I).A(!1);else if(e=e?"update":"add",a.b instanceof re)se(a.b,c),a.a?(a.a.Ab(),a.a=null,Yg(a)):(new I).A(!1);else throw new vd("Cannot "+e+" store: "+d+". Not auto schema generation mode.");}
Y.prototype.Ea=function(a){if(this.a)throw new sd("Already connected with "+this.d);this.d=a;Yg(this)};A("ydn.db.con.Storage.prototype.setName",Y.prototype.Ea);Y.prototype.getName=l("d");var Xg="indexeddb websql localstorage sessionstorage userdata memory".split(" ");function Zg(a,b){return"indexeddb"==b?new oe(a.yc,a.ad):"websql"==b?new De(a.yc):"localstorage"==b?new sf:"sessionstorage"==b?new uf:"memory"==b?new qf:"userdata"==b?new Vg:null}
function Yg(a){function b(b,e){b?(F(a.e,a+": ready."),a.qd=NaN,d.bb=function(b){bd(a,new Lg(a,b))},d.Cb=function(b){bd(a,new Mg(a,b));a.a=null},dd(function(){bd(a,e);$g(a)}),c.A(e)):(D(a.e,a+": database connection fail "+e.name),dd(function(){bd(a,new Mg(a,h));if(a.i){a.e.log(Qb,"Purging "+a.i.length+" transactions request.",void 0);for(var b;b=a.i.shift();)b.L&&b.L("error",e)}}),c.t(e))}for(var c=new I,d=null,e=a.$c,f=0;f<e.length;f++){var g=e[f].toLowerCase();if("indexeddb"==g&&qe){d=Zg(a,g);break}else if("websql"==
g&&ga(r.openDatabase)){d=Zg(a,g);break}else if("localstorage"==g&&window.localStorage){d=Zg(a,g);break}else if("sessionstorage"==g&&window.sessionStorage){d=Zg(a,g);break}else if("memory"==g){d=Zg(a,g);break}else if("userdata"==g){d=Zg(a,g);break}}if(null===d){var h=new ud("No storage mechanism found.");b(!1,new Kg("ready",a,NaN,NaN,h))}else d.Ja(a.d,a.b).fa(function(a){this.a=d;b(!0,new Kg("ready",this,parseFloat(d.Bb()),parseFloat(a),null))},function(a){D(this.e,this+": opening fail");b(!1,a)},
a)}Y.prototype.k=function(){if(this.a)return this.a.ta()};A("ydn.db.con.Storage.prototype.getType",Y.prototype.k);Y.prototype.vc=function(){this.a&&(this.a.Ab(),this.a=null,F(this.e,this+" closed"))};A("ydn.db.con.Storage.prototype.close",Y.prototype.vc);p=Y.prototype;p.pd=function(){return this.a?this.a.hc():null};p.qd=NaN;function $g(a){var b=a.i.shift();b&&(F(a.e,"pop tx queue["+(a.i.length+1)+"]"),a.ua(b.lb,b.Yc,b.mode,b.L));oa()}
function ah(a,b,c,d,e){F(a.e,"push tx queue["+a.i.length+"]");a.i.push({lb:b,Yc:c,mode:d,L:e});100<a.i.length&&0==a.i.length%100&&D(a.e,"Transaction queue stack size is "+a.i.length+". It is too large, possibility due to incorrect usage.")}p.rb=!1;
p.ua=function(a,b,c,d){var e=b;if(x(b))e=[b];else if(null!=b)if(w(b)){if(0==b.length)throw new N("number of store names must more than 0");for(var f=0;f<b.length;f++)if(!x(b[f]))throw new N("store name at "+f+" must be string but found "+typeof b[f]);}else throw new N("store names must be an array");else e=null;if(this.a&&this.a.ab()&&!this.rb){var g=this,h=t(c)?c:J;h==mc&&(this.rb=!0);this.a.kb(function(b){a(b);a=null},e,h,function(a,b){ga(d)&&(d(a,b),d=void 0);h==mc&&(g.rb=!1);$g(g)})}else ah(this,
a,e,c,d)};p.Rb=function(a,b,c,d){function e(a){if(!(0<=Ia(f,a)))throw new N('Invalid event type "'+a+'"');}var f="created error fail ready deleted updated".split(" ");if(w(a))for(var g=0;g<a.length;g++)e(a[g]);else e(a);Y.v.Rb.call(this,a,b,c,d)};p.toString=function(){return"Storage:"+this.a};function bh(a,b,c,d){this.d=a;this.e=b;this.a=Sa(c);this.b=d;this.c=[]}bh.prototype.d=null;function ch(a,b,c){if(a.d)c&&a.c.push(c),b(a.d);else throw new td("tx committed on ParallelTxExecutor");}bh.prototype.toString=function(){return"ParallelTxExecutor: txNo:"+this.e+" mode:"+this.b+" scopes:"+T(this.a)};function dh(a,b,c,d,e,f){this.h=a;this.e=b;this.a=this.Na=0;this.ub=this.ha=null;this.c=d;this.d=e;this.b=c||"single";this.Ib=f||0}p=dh.prototype;p.Na=0;p.Ib=0;p.ha=null;p.ub=null;p.la=H("ydn.db.tr.Parallel");p.Hb=l("Na");p.type=function(){return this.h.k()};
p.Lc=function(a,b){var c;if("multi"==this.b)a:if(c=this.ha,!c.a||!c.b||b!=c.b&&(c.b!=L||b!=J)||a.length>c.a.length)c=!1;else{for(var d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=!1;break a}c=!0}else if("repeat"==this.b)a:if(c=this.ha,c.a&&c.b&&b==c.b&&c.a.length==a.length){for(d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=!1;break a}c=!0}else c=!1;else c="all"==this.b?!0:!1;return c};
p.pa=function(a,b,c,d){function e(c){k.Na++;n=new bh(c,k.Na,b,h);g=k.H();Zb(k.la,g+" BEGIN "+T(b)+" "+h);k.ha=n;ch(k.ha,a,d)}function f(a,b){Zb(k.la,g+" "+a);for(var c=n,d=0;d<c.c.length;d++)c.c[d](a,b);c.c.length=0;c.d=null;c.a=null;c.c=null}var g;this.c&&(b=this.c);this.d&&(c=this.d);var h=t(c)?c:J,k=this,n;if(this.ha&&this.ha.d&&this.Lc(b,h))ch(this.ha,a,d);else{if(this.Ib&&this.Na>=this.Ib)throw new sd("Exceed maximum number of transactions of "+this.Ib);this.h.ua(e,b,h,f)}};
p.l=function(a,b,c,d){var e=new Fd(a),f=this;this.pa(function(a){f.a++;Gd(e,a,f.H()+"R"+f.a)},b,c||J,d);return e};p.da=function(a,b,c,d,e){var f=this,g;this.pa(function(c){f.a++;g=f.H()+"R"+f.a;E(f.la,g+" BEGIN");b(c,g,function(b,d){f.ub=c;g=f.H()+"R"+f.a;d?(E(f.la,g+" ERROR"),a.t(b)):(E(f.la,g+" SUCCESS"),a.A(b));f.ub=null});b=null;E(f.la,g+" END")},c,d,e)};p.H=function(){return"B"+this.e+"T"+this.Na};p.toString=function(){return"Parallel:"+this.b+":"+this.H()+(this.ub?"*":"")};function eh(a,b){dh.call(this,a,b,"single")}B(eh,dh);p=eh.prototype;p.la=H("ydn.db.tr.AtomicParallel");p.Lc=ba(!1);p.l=function(a,b,c){var d,e,f,g=this,h=eh.v.l.call(this,a,b,c,function(a,b){h.a=null;E(g.la,"transaction "+a);if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new te;P(h,c,!0)}});Jd(h,function(a,b,c){f=b;e=a;d=c});return h};
p.da=function(a,b,c,d,e){var f,g,h=new I;h.fa(function(a){g=!1;f=a},function(a){g=!0;f=a});eh.v.da.call(this,h,b,c,d,function(b,c){if("complete"!=b)a.t(c);else if(!0===g)a.t(f);else if(!1===g)a.A(f);else{var d=new te;a.t(d)}e&&(e(b,c),e=void 0)})};p.toString=function(){return"Atomic"+eh.v.toString.call(this)};function fh(a,b,c){Y.call(this,a,b,c);this.w=0;a=!0;b="single";c&&(t(c.isSerial)&&(a=!!c.isSerial),c.policy&&(b=c.policy));c=gh(this,b,a);this.c=this.Ga(c,null)}B(fh,Y);fh.prototype.w=0;fh.prototype.zc=function(a,b,c,d,e){var f;"readonly"==d?f=J:"readwrite"==d&&(f=L);a=gh(this,a,b,c,f,e);return this.Ga(a,null)};fh.prototype.Ga=function(a){return new zg(this,this.b,a)};
function gh(a,b,c,d,e,f){if(c){if("multi"==b||"repeat"==b||"all"==b||"single"==b)return new ug(a,a.w++,b,d,0,f);if("atomic"==b)return new yg(a,a.w++);throw new N('Invalid requestType "'+b+'"');}if("multi"==b||"repeat"==b||"all"==b||"single"==b)return new dh(a,a.w++,b,d,e,f);if("atomic"==b)return new eh(a,a.w++);throw new N('Invalid requestType "'+b+'"');}
fh.prototype.Xc=function(a,b,c){if(3<arguments.length)throw new N("too many input arguments, run accept not more than 3 input arguments, but "+arguments.length+" found.");var d=this;this.w++;var e=b||Zd(this.b),f=J;if(c)if("readwrite"==c)f=L;else if("readonly"!=c)throw new N('Invalid transaction mode "'+c+'"');var g=gh(this,"all",!1,e,f,1),h=g.l("run",e,f),k=this.Ga(g,null);F(this.e,"scheduling run in transaction with "+g);g.pa(function(){F(d.e,"executing run in transaction on "+g);a(k)},e,f,function(a,
b){h.a=null;var c="complete"===a,d=b;c&&(d=g.Hb());P(h,d,!c)});return h};function hh(a,b,c){fh.call(this,a,b,c)}B(hh,fh);p=hh.prototype;p.Ga=function(a){return new Ag(this,this.b,a)};p.Yb=function(){var a=this.k();if("indexeddb"==a)return new Tf(this.d,this.b);if("websql"==a)return new mg(this.d,this.b);if("memory"==a||"localstorage"==a||"userdata"==a||"sessionstorage"==a)return new ag(this.d,this.b);throw new ye("No executor for "+a);};p.Fb=function(a,b,c){return this.c.Fb(a,b,c)};p.count=function(a,b,c,d){return this.c.count(a,b,c,d)};
p.La=function(a,b){return this.c.La(a,b)};p.keys=function(a,b,c,d,e,f){return this.c.keys(a,b,c,d,e,f)};p.G=function(a,b,c,d,e,f){return this.c.G(a,b,c,d,e,f)};p.Ma=function(a,b,c){return this.c.Ma(a,b,c)};p.clear=function(a,b,c){return this.c.clear(a,b,c)};p.Gb=function(a,b,c){return this.c.Gb(a,b,c)};p.toString=function(){var a="Storage:"+this.getName();this.a&&this.a.ab()&&(a+=" ["+this.k()+"]");return a};function ih(a,b,c){fh.call(this,a,b,c)}B(ih,hh);p=ih.prototype;p.Yb=function(){var a=this.k();if("indexeddb"==a)return new Vf(this.d,this.b);if("websql"==a)return new rg(this.d,this.b);if("memory"==a||"userdata"==a||"localstorage"==a||"sessionstorage"==a)return new dg(this.d,this.b);throw new ye("No executor for "+a);};p.Ga=function(a){return new Ig(this,this.b,a)};p.rd=function(a,b,c){return this.c.Fc(a,b,c)};p.sd=function(a,b){return this.c.Gc(a,b)};p.map=function(a,b){return this.c.map(a,b)};
p.Db=function(a,b,c){return this.c.Db(a,b,c)};function jh(a){this.a=a}jh.prototype.a=[];
jh.prototype.b=function(a,b){for(var c=[],d=0;d<this.a.length;d++){var e=this.a[d],f="'"===e[0]&&"'"===e[e.length-1];if('"'===e[0]&&'"'===e[e.length-1])e=Xa(a,Ba(e,'"').split(".")),c.push(e);else if(f)c.push(Ba(e,"'"));else if(x(e))if("true"===e)c.push(!0);else if("false"===e)c.push(!1);else if("Date"===e)c.push(new Date(parseInt(c.pop(),10)));else if("now"===e)c.push(new Date);else if("!"===e)c[c.length-1]=!c[c.length-1];else if("=="===e)c.push(c.pop()==c.pop());else if("==="===e)c.push(c.pop()===
c.pop());else if("!="===e)c.push(c.pop()!=c.pop());else if("!=="===e)c.push(c.pop()!==c.pop());else if("<="===e)c.push(c.pop()<=c.pop());else if("<"===e)c.push(c.pop()<c.pop());else if(">="===e)c.push(c.pop()>=c.pop());else if(">"===e)c.push(c.pop()>c.pop());else if("&"===e)c.push(c.pop()&c.pop());else if("|"===e)c.push(c.pop()|c.pop());else if("?"===e){var e=!!c.pop(),f=c.pop(),g=c.pop(),e=e?f:g;c.push(e)}else"+"===e?c.push(c.pop()+c.pop()):"-"===e?c.push(c.pop()-c.pop()):"*"===e?c.push(c.pop()*
c.pop()):"/"===e?c.push(c.pop()/c.pop()):"%"===e?c.push(c.pop()%c.pop()):"at"===e?(f=c.pop(),e=c.pop(),c.push(e[f])):"of"===e?(f=c.pop(),e=c.pop(),e=v(e)?e.indexOf(f):-1,c.push(e)):"in"===e?(f=c.pop(),e=c.pop(),e=v(e)?0<=e.indexOf(f):!1,c.push(e)):"abs"===e?c[c.length-1]=Math.abs(c[c.length-1]):"$"==e[0]&&/^\$\d$/.test(e)?(e=parseInt(e.match(/^\$(\d)$/)[1],10),c.push(arguments[e])):c.push(parseFloat(e));else c.push(e)}return c[0]};
jh.prototype.c=function(){return function(){var a=2<arguments.length?Array.prototype.slice(arguments,2):void 0;return jh.prototype.b.apply(null,a)}};jh.prototype.toJSON=function(){return{Tokens:ne(T(this.a))}};function kh(a){if(!x(a))throw new be;this.M=a;lh(this,a);this.Ya=""}p=kh.prototype;p.M="";p.Za=J;p.rc=NaN;p.wc=NaN;p.fc=!1;p.Ya="";
function lh(a,b){var c=b.split(/\sFROM\s/i);if(2!=c.length)throw new Ce("FROM required.");var d=c[1],c=c[0].match(/\s*?(SELECT|INSERT|UPDATE|DELETE)\s+(.*)/i);if(3!=c.length)throw new Ce("Unable to parse: "+b);a.c=c[1].toUpperCase();if("SELECT"==a.c)a.Za=J;else if("INSERT"==a.c)a.Za=L;else if("UPDATE"==a.c)a.Za=L;else if("DELETE"==a.c)a.Za=L;else throw new Ce("Unknown SQL verb: "+a.c);var c=c[2].trim(),e=c.match(/^(MIN|MAX|COUNT|AVG|SUM)/i);e?(a.d=e[0].toUpperCase(),c=c.replace(/^(MIN|MAX|COUNT|AVG|SUM)/i,
"").trim()):a.d=void 0;"("==c.charAt(0)&&(")"==c.charAt(c.length-1)?c=c.substring(1,c.length-1):new Ce("missing closing parentheses"));a.k=c;c=d.search(/(ORDER BY|LIMIT|OFFSET)/i);0<c?(a.a=d.substring(c),d=d.substring(0,c)):a.a="";c=d.search(/WHERE/i);0<c?(a.e=d.substring(c+6).trim(),d=d.substring(0,c)):a.e="";a.b=d.trim().split(",").map(function(a){a=Ba(a,'"');a=Ba(a,"'");return a.trim()})}
function mh(a,b){if(b){for(var c=0;c<b.length;c++)a.M=a.M.replace("?",b[c]);lh(a,a.M)}a.g=nh(a);if(!a.g)return a.Ya;var c=a.a.length,d=/OFFSET\s+(\d+)/i.exec(a.a);d&&(a.wc=parseInt(d[1],10),c=a.a.search(/OFFSET/i));if(d=/LIMIT\s+(\d+)/i.exec(a.a))a.rc=parseInt(d[1],10),d=a.a.search(/LIMIT/i),d<c&&(c=d);(c=/ORDER BY\s+(.+)/i.exec(a.a.substr(0,c)))?(c=c[1].trim(),(d=c.match(/(ASC|DESC)/i))?(a.fc="DESC"==d[0].toUpperCase(),c=c.replace(/\s+(ASC|DESC)/i,"")):a.fc=!1,a.i=Ba(Ba(c,'"'),"'")):a.i=void 0;return""}
function oh(a){if("*"==a.k)return null;a=a.k.split(",");return a=a.map(function(a){return Ba(a.trim(),'"')})}p.toJSON=function(){return{sql:this.M}};
function nh(a){function b(a){return Pa(c,function(b){return b.sa==a})}var c=[],d=/(.+?)(<=|>=|=|>|<)(.+)/i;if(0<a.e.length)for(var e=a.e.split("AND"),f=0;f<e.length;f++){var g=e[f],h=d.exec(g);if(h){var k=h[1].trim(),k=Ba(k,'"'),k=Ba(k,"'");if(0<k.length){var n=h[3].trim(),n=0==n.lastIndexOf('"',0)?Ba(n,'"'):0==n.lastIndexOf("'",0)?Ba(n,"'"):parseFloat(n),h=new Cf(k,h[2],n),k=b(k);if(0<=k){if(c[k]=c[k].Mb(h),!c[k])return a.Ya='where clause "'+g+'" conflict',null}else c.push(h)}else return a.Ya='Invalid clause "'+
g+'"',null}else return a.Ya='Invalid clause "'+g+'"',null}return c}p.toString=function(){return"query:"+this.M};function ph(a,b){this.sql=b;this.a=a}ph.prototype.b=H("ydn.db.sql.req.nosql.Node");ph.prototype.toJSON=function(){return{sql:this.sql}};ph.prototype.toString=ba("idb.Node:");
ph.prototype.jc=function(a,b){var c=Sa(this.sql.b)[0],d=this.sql.g,e=this.sql.rc,e=isNaN(e)?100:e,f=this.sql.wc,f=isNaN(f)?0:f,g=this.sql.i,h=oh(this.sql),k=null,n=this.sql.fc;if(0==d.length)k=null;else if(1==d.length)k=jd(d[0].a);else throw new qd("too many conditions.");null===h||Jd(a,function(a,b,c){var d=a;b||(d=a.map(function(a){var b=h.length;if(1==b)return oc(a,h[0]);for(var c={},d=0;d<b;d++)c[h[d]]=oc(a,h[d]);return c}));c(d,b)});var d=0<d.length?d[0].sa:void 0,m=S(a)+" executing on"+c;d&&
(m+=":"+d);m+=" "+md(k);E(this.b,m);g&&g!=this.a.keyPath?b.Ua(a,c,g,k,n,e,f,!1):t(d)&&d!=this.a.keyPath?b.Ua(a,c,d,k,n,e,f,!1):b.sb(a,c,k,n,e,f)};function qh(a,b){ph.call(this,a,b)}B(qh,ph);
qh.prototype.jc=function(a,b){var c,d=Sa(this.sql.b)[0],e=this.sql.g,f=null;if(0==e.length)f=null;else if(1==e.length)f=jd(e[0].a);else throw new qd("too many conditions.");var g=this.sql.d,e=0<e.length?e[0].sa:void 0,h=S(a)+" executing "+g+" on "+d;e&&(h+=":"+e);h+=" "+md(f);E(this.b,h);if("COUNT"==g)f?b.za(a,d,f,e,!1):b.za(a,d,null,void 0,!1);else{var k,h=oh(this.sql);if(!h||0==h.length)throw new fe("field name require for reduce operation: "+g);h=h[0];if("MIN"==g)k=rh(h);else if("MAX"==g)k=sh(h);
else if("AVG"==g)c=0,k=th(h);else if("SUM"==g)c=0,k=vh(h);else throw new Hd(g);var n;n=t(e)?new Gf(d,e,f):new Ff(d,f);var m=Hf(n,a.a,S(a),b);m.e=function(b){P(a,b,!0)};var q=0;m.d=function(b){null!=b?(c=k(n.b?m.U():m.ja(),c,q),m.advance(1),q++):P(a,c)}}};function th(a){return function(b,c,d){t(c)||(c=0);return(c*d+b[a])/(d+1)}}function vh(a){return function(b,c){return c+b[a]}}function rh(a){return function(b,c){var d=b[a];return t(c)?c<d?c:d:d}}
function sh(a){return function(b,c){var d=b[a];return t(c)?c>d?c:d:d}};function wh(a,b){If.call(this,a,b)}B(wh,Vf);wh.prototype.f=H("ydn.db.sql.req.IndexedDb");wh.prototype.executeSql=function(a,b,c){if(c=mh(b,c))throw new Ce(c);c=Sa(b.b);if(1==c.length){var d=U(this.a,c[0]);if(!d)throw new ze(c[0]);var e=oh(b);if(e)for(var f=0;f<e.length;f++)if(!Sd(d,e[f]))throw new ze('Index "'+e[f]+'" not found in '+c[0]);(b.d?new qh(d,b):new ph(d,b)).jc(a,this)}else throw new Hd(b.M);};function xh(a,b){this.sql=b;this.c=a;this.a=oh(b)}xh.prototype.b=H("ydn.db.sql.req.websql.Node");xh.prototype.toJSON=function(){return{sql:this.sql.M}};xh.prototype.toString=ba("websql.Node:");function yh(a,b){if(a.a){if(1==a.a.length){if(z(b))return Xa(b,a.a[0]);return}for(var c={},d=0;d<a.a.length;d++)c[a.a[d]]=Xa(b,a.a[d]);return c}return hg(b,a.c)}
xh.prototype.Kc=function(a,b,c){var d=this,e=[];b.executeSql(this.sql.M,c,function(b,c){for(var h=c.rows.length,k=0;k<h;k++){var n=c.rows.item(k);if(z(n))var m=yh(d,n);e.push(m)}a(e)},function(b,c){D(d.b,"Sqlite error: "+c.message);a(c,!0);return!0})};function zh(a,b){xh.call(this,a,b)}B(zh,xh);zh.prototype.Kc=function(a,b,c){var d=this;b.executeSql(this.sql.M,c,function(b,c){var d=c.rows.length;if(1==d)d=qg(c.rows.item(0)),a(d);else if(0==d)a(void 0);else throw new ye;},function(b,c){D(d.b,"Sqlite error: "+c.message);a(c,!0);return!0})};function Ah(a,b){If.call(this,a,b)}B(Ah,rg);Ah.prototype.f=H("ydn.db.sql.req.WebSql");Ah.prototype.executeSql=function(a,b,c){var d=Sa(b.b);if(1==d.length){var e=U(this.a,d[0]);if(!e)throw new ze(d[0]);var f=oh(b);if(f)for(var g=0;g<f.length;g++)if(!Sd(e,f[g]))throw new ze('Index "'+f[g]+'" not found in '+d[0]);(b.d?new zh(e,b):new xh(e,b)).Kc(function(b,c){P(a,b,c)},a.a,c)}else throw new Hd(b.M);};function Bh(a,b){If.call(this,a,b)}B(Bh,dg);Bh.prototype.f=H("ydn.db.sql.req.SimpleStore");Bh.prototype.executeSql=function(a,b,c){if(c=mh(b,c))throw new Ce(c);c=Sa(b.b);if(1==c.length){var d=U(this.a,c[0]);if(!d)throw new ze(c[0]);var e=oh(b);if(e)for(var f=0;f<e.length;f++)if(!Sd(d,e[f]))throw new N('Index "'+e[f]+'" not found in '+c[0]);(b.d?new qh(d,b):new ph(d,b)).jc(a,this)}else throw new qd(b.M);};function Ch(a,b,c){zg.call(this,a,b,c)}B(Ch,Ig);Ch.prototype.executeSql=function(a,b){for(var c=new kh(a),d=Sa(c.b),e=0;e<d.length;e++){var f=U(this.b,d[e]);if(!f)throw new N("store: "+f+" not exists.");}E(this.j,"executeSql: "+a+" params: "+b);var g=this.a.l("sql",Sa(c.b),c.Za);Q(g,function(){Z(this).executeSql(g,c,b||[])},this);return g};function Dh(a,b,c){fh.call(this,a,b,c)}B(Dh,ih);Dh.prototype.Yb=function(){var a=this.k();if("indexeddb"==a)return new wh(this.d,this.b);if("websql"==a)return new Ah(this.d,this.b);if("memory"==a||"localstorage"==a||"userdata"==a||"sessionstorage"==a)return new Bh(this.d,this.b);throw new ye("No executor for "+a);};Dh.prototype.Ga=function(a){return new Ch(this,this.b,a)};Dh.prototype.executeSql=function(a,b){return this.c.executeSql(a,b)};function Eh(a,b,c){fh.call(this,a,b,c)}B(Eh,Dh);function Fh(a,b){Qf.call(this,a,b)}B(Fh,Qf);Fh.prototype.b=ba(!1);Fh.prototype.c=function(a,b){function c(b){t(a[b])?(e=!1,d[b]=!0):(d[b]=!1,0<=b-1&&c(b-1))}var d=[],e=!0;c(a.length-1);e&&(d=[]);return Rf(this,d,b)};function Gh(a,b){Qf.call(this,a,b);this.d=a instanceof Nf&&!!a.Ia}B(Gh,Qf);Gh.prototype.i=H("ydn.db.algo.ZigzagMerge");Gh.prototype.d=!1;Gh.prototype.b=function(a,b){var c=Gh.v.b.call(this,a,b);if(this.d){var d=a[0].X().split(", ");if(1<d.length){if(d[d.length-1]!=this.a.Ia)throw new fe("Output streamer projection field must be same as postfix field in the iterator");}else D(this.i,"Unable to check correctness of output streamer.")}return c};
Gh.prototype.c=function(a,b){function c(a,b){var c=a.slice(0,a.length-1);c.push(b);return c}var d=[];if(0==a.length||null==a[0]||null==a[0])return[];for(var e=!0,f=0,g=a[f][a[f].length-1],h=[],k=1;k<a.length;k++)if(null!=a[k]){var n=a[k][a[k].length-1],m=O(g,n);h[k]=m;1===m?e=!1:-1===m&&(e=!1,g=n,f=1)}else return[];if(e){for(e=0;e<a.length;e++)null!=a[e]&&(d[e]=!0);this.a&&(this.d?this.a.push(b[0],g):this.a.push(b[0]));return d}if(0==f)for(e=1;e<a.length;e++)1===h[e]&&(d[e]=c(a[e],g));else for(e=
0;e<a.length;e++)e!=f&&null!=a[e]&&1===O(g,a[e][a[e].length-1])&&(d[e]=c(a[e],g));return{"continue":d}};function Hh(a,b){Qf.call(this,a,b)}B(Hh,Qf);Hh.prototype.b=ba(!1);Hh.prototype.c=function(a,b){var c=[],d=b[0];if(null==d)return[];for(var e=!0,f=!1,g=d,h=[],k=1;k<a.length;k++)if(null!=b[k]){var n=O(d,b[k]);h[k]=n;1===n?e=!1:-1===n&&(e=!1,f=!0,1===O(b[k],g)&&(g=b[k]))}else e=!1,f=!0;if(e)for(f=0;f<a.length;f++)null!=b[f]&&(c[f]=!0);else if(f)for(f=0;f<a.length;f++)null!=b[f]&&1===O(g,b[f])&&(c[f]=g);else for(f=1;f<a.length;f++)1===h[f]&&(c[f]=d);return e?(this.e++,this.a&&this.a.push(g),c):{continuePrimary:c}};A("ydn.db.Storage",Eh);A("ydn.db.algo.NestedLoop",Fh);A("ydn.db.algo.ZigzagMerge",Gh);A("ydn.db.algo.SortedMerge",Hh);I.prototype.done=I.prototype.ea;I.prototype.fail=I.prototype.lc;I.prototype.then=I.prototype.fa;I.prototype.always=I.prototype.Mc;ad.prototype.addEventListener=ad.prototype.Rb;A("ydn.db.con.Storage",Y);Y.prototype.getType=Y.prototype.k;Y.prototype.setName=Y.prototype.Ea;Y.prototype.getName=Y.prototype.getName;Y.prototype.getSchema=Y.prototype.bd;Y.prototype.transaction=Y.prototype.ua;Y.prototype.close=Y.prototype.vc;A("ydn.db.version","0.7.5");A("ydn.db.deleteDatabase",function(a,b){qe&&((!b||"indexeddb"==b)&&qe&&"deleteDatabase"in qe)&&qe.deleteDatabase(a);!ga(r.openDatabase)||b&&"websql"!=b||Ge(a);b&&"localstorage"!=b||tf(a);b&&"sessionstorage"!=b||vf(a)});
Kg.prototype.name=Kg.prototype.name;Kg.prototype.getVersion=Kg.prototype.td;Kg.prototype.getOldVersion=Kg.prototype.Sc;Kg.prototype.getOldSchema=Kg.prototype.Rc;Fd.prototype.abort=Fd.prototype.nd;Fd.prototype.canAbort=Fd.prototype.Pc;fh.prototype.branch=fh.prototype.zc;fh.prototype.run=fh.prototype.Xc;hh.prototype.branch=hh.prototype.zc;hh.prototype.add=hh.prototype.Fb;hh.prototype.get=hh.prototype.La;hh.prototype.values=hh.prototype.G;hh.prototype.put=hh.prototype.Ma;hh.prototype.clear=hh.prototype.clear;hh.prototype.remove=hh.prototype.Gb;hh.prototype.count=hh.prototype.count;Ag.prototype.add=Ag.prototype.Fb;Ag.prototype.get=Ag.prototype.La;Ag.prototype.values=Ag.prototype.G;Ag.prototype.put=Ag.prototype.Ma;Ag.prototype.clear=Ag.prototype.clear;Ag.prototype.remove=Ag.prototype.Gb;
Ag.prototype.count=Ag.prototype.count;A("ydn.db.cmp",O);A("ydn.db.Key",ed);ed.prototype.id=ed.prototype.Qc;ed.prototype.parent=ed.prototype.ld;ed.prototype.storeName=ed.prototype.md;A("ydn.db.KeyRange",M);M.upperBound=M.upperBound;M.lowerBound=M.lowerBound;M.bound=M.bound;M.only=M.only;M.starts=hd;Jg.prototype.store_name=Jg.prototype.c;Jg.prototype.getStoreName=Jg.prototype.e;Eg.prototype.name=Eg.prototype.name;Eg.prototype.getKey=Eg.prototype.g;Eg.prototype.getValue=Eg.prototype.i;
Cg.prototype.name=Cg.prototype.name;Cg.prototype.getKeys=Cg.prototype.oa;Cg.prototype.getValues=Cg.prototype.ob;ih.prototype.scan=ih.prototype.sd;ih.prototype.map=ih.prototype.map;ih.prototype.reduce=ih.prototype.Db;ih.prototype.open=ih.prototype.rd;Ig.prototype.scan=Ig.prototype.Gc;Ig.prototype.map=Ig.prototype.map;Ig.prototype.reduce=Ig.prototype.Db;Ig.prototype.open=Ig.prototype.Fc;wf.prototype.getKey=wf.prototype.Dc;wf.prototype.getPrimaryKey=wf.prototype.U;wf.prototype.getValue=wf.prototype.ja;wf.prototype.update=wf.prototype.update;wf.prototype.clear=wf.prototype.clear;A("ydn.math.Expression",jh);
jh.prototype.evaluate=jh.prototype.b;jh.prototype.compile=jh.prototype.c;jh.parseRpn=function(a){return new jh(a.match(/[^\s"']+|"[^"]*"|'[^']*'/g))};jh.parseInfix=function(){throw new ce("Too lazy to learn Dutch in Shunting Yard station, we speak Polish here.");};A("ydn.db.Iterator",X);A("ydn.db.KeyCursors",Df);A("ydn.db.ValueCursors",Ff);A("ydn.db.Cursors",Ef);A("ydn.db.IndexValueCursors",Gf);X.prototype.count=X.prototype.count;X.prototype.getState=X.prototype.pc;X.prototype.getKeyRange=X.prototype.dd;
X.prototype.getIndexName=X.prototype.X;X.prototype.getStoreName=X.prototype.fd;X.prototype.isReversed=X.prototype.yb;X.prototype.isUnique=X.prototype.Xa;X.prototype.isKeyIterator=X.prototype.gd;X.prototype.isIndexIterator=X.prototype.Tc;X.prototype.getPrimaryKey=X.prototype.ed;X.prototype.getKey=X.prototype.cd;X.prototype.resume=X.prototype.Wc;X.prototype.reset=X.prototype.jd;X.prototype.reverse=X.prototype.kd;Df.where=function(a,b,c,d,e){return new Df(a,pd(b,c,d,e))};
Ff.where=function(a,b,c,d,e){return new Ff(a,pd(b,c,d,e))};Ef.where=function(a,b,c,d,e,f){return new Ef(a,b,pd(c,d,e,f))};Gf.where=function(a,b,c,d,e,f){return new Gf(a,b,pd(c,d,e,f))};A("ydn.db.Streamer",Nf);Nf.prototype.push=Nf.prototype.push;Nf.prototype.collect=Nf.prototype.od;Nf.prototype.setSink=Nf.prototype.Zc;var Ih=new function(){this.a=oa()};function Jh(a){this.d=a||"";this.e=Ih}Jh.prototype.a=!0;Jh.prototype.b=!1;function Kh(a){a=new Date(a.g);return Lh(a.getFullYear()-2E3)+Lh(a.getMonth()+1)+Lh(a.getDate())+" "+Lh(a.getHours())+":"+Lh(a.getMinutes())+":"+Lh(a.getSeconds())+"."+Lh(Math.floor(a.getMilliseconds()/10))}function Lh(a){return 10>a?"0"+a:String(a)}function Mh(a,b){var c=(a.g-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function Nh(a){Jh.call(this,a)}B(Nh,Jh);Nh.prototype.b=!0;
Nh.prototype.c=function(a){var b;switch(a.e.value){case Nb.value:b="dbg-sh";break;case Ob.value:b="dbg-sev";break;case Pb.value:b="dbg-w";break;case Qb.value:b="dbg-i";break;default:b="dbg-f"}var c=[];c.push(this.d," ");this.a&&c.push("[",Kh(a),"] ");c.push("[",Aa(Mh(a,this.e.a)),"s] ");c.push("[",ta(a.c),"] ");c.push('<span class="',b,'">',sa(Aa(ta(a.d))));this.b&&a.b&&c.push("<br>",sa(Aa(a.a||"")));c.push("</span><br>");return c.join("")};function Oh(a){Jh.call(this,a)}B(Oh,Jh);
Oh.prototype.c=function(a){var b=[];b.push(this.d," ");this.a&&b.push("[",Kh(a),"] ");b.push("[",Mh(a,this.e.a),"s] ");b.push("[",a.c,"] ");b.push(a.d,"\n");this.b&&a.b&&b.push(a.a,"\n");return b.join("")};function Ph(){this.e=ma(this.g,this);this.a=new Oh;this.a.a=!1;this.b=this.a.b=!1;this.c="";this.d={}}Ph.prototype.g=function(a){if(!this.d[a.c]){var b=this.a.c(a),c=Qh;if(c)switch(a.e){case Nb:Rh(c,"info",b);break;case Ob:Rh(c,"error",b);break;case Pb:Rh(c,"warn",b);break;default:Rh(c,"debug",b)}else window.opera?window.opera.postError(b):this.c+=b}};var Qh=window.console;function Rh(a,b,c){if(a[b])a[b](c);else a.log(c)};var Sh,Th=!C||C&&9<=Db;!qb&&!C||C&&C&&9<=Db||qb&&Ab("1.9.1");C&&Ab("9");function Uh(a,b){var c;c=a.className;c=x(c)&&c.match(/\S+/g)||[];for(var d=Ta(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=Ia(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e};function Vh(a,b){Wa(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Wh?a.setAttribute(Wh[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Wh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Xh(a,b,c){function d(c){c&&b.appendChild(x(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];!w(f)||z(f)&&0<f.nodeType?d(f):Ja(Yh(f)?Sa(f):f,d)}}function Yh(a){if(a&&"number"==typeof a.length){if(z(a))return"function"==typeof a.item||"string"==typeof a.item;if(ga(a))return"function"==typeof a.item}return!1}function Zh(a){this.a=a||r.document||document}
function $h(a,b){var c;c=a.a;var d=b&&"*"!=b?b.toUpperCase():"";c.querySelectorAll&&c.querySelector&&d?c=c.querySelectorAll(d+""):c=c.getElementsByTagName(d||"*");return c}
Zh.prototype.b=function(a,b,c){var d=this.a,e=arguments,f=e[0],g=e[1];if(!Th&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',ta(g.name),'"');if(g.type){f.push(' type="',ta(g.type),'"');var h={};Za(h,g);delete h.type;g=h}f.push(">");f=f.join("")}f=d.createElement(f);g&&(x(g)?f.className=g:v(g)?Uh.apply(null,[f].concat(g)):Vh(f,g));2<e.length&&Xh(d,f,e);return f};
Zh.prototype.contains=function(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};function ai(a){this.e=ma(this.g,this);this.b=new Nh;this.c=this.b.a=!1;this.a=a;this.d=this.a.ownerDocument||this.a.document;var b=(a=this.a)?new Zh(9==a.nodeType?a:a.ownerDocument||a.document):Sh||(Sh=new Zh),c=null;C?(a=c=b.a.createStyleSheet(),C?a.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
a.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}"):(a=$h(b,"head")[0],a||(c=$h(b,"body")[0],a=b.b("head"),c.parentNode.insertBefore(a,c)),b=c=b.b("style"),C?b.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
b.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}",a.appendChild(c));this.a.className+=" logdiv"}
ai.prototype.g=function(a){var b=100>=this.a.scrollHeight-this.a.scrollTop-this.a.clientHeight,c=this.d.createElement("div");c.className="logmsg";c.innerHTML=this.b.c(a);this.a.appendChild(c);b&&(this.a.scrollTop=this.a.scrollHeight)};ai.prototype.clear=function(){this.a.innerHTML=""};var bi=null,ci=null;H("ydn.debug");A("ydn.debug.log",function(a,b,c){if(y(b))b=new Mb("log",b);else if(x(b)){b=b.toUpperCase();if(!Wb){Wb={};for(var d=0,e;e=Vb[d];d++)Wb[e.value]=e,Wb[e.name]=e}b=Wb[b]||null}else b=Sb;H(a||"ydn").b=b;t(c)?ci||(a=ci=new ai(c),!0!=a.c&&(c=cc(),b=a.e,c.a||(c.a=[]),c.a.push(b),a.c=!0),cc().b=Pb):bi||ci||(a=bi=new Ph,!0!=a.b&&(c=cc(),b=a.e,c.a||(c.a=[]),c.a.push(b),a.b=!0),cc().b=Pb)});Y.prototype.db=Y.prototype.pd;})();

            //# sourceMappingURL=zsu-ydn.db-dev.js.map
        

            })();
        