(function(c){function e(){this._disabledInputs=[];this.regional=[];this.regional[""]={datetimeFormat:"O/D/Y H:Ma",datetimeSeparators:".",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ampmNames:["AM","PM"],spinnerTexts:["Today","Previous field","Next field","Increment","Decrement"],isRTL:false};this._defaults={appendText:"",initialField:0,useMouseWheel:true,shortYearCutoff:"+10",defaultDatetime:null,minDatetime:null,maxDatetime:null,minTime:null,maxTime:null,timeSteps:[1,1,1],spinnerImage:"spinnerDefault.png",spinnerSize:[20,20,8],spinnerBigImage:"",spinnerBigSize:[40,40,16],spinnerIncDecOnly:false,spinnerRepeat:[500,250],beforeShow:null,altField:null,altFormat:null};c.extend(this._defaults,this.regional[""])}var d="datetimeEntry";c.extend(e.prototype,{markerClassName:"hasDatetimeEntry",setDefaults:function(f){a(this._defaults,f||{});return this},_connectDatetimeEntry:function(i,n){var l=c(i);if(l.hasClass(this.markerClassName)){return}var h={};h.options=c.extend({},n);h._selectedYear=0;h._selectedMonth=0;h._selectedDay=0;h._selectedHour=0;h._selectedMinute=0;h._selectedSecond=0;h._field=0;this._decodeDatetimeFormat(h);h.input=c(i);c.data(i,d,h);var f=this._get(h,"spinnerImage");var j=this._get(h,"spinnerText");var k=this._get(h,"spinnerSize");var g=this._get(h,"appendText");var m=(!f?null:c('<span class="datetimeEntry_control" style="display: inline-block; background: url(\''+f+"') 0 0 no-repeat; width: "+k[0]+"px; height: "+k[1]+"px;"+(c.browser.mozilla&&c.browser.version<"1.9"?" padding-left: "+k[0]+"px; padding-bottom: "+(k[1]-18)+"px;":"")+'"></span>'));l.wrap('<span class="datetimeEntry_wrap"></span>').after(g?'<span class="datetimeEntry_append">'+g+"</span>":"").after(m||"");l.addClass(this.markerClassName).bind("focus.datetimeEntry",this._doFocus).bind("blur.datetimeEntry",this._doBlur).bind("click.datetimeEntry",this._doClick).bind("keydown.datetimeEntry",this._doKeyDown).bind("keypress.datetimeEntry",this._doKeyPress);if(c.browser.mozilla){l.bind("input.datetimeEntry",function(o){c.datetimeEntry._extractDatetime(h)})}if(c.browser.msie){l.bind("paste.datetimeEntry",function(o){setTimeout(function(){c.datetimeEntry._extractDatetime(h)},1)})}if(this._get(h,"useMouseWheel")&&c.fn.mousewheel){l.mousewheel(this._doMouseWheel)}if(m){m.mousedown(this._handleSpinner).mouseup(this._endSpinner).mouseover(this._expandSpinner).mouseout(this._endSpinner).mousemove(this._describeSpinner)}},_enableDatetimeEntry:function(f){this._enableDisable(f,false)},_disableDatetimeEntry:function(f){this._enableDisable(f,true)},_enableDisable:function(f,g){var h=c.data(f,d);if(!h){return}f.disabled=g;if(f.nextSibling&&f.nextSibling.nodeName.toLowerCase()=="span"){c.datetimeEntry._changeSpinner(h,f.nextSibling,(g?5:-1))}c.datetimeEntry._disabledInputs=c.map(c.datetimeEntry._disabledInputs,function(i){return(i==f?null:i)});if(g){c.datetimeEntry._disabledInputs.push(f)}},_isDisabledDatetimeEntry:function(f){return c.inArray(f,this._disabledInputs)>-1},_changeDatetimeEntry:function(g,i,k){var j=c.data(g,d);if(j){if(typeof i=="string"){var h=i;i={};i[h]=k}var f=this._parseDatetime(j,c(g).val());a(j.options,i||{});this._decodeDatetimeFormat(j);if(f){this._setDatetime(j,f)}}c.data(g,d,j)},_decodeDatetimeFormat:function(g){var h=this._get(g,"datetimeFormat");g._fields=[];g._ampmField=-1;for(var f=0;f<h.length;f++){if(h.charAt(f).match(/[yYoOnNdDwWhHmMsSa]/)){g._fields.push(f)}if(h.charAt(f)=="a"){g._ampmField=g._fields.length-1}}},_destroyDatetimeEntry:function(f){$input=c(f);if(!$input.hasClass(this.markerClassName)){return}$input.removeClass(this.markerClassName).unbind(".datetimeEntry");if(c.fn.mousewheel){$input.unmousewheel()}this._disabledInputs=c.map(this._disabledInputs,function(g){return(g==f?null:g)});$input.parent().replaceWith($input);c.removeData(f,d)},_setDatetimeDatetimeEntry:function(f,h){var g=c.data(f,d);if(g){if(h===null||h===""){g.input.val("")}else{this._setDatetime(g,h?(typeof h=="object"?new Date(h.getTime()):h):null)}}},_getDatetimeDatetimeEntry:function(f){var g=c.data(f,d);return(g?this._parseDatetime(g,c(f).val()):null)},_getOffsetDatetimeEntry:function(f){var g=c.data(f,d);var h=(g?c.datetimeEntry._parseDatetime(g,g.input.val()):null);return(!h?0:(h.getHours()*3600+h.getMinutes()*60+h.getSeconds())*1000)},_doFocus:function(h){var f=(h.nodeName&&h.nodeName.toLowerCase()=="input"?h:this);if(c.datetimeEntry._lastInput==f||c.datetimeEntry._isDisabledDatetimeEntry(f)){c.datetimeEntry._focussed=false;return}var g=c.data(f,d);c.datetimeEntry._focussed=true;c.datetimeEntry._lastInput=f;c.datetimeEntry._blurredInput=null;var i=c.datetimeEntry._get(g,"beforeShow");a(g.options,(i?i.apply(f,[f]):{}));c.data(f,d,g);c.datetimeEntry._extractDatetime(g);setTimeout(function(){c.datetimeEntry._showField(g)},10)},_doBlur:function(f){c.datetimeEntry._blurredInput=c.datetimeEntry._lastInput;c.datetimeEntry._lastInput=null},_doClick:function(g){var p=g.target;var m=c.data(p,d);if(!c.datetimeEntry._focussed){var l=c.datetimeEntry._get(m,"datetimeFormat");m._field=0;if(p.selectionStart!=null){var h=0;for(var j=0;j<l.length;j++){h+=c.datetimeEntry._fieldLength(m,l.charAt(j));if(p.selectionStart<h){break}m._field+=(l.charAt(j).match(/[yondwhmsa]/i)?1:0)}}else{if(p.createTextRange){var f=c(g.srcElement);var n=p.createTextRange();var o=function(i){return{thin:2,medium:4,thick:6}[i]||i};var k=g.clientX+document.documentElement.scrollLeft-(f.offset().left+parseInt(o(f.css("border-left-width")),10))-n.offsetLeft;var h=0;for(var j=0;j<l.length;j++){h+=c.datetimeEntry._fieldLength(m,l.charAt(j));n.collapse();n.moveEnd("character",h);if(k<n.boundingWidth){break}m._field+=(l.charAt(j).match(/[yondwhmsa]/i)?1:0)}}}}c.data(p,d,m);c.datetimeEntry._showField(m);c.datetimeEntry._focussed=false},_doKeyDown:function(f){if(f.keyCode>=48){return true}var g=c.data(f.target,d);switch(f.keyCode){case 9:return(f.shiftKey?c.datetimeEntry._changeField(g,-1,true):c.datetimeEntry._changeField(g,+1,true));case 35:if(f.ctrlKey){c.datetimeEntry._setValue(g,"")}else{g._field=g._fields.length-1;c.datetimeEntry._adjustField(g,0)}break;case 36:if(f.ctrlKey){c.datetimeEntry._setDatetime(g)}else{g._field=0;c.datetimeEntry._adjustField(g,0)}break;case 37:c.datetimeEntry._changeField(g,-1,false);break;case 38:c.datetimeEntry._adjustField(g,+1);break;case 39:c.datetimeEntry._changeField(g,+1,false);break;case 40:c.datetimeEntry._adjustField(g,-1);break;case 46:c.datetimeEntry._setValue(g,"");break}return false},_doKeyPress:function(g){var f=String.fromCharCode(g.charCode==undefined?g.keyCode:g.charCode);if(f<" "){return true}var h=c.data(g.target,d);c.datetimeEntry._handleKeyPress(h,f);return false},_doMouseWheel:function(f,h){if(c.datetimeEntry._isDisabledDatetimeEntry(f.target)){return}h=(c.browser.opera?-h/Math.abs(h):(c.browser.safari?h/Math.abs(h):h));var g=c.data(f.target,d);g.input.focus();if(!g.input.val()){c.datetimeEntry._extractDatetime(g)}c.datetimeEntry._adjustField(g,h);f.preventDefault()},_expandSpinner:function(i){var m=c.datetimeEntry._getSpinnerTarget(i);var k=c.data(c.datetimeEntry._getInput(m),d);if(c.datetimeEntry._isDisabledDatetimeEntry(k.input[0])){return}var h=c.datetimeEntry._get(k,"spinnerBigImage");if(h){k._expanded=true;var l=c(m).offset();var j=null;c(m).parents().each(function(){var n=c(this);if(n.css("position")=="relative"||n.css("position")=="absolute"){j=n.offset()}return !j});var g=c.datetimeEntry._get(k,"spinnerSize");var f=c.datetimeEntry._get(k,"spinnerBigSize");c('<div class="datetimeEntry_expand" style="position: absolute; left: '+(l.left-(f[0]-g[0])/2-(j?j.left:0))+"px; top: "+(l.top-(f[1]-g[1])/2-(j?j.top:0))+"px; width: "+f[0]+"px; height: "+f[1]+"px; background: #fff url("+h+') no-repeat 0px 0px; z-index: 10;"></div>').mousedown(c.datetimeEntry._handleSpinner).mouseup(c.datetimeEntry._endSpinner).mouseout(c.datetimeEntry._endExpand).mousemove(c.datetimeEntry._describeSpinner).insertAfter(m)}},_getInput:function(f){return c(f).siblings("."+c.datetimeEntry.markerClassName)[0]},_describeSpinner:function(f){var h=c.datetimeEntry._getSpinnerTarget(f);var g=c.data(c.datetimeEntry._getInput(h),d);h.title=c.datetimeEntry._get(g,"spinnerTexts")[c.datetimeEntry._getSpinnerRegion(g,f)]},_handleSpinner:function(g){var k=c.datetimeEntry._getSpinnerTarget(g);var f=c.datetimeEntry._getInput(k);if(c.datetimeEntry._isDisabledDatetimeEntry(f)){return}if(f==c.datetimeEntry._blurredInput){c.datetimeEntry._lastInput=f;c.datetimeEntry._blurredInput=null}var i=c.data(f,d);c.datetimeEntry._doFocus(f);var j=c.datetimeEntry._getSpinnerRegion(i,g);c.datetimeEntry._changeSpinner(i,k,j);c.datetimeEntry._actionSpinner(i,j);c.datetimeEntry._timer=null;c.datetimeEntry._handlingSpinner=true;var h=c.datetimeEntry._get(i,"spinnerRepeat");if(j>=3&&h[0]){c.datetimeEntry._timer=setTimeout(function(){c.datetimeEntry._repeatSpinner(i,j)},h[0]);c(k).one("mouseout",c.datetimeEntry._releaseSpinner).one("mouseup",c.datetimeEntry._releaseSpinner)}},_actionSpinner:function(f,g){if(!f.input.val()){c.datetimeEntry._extractDatetime(f)}switch(g){case 0:this._setDatetime(f);break;case 1:this._changeField(f,-1,false);break;case 2:this._changeField(f,+1,false);break;case 3:this._adjustField(f,+1);break;case 4:this._adjustField(f,-1);break}},_repeatSpinner:function(f,g){if(!c.datetimeEntry._timer){return}c.datetimeEntry._lastInput=c.datetimeEntry._blurredInput;this._actionSpinner(f,g);this._timer=setTimeout(function(){c.datetimeEntry._repeatSpinner(f,g)},this._get(f,"spinnerRepeat")[1])},_releaseSpinner:function(f){clearTimeout(c.datetimeEntry._timer);c.datetimeEntry._timer=null},_endExpand:function(g){c.datetimeEntry._timer=null;var i=c.datetimeEntry._getSpinnerTarget(g);var f=c.datetimeEntry._getInput(i);var h=c.data(f,d);c(i).remove();h._expanded=false},_endSpinner:function(g){c.datetimeEntry._timer=null;var i=c.datetimeEntry._getSpinnerTarget(g);var f=c.datetimeEntry._getInput(i);var h=c.data(f,d);if(!c.datetimeEntry._isDisabledDatetimeEntry(f)){c.datetimeEntry._changeSpinner(h,i,-1)}if(c.datetimeEntry._handlingSpinner){c.datetimeEntry._lastInput=c.datetimeEntry._blurredInput}if(c.datetimeEntry._lastInput&&c.datetimeEntry._handlingSpinner){c.datetimeEntry._showField(h)}c.datetimeEntry._handlingSpinner=false},_getSpinnerTarget:function(f){return f.target||f.srcElement},_getSpinnerRegion:function(l,h){var q=this._getSpinnerTarget(h);var n=(c.browser.opera||c.browser.safari?c.datetimeEntry._findPos(q):c(q).offset());var i=(c.browser.safari?c.datetimeEntry._findScroll(q):[document.documentElement.scrollLeft||document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop]);var g=this._get(l,"spinnerIncDecOnly");var j=(g?99:h.clientX+i[0]-n.left-(c.browser.msie?2:0));var o=h.clientY+i[1]-n.top-(c.browser.msie?2:0);var m=this._get(l,(l._expanded?"spinnerBigSize":"spinnerSize"));var p=(g?99:m[0]-1-j);var f=m[1]-1-o;if(m[2]>0&&Math.abs(j-p)<=m[2]&&Math.abs(o-f)<=m[2]){return 0}var k=Math.min(j,o,p,f);return(k==j?1:(k==p?2:(k==o?3:4)))},_changeSpinner:function(f,h,g){c(h).css("background-position","-"+((g+1)*this._get(f,(f._expanded?"spinnerBigSize":"spinnerSize"))[0])+"px 0px")},_findPos:function(h){var g=curTop=0;if(h.offsetParent){g=h.offsetLeft;curTop=h.offsetTop;while(h=h.offsetParent){var f=g;g+=h.offsetLeft;if(g<0){g=f}curTop+=h.offsetTop}}return{left:g,top:curTop}},_findScroll:function(h){var g=false;c(h).parents().each(function(){g|=c(this).css("position")=="fixed"});if(g){return[0,0]}var i=h.scrollLeft;var f=h.scrollTop;while(h=h.parentNode){i+=h.scrollLeft||0;f+=h.scrollTop||0}return[i,f]},_get:function(g,f){return(g.options[f]!=null?g.options[f]:c.datetimeEntry._defaults[f])},_extractDatetime:function(h){var g=this._parseDatetime(h,c(h.input).val())||this._normaliseDatetime(this._determineDatetime(h,this._get(h,"defaultDatetime"))||new Date());var f=this._constrainTime(h,[g.getHours(),g.getMinutes(),g.getSeconds()]);h._selectedYear=g.getFullYear();h._selectedMonth=g.getMonth();h._selectedDay=g.getDate();h._selectedHour=f[0];h._selectedMinute=f[1];h._selectedSecond=f[2];h._lastChr="";h._field=Math.max(0,this._get(h,"initialField"));if(h.input.val()!=""){this._showDatetime(h)}},_parseDatetime:function(g,t){if(!t){return null}var p=0;var A=0;var v=0;var k=0;var r=0;var B=0;var l=0;var m=this._get(g,"datetimeFormat");var h=function(){while(l<t.length&&t.charAt(l).match(/^[0-9]/)){l++}};var w;for(w=0;w<m.length&&l<t.length;w++){var f=m.charAt(w);var n=parseInt(t.substring(l),10);if(f.match(/y|o|d|h|m|s/i)&&isNaN(n)){throw"Invalid date"}n=(isNaN(n)?0:n);switch(f){case"y":case"Y":p=n;h();break;case"o":case"O":A=n;h();break;case"n":case"N":var o=this._get(g,f=="N"?"monthNames":"monthNamesShort");for(var u=0;u<o.length;u++){if(t.substring(l).substr(0,o[u].length).toLowerCase()==o[u].toLowerCase()){A=u+1;l+=o[u].length;break}}break;case"w":case"W":var z=this._get(g,f=="W"?"dayNames":"dayNamesShort");for(var u=0;u<z.length;u++){if(t.substring(l).substr(0,z[u].length).toLowerCase()==z[u].toLowerCase()){l+=z[u].length+1;break}}n=parseInt(t.substring(l),10);n=(isNaN(n)?0:n);case"d":case"D":v=n;h();break;case"h":case"H":k=n;h();break;case"m":case"M":r=n;h();break;case"s":case"S":B=n;h();break;case"a":var q=this._get(g,"ampmNames");var x=(t.substr(l,q[1].length).toLowerCase()==q[1].toLowerCase());k=(k==12?0:k)+(x?12:0);l+=q[0].length;break;default:l++}}if(w<m.length){throw"Invalid date"}p+=(p>=100||m.indexOf("y")==-1?0:(p>this._shortYearCutoff(g)?1900:2000));var s=this._constrainTime(g,[k,r,B]);var y=new Date(p,Math.max(0,A-1),v,s[0],s[1],s[2]);if(m.match(/y|o|n|d|w/i)&&(y.getFullYear()!=p||y.getMonth()+1!=A||y.getDate()!=v)){throw"Invalid date"}return y},_showDatetime:function(f){this._setValue(f,this._formatDatetime(f,this._get(f,"datetimeFormat")));this._showField(f)},_formatDatetime:function(j,l){var h="";var f=l.indexOf("a")>-1;for(var g=0;g<l.length;g++){var k=l.charAt(g);switch(k){case"y":h+=this._formatNumber(j._selectedYear%100);break;case"Y":h+=this._formatNumber(j._selectedYear,4);break;case"o":case"O":h+=this._formatNumber(j._selectedMonth+1,k=="o"?1:2);break;case"n":case"N":h+=this._get(j,(k=="N"?"monthNames":"monthNamesShort"))[j._selectedMonth];break;case"d":case"D":h+=this._formatNumber(j._selectedDay,k=="d"?1:2);break;case"w":case"W":h+=this._get(j,(k=="W"?"dayNames":"dayNamesShort"))[new Date(j._selectedYear,j._selectedMonth,j._selectedDay).getDay()]+" "+this._formatNumber(j._selectedDay);break;case"h":case"H":h+=this._formatNumber(!f?j._selectedHour:j._selectedHour%12||12,k=="h"?1:2);break;case"m":case"M":h+=this._formatNumber(j._selectedMinute,k=="m"?1:2);break;case"s":case"S":h+=this._formatNumber(j._selectedSecond,k=="s"?1:2);break;case"a":h+=this._get(j,"ampmNames")[j._selectedHour<12?0:1];break;default:h+=k;break}}return h},_showField:function(k){var h=k.input[0];if(k.input.is(":hidden")||c.datetimeEntry._lastInput!=h){return}var l=this._get(k,"datetimeFormat");var m=0;for(var j=0;j<k._fields[k._field];j++){m+=this._fieldLength(k,l.charAt(j))}var f=m+this._fieldLength(k,l.charAt(j));if(h.setSelectionRange){h.setSelectionRange(m,f)}else{if(h.createTextRange){var g=h.createTextRange();g.moveStart("character",m);g.moveEnd("character",f-k.input.val().length);g.select()}}if(!h.disabled){h.focus()}},_fieldLength:function(f,g){switch(g){case"Y":return 4;case"n":case"N":return this._get(f,(g=="N"?"monthNames":"monthNamesShort"))[f._selectedMonth].length;case"w":case"W":return this._get(f,(g=="W"?"dayNames":"dayNamesShort"))[new Date(f._selectedYear,f._selectedMonth,f._selectedDay).getDay()].length+3;case"y":case"O":case"D":case"H":case"M":case"S":return 2;case"o":return(""+(f._selectedMonth+1)).length;case"d":return(""+f._selectedDay).length;case"h":return(""+(f._ampmField==-1?f._selectedHour:f._selectedHour%12||12)).length;case"m":return(""+f._selectedMinute).length;case"s":return(""+f._selectedSecond).length;case"a":return this._get(f,"ampmNames")[0].length;default:return 1}},_formatNumber:function(g,f){g=""+g;f=f||2;while(g.length<f){g="0"+g}return g},_setValue:function(h,g){if(g!=h.input.val()){var f=this._get(h,"altField");if(f){c(f).val(!g?"":this._formatDatetime(h,this._get(h,"altFormat")||this._get(h,"datetimeFormat")))}h.input.val(g).trigger("change")}},_changeField:function(g,i,h){var f=(g.input.val()==""||g._field==(i==-1?0:g._fields.length-1));if(!f){g._field+=i}this._showField(g);g._lastChr="";c.data(g.input[0],d,g);return(f&&h)},_adjustField:function(k,j){if(k.input.val()==""){j=0}var o=this._get(k,"datetimeFormat").charAt(k._fields[k._field]);var m=k._selectedYear+(o.match(/y/i)?j:0);var l=k._selectedMonth+(o.match(/o|n/i)?j:0);var n=(o.match(/d|w/i)?k._selectedDay+j:Math.min(k._selectedDay,this._getDaysInMonth(m,l)));var f=this._get(k,"timeSteps");var i=k._selectedHour+(o.match(/h/i)?j*f[0]:0)+(o=="a"&&j!=0?(k._selectedHour<12?+12:-12):0);var h=k._selectedMinute+(o.match(/m/i)?j*f[1]:0);var g=k._selectedSecond+(o.match(/s/i)?j*f[2]:0);this._setDatetime(k,new Date(m,l,n,i,h,g))},_getDaysInMonth:function(f,g){return new Date(f,g+1,0).getDate()},_setDatetime:function(j,l){l=this._normaliseDatetime(this._determineDatetime(j,l||this._get(j,"defaultDatetime"))||new Date());var g=this._constrainTime(j,[l.getHours(),l.getMinutes(),l.getSeconds()]);l.setHours(g[0],g[1],g[2]);var f=this._normaliseDatetime(this._determineDatetime(j,this._get(j,"minDatetime")));var k=this._normaliseDatetime(this._determineDatetime(j,this._get(j,"maxDatetime")));var h=this._normaliseDatetime(this._determineDatetime(j,this._get(j,"minTime")),"d");var i=this._normaliseDatetime(this._determineDatetime(j,this._get(j,"maxTime")),"d");l=(f&&l<f?f:(k&&l>k?k:l));if(h&&this._normaliseDatetime(new Date(l.getTime()),"d")<h){this._copyTime(h,l)}if(i&&this._normaliseDatetime(new Date(l.getTime()),"d")>i){this._copyTime(i,l)}j._selectedYear=l.getFullYear();j._selectedMonth=l.getMonth();j._selectedDay=l.getDate();j._selectedHour=l.getHours();j._selectedMinute=l.getMinutes();j._selectedSecond=l.getSeconds();this._showDatetime(j);c.data(j.input[0],d,j)},_copyDate:function(g,f){f.setFullYear(g.getFullYear());f.setMonth(g.getMonth());f.setDate(g.getDate())},_copyTime:function(f,g){g.setHours(f.getHours());g.setMinutes(f.getMinutes());g.setSeconds(f.getSeconds())},_determineDatetime:function(i,h){var g=function(j){var k=new Date();k.setSeconds(k.getSeconds()+j);return k};var f=function(m){var r;try{r=c.datetimeEntry._parseDatetime(i,m);if(r){return r}}catch(o){}m=m.toLowerCase();r=new Date();var s=r.getFullYear();var p=r.getMonth();var t=r.getDate();var l=r.getHours();var k=r.getMinutes();var j=r.getSeconds();var q=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g;var n=q.exec(m);while(n){switch(n[2]||"s"){case"s":j+=parseInt(n[1],10);break;case"m":k+=parseInt(n[1],10);break;case"h":l+=parseInt(n[1],10);break;case"d":t+=parseInt(n[1],10);break;case"w":t+=parseInt(n[1],10)*7;break;case"o":p+=parseInt(n[1],10);break;case"y":s+=parseInt(n[1],10);break}n=q.exec(m)}return new Date(s,p,t,l,k,j)};return(h?(typeof h=="string"?f(h):(typeof h=="number"?g(h):h)):null)},_normaliseDatetime:function(g,f){if(!g){return null}if(f=="d"){g.setFullYear(0);g.setMonth(0);g.setDate(0)}if(f=="t"){g.setHours(0);g.setMinutes(0);g.setSeconds(0)}g.setMilliseconds(0);return g},_handleKeyPress:function(g,t){t=t.toLowerCase();var j=this._get(g,"datetimeFormat");var s=this._get(g,"datetimeSeparators");var f=j.charAt(g._fields[g._field]);var p=j.charAt(g._fields[g._field]+1);p=("yYoOnNdDwWhHmMsSa".indexOf(p)==-1?p:"");if((s+p).indexOf(t)>-1){this._changeField(g,+1,false)}else{if(t>="0"&&t<="9"){var y=parseInt(t,10);var r=parseInt(g._lastChr+t,10);var l=(!f.match(/y/i)?g._selectedYear:r);var w=(!f.match(/o|n/i)?g._selectedMonth+1:(r>=1&&r<=12?r:(y>0?y:g._selectedMonth+1)));var v=(!f.match(/d|w/i)?g._selectedDay:(r>=1&&r<=this._getDaysInMonth(l,w-1)?r:(y>0?y:g._selectedDay)));var i=(!f.match(/h/i)?g._selectedHour:(g._ampmField==-1?(r<24?r:y):(r>=1&&r<=12?r:(y>0?y:g._selectedHour))%12+(g._selectedHour>=12?12:0)));var o=(!f.match(/m/i)?g._selectedMinute:(r<60?r:y));var x=(!f.match(/s/i)?g._selectedSecond:(r<60?r:y));var q=this._constrainTime(g,[i,o,x]);var k=this._shortYearCutoff(g);this._setDatetime(g,new Date(l+(l>=100||f!="y"?0:(l>k?1900:2000)),w-1,v,q[0],q[1],q[2]));g._lastChr=(f!="Y"?"":g._lastChr.substr(Math.max(0,g._lastChr.length-2)))+t}else{if(f.match(/n/i)){g._lastChr+=t;var n=this._get(g,(f=="n"?"monthNamesShort":"monthNames"));var u=function(){for(var z=0;z<n.length;z++){if(n[z].toLowerCase().substring(0,g._lastChr.length)==g._lastChr){return z;break}}return -1};var w=u();if(w==-1){g._lastChr=t;w=u()}if(w==-1){g._lastChr=""}else{var l=g._selectedYear;var v=Math.min(g._selectedDay,this._getDaysInMonth(l,w));this._setDatetime(g,this._normaliseDatetime(new Date(l,w,v,g._selectedHour,g._selectedMinute,g._selectedSecond)))}}else{if(g._ampmField>-1){var m=this._get(g,"ampmNames");if((t==m[0].substring(0,1).toLowerCase()&&g._selectedHour>=12)||(t==m[1].substring(0,1).toLowerCase()&&g._selectedHour<12)){var h=g._field;g._field=g._ampmField;this._adjustField(g,+1);g._field=h;this._showField(g)}}}}}},_shortYearCutoff:function(g){var f=this._get(g,"shortYearCutoff");if(typeof f=="string"){f=new Date().getFullYear()+parseInt(f,10)}return f%100},_constrainTime:function(m,g){var l=(g!=null);if(!l){var h=this._determineTime(m,this._get(m,"defaultTime"))||new Date();g=[h.getHours(),h.getMinutes(),h.getSeconds()]}var k=false;var f=this._get(m,"timeSteps");for(var j=0;j<f.length;j++){if(k){g[j]=0}else{if(f[j]>1){g[j]=Math.round(g[j]/f[j])*f[j];k=true}}}return g}});function a(h,g){c.extend(h,g);for(var f in g){if(g[f]==null){h[f]=null}}return h}var b=["getDatetime","getOffset","isDisabled"];c.fn.datetimeEntry=function(g){var f=Array.prototype.slice.call(arguments,1);if(typeof g=="string"&&c.inArray(g,b)>-1){return c.datetimeEntry["_"+g+"DatetimeEntry"].apply(c.datetimeEntry,[this[0]].concat(f))}return this.each(function(){var i=this.nodeName.toLowerCase();if(i=="input"){if(typeof g=="string"){c.datetimeEntry["_"+g+"DatetimeEntry"].apply(c.datetimeEntry,[this].concat(f))}else{var h=(c.fn.metadata?c(this).metadata():{});c.datetimeEntry._connectDatetimeEntry(this,c.extend(h,g))}}})};c.datetimeEntry=new e()})(jQuery);